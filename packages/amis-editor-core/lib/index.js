/**
 * amis-editor-core v5.2.5-beta.3
 * Copyright 2018-2023 @fex
 */

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("amis"),t=require("i18n-runtime"),a=require("tslib"),n=require("react"),r=require("classnames"),o=require("lodash/isEqual"),i=require("mobx"),s=require("deep-diff"),d=require("lodash/isPlainObject"),l=require("lodash/isNumber"),c=require("amis-core"),u=require("mobx-react"),p=require("react-dom"),f=require("mobx-state-tree"),h=require("lodash/find"),m=require("lodash/groupBy"),g=require("lodash/uniq"),v=require("lodash/findIndex"),b=require("lodash/flatten"),y=require("lodash"),_=require("axios"),E=require("lodash/debounce"),w=require("json-ast-comments"),S=require("lodash/sortBy"),C=require("lodash/cloneDeep"),x=require("lodash/reverse"),I=require("lodash/pick"),R=require("lodash/omit"),O=require("lodash/isString"),N=require("amis-ui"),k=require("react-json-view"),A=require("moment");function M(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function D(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(a){if("default"!==a){var n=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,n.get?n:{enumerable:!0,get:function(){return e[a]}})}})),t.default=e,Object.freeze(t)}var F=M(n),P=D(n),B=M(r),T=M(o),j=M(s),L=M(d),z=M(l),H=M(h),$=M(m),K=M(g),V=M(v),U=M(b),W=M(_),q=M(E),Z=M(S),J=M(C),Y=M(x),G=M(I),X=M(R),Q=M(O),ee=M(k),te=M(A);t.extendLocale("en-US",{"4e7f76261f8c4c6d78998f85fc1f4c6e":"Margin","16a20243f9b741c08216dc9548de2968":"Overall","23ecf42cada8bf2715792d718544d107":"xs","391b8fa9c747a1799353ab856e666ad5":"sm",fd6e80f1e0199d6ecc3ee81ae04aa9ef:"default",aed1dfbc31703955e64806b799b67645:"md",ab18e30c0dc4093ceeda8961fac3d1f4:"lg","461d364c67ec6a45e011ed13f2f7154f":"Top margin","31e3752986d64c8b36897c8641c8628d":"Right margin",eabe91d9426b6446f707cea3e7ab2418:"Bottom margin","2e46d251ee6188bb1b3ff20656276572":"Left margin","3dc4038d0f0a2d2b3c2b2e29a5ec6dde":"None",a8b0c20416853bda54120bf19477ad11:"All",af767b7e4ae069d54f9ea839858d4c6d:"Top","4d9c32c23df5d234e629c922c58d8e12":"Right","3850a186c3235bc646d4c2f79cebac36":"Bottom",d2aff1417831aa621c16cd5b95306b4b:"Left","841d77223f0ec8cd0b530ed8e0775b20":"Padding","961534b4ea37e4e88aada736b299d063":"Border",d4d2a66820d30e07b44c850eb3f116c0:"Position","58f966670529f4753fb3c5a0647606be":"Size","6b36c6f7ec834692ec6c8e3816349fdd":"Color",fbae87bcc352f6933541fb77a07418ed:"Primary color",d8c7e04c8e2be23dd3b81a31db6e04f1:"Information","900c70fa5f7dbc014e6f762d5e0e885c":"Warning","540f84ddc0883866b229f71c2844199a":"Danger","330363dfc524cff2488f2ebde0500896":"Success","2fc96b2704b05d6a9f299c442573ee77":"White",adb7e5312abdb9a44297e48d63815fa3:"Dark color","48d0a09bdd5fe7e89f0a445b0ffdf14f":"Light color","0d98c74797e49d00bcc4c17c9d557a2b":"Others","0103eb2d3dca70270d1a74e9ec987ac9":"Rounded corner","8456bc40d48da5af833f1c63385e9879":"Font",b3b2682579133673d3fe08c156d565dc:"Normal","56dce5d1cbb97439d291c458e50107e0":"Bold","49a79f4047b81186c069ed1c9c151c66":"Light color","8e1b944f4389bdaab6f11d5bc83190c8":"Background",c28479019e24e0e4745f4948e9e97ee7:"Width",f72ce9ad683cc82e0eab557ffc9c67a0:"Make it exceptionally small",b95c462d7697958c25861193fc89ae07:"Make it big","3386da5f56fac758ed0f18e024ecb943":"Make it exceptionally big ",ffaa96ef7232cb6d8ee4d7e673dbf4ac:"Fill","47eac1ac32a8aa9081dffbdc4d374318":"Enter the css class name","939d5345ad4345dbaabe14798f6ac0f1":"Submit","55c56d01a7747ffe0346d42145b62d97":"The [Amis-editor] responds to the dynamic plugin addition event:",d6f73c6f3b92be5a64f7ea0163501284:"Cutting the region node is not allowed.","4fda4f585214d469c04466e2fc98b796":"Cutting the root node is not allowed.","657bbe06d3922b23552817df7fa8268e":"Cutting the current element is not allowed.","416445a316595bdeb44b661c7de875a8":"You cannot move the current element upward.","6ac88d87b2fd118ba7beab8c17880470":"You cannot move the current element downward.",fdb3cba60407b2f1aea0230cca644573:"You cannot delete the region node directly.","8a4b4e2e3b0382007e0c69ed1fe6fe71":"Deleting the root node is not allowed..","22f031f3de2e55c430a818d8c588f7a1":"Deleting the current element is not allowed.","3b6d5995e9f2ecd3df059b3f1bea201e":"A call error occurs or domain crossing occurs.","09f33be5ec04eb48b3102e4e31af5b38":"A call error occurs.","283c2a52955ad87574fd6c0cc932c443":"You can call the node only in the Iframe.",a71002967924a83e32b38a80705290fb:"System error","058ebdf2884474ebff2977ba2f0e275e":"System message","88f000a0fdc38ce3808cef072b00893c":"The rendering is in progress...","279321f97f11da7bc90facca156b3444":"A code error exists, which takes place at \\n {{@1}}.","7e4b38ba0ab9cbfcabd9dd859e36b601":"Currently, some data in the code are modified. Because the data is incorrect in its format and not saved, are you sure to abandon the modification?",af86ad9dd8a221f931dcdc5a63382b6f:"Check the modification.","43d586cd6cf1a512c0bcb85ed9efde51":"Confirm",bb79667f37035e9562ec6bcffd6cf8ef:"Component","5cb297585d4c81bb8fdbd31210a30d6f":"System component","6fce1c9aa3654ae2f0eedcc068a7e189":"Customize the component.","06e004ef21414c06d3e4ff2cefaf6a04":"Code","7f7c624a843b0d539a4ea59a696702f9":"Batch operation",b80ed82d124c6fd9242dcacdda2a2f8b:"Change the component type.","41150516bf0d90646edc5239593366e9":"Select the component and plug it into?",d87481b371771b4f150da76e311bbbef:"The component can be filtered by entering the keywords.",becdc848350872592201e31bab03892a:"It is impossible to preview it.",f26225bde6a250894a04db4c53ea03d0:"Details","751dfe6f476903c21381c9acf88332e2":"No component is available. Perhaps you should change the container.",e22c9a05b424b761efce11f17726fdd7:"Replace","9bdb07e72d3a9a6084201a7398523f5a":"Insert","625fb26b4b3340f7872b411f401e754c":"Cancel","95509c09bdef4bb7842a9b957ab1f971":"Disable the floating mode.","426480bb614633c8c3ba8faa0338b72f":"Enable the floating mode.",fbf7967f9baf6a22bd6ca7f4e6390bf9:"{{@ 1}}-[Public configuration]","93383ef1ab4a433df97a56a73e571b9f":"Outline","962d43ff8d39c381d8e2c73838412111":"Query the page element.","0c95d1856ffdeeade7cebe0ef928f361":"You can change the container by dragging the target into the navigating node.",c482df2a3ac8e014febd8a5fc9cadaea:"The loading is in progress, so you need to wait for a while...",c44c6c179c44e794b103053886847dc4:"No preview image is available.",e4cefe7df36e92da1d7e875b92655507:"Click to unfold.","7ae451de83aa6f5f140e941904377391":"Click to fold.","84c8f0087acfc9b9862371d0bd59b830":"Click to add 「{{@1}}」.",f3430f4fdd8b9643daa74f4a5716dd15:"&nbsp; details &nbsp;",b797a8992ef41320919e45a069f2b459:"No available component is found. You can continue to search for the component by changing the keyword.","0bd36c8db19e3a93506f39ebc8ff0ab9":"When the form, list, and other components have a name, they appear here for your selection.",bb28ec819520ced0ffb4c3da01f112e2:"Click to clear the current area.",e83a256e4f5bb4ff8b3d804b5473217a:"Confirm","22c799040acdb2601b437ed5449de076":"Container",bd9fcf46b4e5993f97fe04ee9ebcd7ed:"Undo",c3c873d33f1c6482c79b0ffd862786cd:"Redo",e9509c688a0df6b088503d21569b6e8f:"A type error exists so that no rendering is possible.","2168c5735883bd040eaf09909d0911b8":"Query the component by entering the keyword.",e9c38f88375807704270aa3572454976:"Search history","288f0c404c4e546aa3683ff5054e85e2":"Clear","4b9bc9abf2a2beb3772d903a3d01d1de":"Click to delete this search record.","9d3128a1675de32cdd290b31140a7290":"The query result is empty. You can continue search by changing the keyword.",accb901a02b1415b40d95cdd31b8da1d:"Component classification","79d3abe929f67f0644a78bf32adb3a89":"Copy",b7d817611230d382f6ef92b41848a342:"Copy the currently selected element.",eafbece1016a6af76cce466e55ad9f00:"Paste",e0b9bb8e41eccd3ce6b282664643d7f8:"Paste the copied element to the currently selected node.","43fc77886b7fbcd658f0ccdba36bd5a0":"Cut",a6be4ad12e9612811963c44466af3218:"Cut the currently selected element.","58887132871b71b015c3a391e7755815":"Restore the previous operation undone.",be5fbbe34ce9979bfb6576d9eddc5612:"Save","1f81fd4598e9151538f29c41b8aa0020":"Save all current operations.","645dbc5504e722a30896486085a06b32":"Preview","5bc425ac8b75c571093a63eb6073c354":"Enable the preview mode.","2f4aaddde33c9b93c36fd2503f3d122b":"Delete","426cd14ebd62a4922186527d07ba37f3":"Delete the current node.","499e58e764420aeed2d1476a56d8fa34":"Move upward",d040485f0e3887f0b297f8f772db03e4:"Move upward the current node.","08ad565f066d30572d1f8e2ee17cbe12":"Move downward","6348dc0e83d6ab391a8816f67d0e5ceb":"Move downward the current node.",fbec96e028142496df88ed2c63b44512:"Click to check the current shortcut key available.","9c3f1278ffa822835bb3a677f02bca27":"Current shortcut key available","4e98a5dcd3defffb23629fce3add04f6":"No shortcut key is available temporarily.","186733ed7ec817040b8f9cbc610ba49a":"Program error",e777eb796f8a02e97a891fde43d10ce4:"{{@1}} variable","5d665bc55779aafdefcc4050e3a8429e":"A {{@1}}({{@2}}) rendering error occurs：",a30dd4945df5b44b264fa3be6ee9682e:"Current renderer information:","63f94190d2d4ea22263e6e9f07c96558":"Error object:",f66335b5bff0e26fdff2a3303e0f9bb0:"Error information:","966e23b5c1efe8e18fc4f0c326d47314":")A rendering error occurs. For details about the error, check the console output.",f942c7a6a35c4eb1381d2966462d0489:'<div class="wrapper-sm b-a b-light m-b-sm">Be dragged into the placeholder area</div>',"245897371cda2055f5c17c6cf298ed48":"Tip: No redirection is allowed in the preview mode.",e1b7255934e3189b1f5d440fc1aa0230:"An exception occurs during the plugin registration because a plugin with the same name already exists:","979a50681e278dcc0be18f68459e8217":"System variable","75c142934800d6ee31fcf3fdff9e5d53":"The [Amis-editor] has a {{@1}} plugin.","0e24e1bbc19612a350f81296d9fb7802":"First select an element as the insertion position.",bd690facb536d759814ee64f2760fecb:"Adding a component is not allowed at the current node.","02f180cd26ff0951ddfda490080ee5ea":"The configuration item has been copied.","1ff035555ac8a68dc5b0ea2d0af55f00":"The clipboard content is empty.","6cb01692eea2fa7066d20fe2b6ccaea3":"False data","7f2f0461a58c43667d7245ce92bb2e77":"Hold and drag it to adjust its position.","78c1c38b91c672da1113fa2564c14ea6":"Insert a component forward.","87f48bbadfbef5ef4554e06b7e141d37":"Insert a component backward.","95b351c86267f3aedf89520959bce689":"Edit","0ec9eaf9c3525eb110db58aae5912210":"More","417db09508befe7dbe9f84a517a6edec":"Repeat a copy.","99b81127ef28368151621cdfccce69f8":"Cancel the multi-selection.","205f45ee17394bd5668412780eaa55e2":"Insert a component.","4c725f0159023c485ead728680e277ba":"Select {{@1}}.","7ad78e0991f34ff3a345c59a2fc31572":"Select a level.",aafda9e8f6b7b613680677c513edb7a6:"Cancel the selection.",b58d101f52531c845f15db63d7212115:"Copy the configuration.","74e2bc6615b7dbbb11fd5e1e212263ae":"Cut the configuration.",e2f401af580d1354ae00ec4ca19e2e24:"Paste the configuration.","21462ae22216eec41dc688cc4a8ae64b":"Move forward",ed2bc13d8bbd99e16e017dd5f5393393:"Move backward","9e54f3e4ee3330299c5fdc910c2e8d3c":"Undo",ae8e86e426c2ba00da274b66dc372a8b:"Redo","2b6bc0f293f5ca01b006206c2535ccbc":"Operation",aa920263020f14211a44ea172efc7253:"Context data","48ac479789304b37afa2f1b06642f4da":"Current","9bc16c658ab8a8c4eddc5e24d85bef20":"Upper layer","004d4be2ba8e6b8eed9333d15bc80a88":"Upper {{@1}} layer",e366ccf1556c0672dcecba135ed5472e:"Setting","0cbec43d00e491a663ff0525ffe31868":"Quickly build 「{{@1}}」.","1dd554cdfc1ddf7dce13453805523c16":"Change",a82240ce09faf0b972a8aa5c9e93d209:"Insert the component panel.",eadc8c8d4a8776893672330598babca0:"A position error occurs. The target position is not found.",f3c057f37fb9a4e7dd44b04919c12578:"Click to add an element in the left component panel.","54ea89b497ec3bb319c68844dfa3687f":"API","51e213e66b37d716a35baebc9193035c":"This API is used to store the data. After submission of the form, you can import the data into this API. <br/>\n          API response body requirements (If data exists in the data, the data is merged into the form context):<br/>\n          {{@1}}\n}, null, '<br/>')}","388e0ff896ea4f23e71d36c06443f157":"API response body requirements: <br/>\n          {{@1}},\n  page: 0,\n  total: 0\n}, null, '<br/>')}",b4bc91701b86fe8543d649e97daea602:"Initialize the API",f8747759c73697367bc8a570977c4a62:"API response body requirements:<br/>\n          {{@1}}\n}, null, '<br/>')}",d2b46e7989e18239d7036affd4d521db:"{{@1}}field","9caecd931b956381e0763d05aa42835c":"Field","47cd88592f6ef2b258f02c0690d267ed":"Hide, which is selected by default","32c65d8d7431e76029678ec7bb73a5ab":"Title","020586d0c69f8211840ddf9ee9bbf6ab":"Bind the field","226b0912184333c81babf2f1894ec0c1":"Type","97d07614380da93d257f9fbf81aa56fb":"Text","20def7942674282277c3714ed7ea6ce0":"Image","4ff1e74e43a3586339251494117185ad":"Date",c7bff79d059a0b7ff9b02441959d8be2:"Progress","3fea7ca76cdece641436d7ab0d02ab1b":"Status","9da188491dd34c4382a5b9f006194e41":"Mapping",b3e55578af5dd473bab62641bb2f5f8e:"Input type","9b6425cd2d496c9cb5a6c6b8ff125d1b":"Input box","15d169d28cd48c97fe751e4cc92ca926":"Multi-line text","9597dcaf432ceba92a160d61cb1ef65f":"Digital input","9913107b19cb6012250134ff91377430":"Radiobox","454e60f5759903d7d3dba58e3f9bd590":"Select-box",db98f889ce6bc235e66bd4b2a788d137:"Checkbox","006ded9fa277cf030592021f595a07d5":"Select",a6beb974cc0b50eebd18120b8110a88b:"Switch",b339aa87104709397ba68e7ebbc6e5ba:"Table","481e034e6026969aae4ce7ce7c8a7b6f":"File upload","6bfb9bb2218ff32b6139e98bc93707c0":"Image upload","24b6d4c0892a8f3ee2a982e3ab0afe38":"Rich text editor","4484fa04e7b71db4c8293e5bcb53eca4":"Add a field.","4cc6a76c146c0360a41ceaf5e212c891":"Generate a field automatically based on the API.",a9fea442707e26dee478b34a2f2ce263:"First fill in the API.","91aa2166ee4811414381c8d94e6567e6":"Because the API return format is incorrect, check the API response format requirements.","3712972d84adf48acbd6ad24b4d75ad0":"List","66ab5e9f24c8f46012a25c89919fb191":"Add",e73cefac9d030927da1618c7b15c98c9:"Edit in batch","7fb62b30119c3797a843a48368463314":"Delete in batch","8d9a071ee2ef45e045968e117a205c07":"Import","55405ea6ff6fd823ffab7e6b10ddfa95":"Export",c26996a6506adf397f0668d376d0b40b:"Simple query","6ff4bf3d567e977aa4c90c27dff1e6db":"Fuzzy query","9c4666fd08c2738eb9611a3721cb5f0f":"Advanced query",a094e5b7699ea4b61094cc4120170423:"Data source",eeb6908870e058bc23d52c1e405a054e:"Previous step","38ce27d84639f3a6e07c00b3b4995c0e":"Next step","392342f7750a565f9a79c678c6b12421":"<Hidden state>","8e44aba21d01c1e08cc79f4ebaf0b3f2":"The layout container component does not support dragging and inserting child elements.","52e6abbe5c11e7cbf14788c1540f8bf2":"Copied","372ea9fd27fb7cfacfe1b4ca3046f8d0":"Configuration Item","2a6287664de5ab46c65220c7182878ff":"Cut",db805d4e361ac2d3fc6047eaea1a7c69:"Free container","969e9e56b3812abffa3994f35ea31835":"Adsorption vessel","5b804b05e14aaacc75033a4f77fc2844":"Source code","69a53230577258b6d97ee932befcc168":"<Column>:",cc6aeb073ebc3cb29734a49164f8964c:"Page variables",b71e8739cb9bcba8057a8fa8b59512da:"<Column>"}),t.extendLocale("zh-CN",{"54ea89b497ec3bb319c68844dfa3687f":"接口","51e213e66b37d716a35baebc9193035c":"用来保存数据, 表单提交后将数据传入此接口。 <br/>\n          接口响应体要求(如果data中有数据，该数据将被合并到表单上下文中)：<br/>\n          {{@1}}\n}, null, '<br/>')}","388e0ff896ea4f23e71d36c06443f157":"接口响应体要求：<br/>\n          {{@1}},\n  page: 0,\n  total: 0\n}, null, '<br/>')}",b4bc91701b86fe8543d649e97daea602:"初始化接口",f8747759c73697367bc8a570977c4a62:"接口响应体要求：<br/>\n          {{@1}}\n}, null, '<br/>')}",d2b46e7989e18239d7036affd4d521db:"{{@1}}字段","9caecd931b956381e0763d05aa42835c":"字段","47cd88592f6ef2b258f02c0690d267ed":"隐藏，默认选中","32c65d8d7431e76029678ec7bb73a5ab":"标题","020586d0c69f8211840ddf9ee9bbf6ab":"绑定字段","226b0912184333c81babf2f1894ec0c1":"类型","97d07614380da93d257f9fbf81aa56fb":"文本","20def7942674282277c3714ed7ea6ce0":"图片","4ff1e74e43a3586339251494117185ad":"日期",c7bff79d059a0b7ff9b02441959d8be2:"进度","3fea7ca76cdece641436d7ab0d02ab1b":"状态","9da188491dd34c4382a5b9f006194e41":"映射",b3e55578af5dd473bab62641bb2f5f8e:"输入类型","9b6425cd2d496c9cb5a6c6b8ff125d1b":"输入框","15d169d28cd48c97fe751e4cc92ca926":"多行文本","9597dcaf432ceba92a160d61cb1ef65f":"数字输入","9913107b19cb6012250134ff91377430":"单选框","454e60f5759903d7d3dba58e3f9bd590":"勾选框",db98f889ce6bc235e66bd4b2a788d137:"复选框","006ded9fa277cf030592021f595a07d5":"下拉框",a6beb974cc0b50eebd18120b8110a88b:"开关",b339aa87104709397ba68e7ebbc6e5ba:"表格","481e034e6026969aae4ce7ce7c8a7b6f":"文件上传","6bfb9bb2218ff32b6139e98bc93707c0":"图片上传","24b6d4c0892a8f3ee2a982e3ab0afe38":"富文本编辑器","4484fa04e7b71db4c8293e5bcb53eca4":"添加字段","4cc6a76c146c0360a41ceaf5e212c891":"基于接口自动生成字段",a9fea442707e26dee478b34a2f2ce263:"请先填写接口","91aa2166ee4811414381c8d94e6567e6":"API返回格式不正确，请查看接口响应格式要求","3712972d84adf48acbd6ad24b4d75ad0":"列表","66ab5e9f24c8f46012a25c89919fb191":"新增",f26225bde6a250894a04db4c53ea03d0:"详情","95b351c86267f3aedf89520959bce689":"编辑","2f4aaddde33c9b93c36fd2503f3d122b":"删除",e73cefac9d030927da1618c7b15c98c9:"批量编辑","7fb62b30119c3797a843a48368463314":"批量删除","8d9a071ee2ef45e045968e117a205c07":"导入","55405ea6ff6fd823ffab7e6b10ddfa95":"导出",c26996a6506adf397f0668d376d0b40b:"简单查询","6ff4bf3d567e977aa4c90c27dff1e6db":"模糊查询","9c4666fd08c2738eb9611a3721cb5f0f":"高级查询",a094e5b7699ea4b61094cc4120170423:"数据来源","4e7f76261f8c4c6d78998f85fc1f4c6e":"外边距","16a20243f9b741c08216dc9548de2968":"整体","23ecf42cada8bf2715792d718544d107":"极小","391b8fa9c747a1799353ab856e666ad5":"小",fd6e80f1e0199d6ecc3ee81ae04aa9ef:"正常",aed1dfbc31703955e64806b799b67645:"中",ab18e30c0dc4093ceeda8961fac3d1f4:"大","461d364c67ec6a45e011ed13f2f7154f":"上边距","31e3752986d64c8b36897c8641c8628d":"右边距",eabe91d9426b6446f707cea3e7ab2418:"下边距","2e46d251ee6188bb1b3ff20656276572":"左边距","3dc4038d0f0a2d2b3c2b2e29a5ec6dde":"置无",a8b0c20416853bda54120bf19477ad11:"全部",af767b7e4ae069d54f9ea839858d4c6d:"上","4d9c32c23df5d234e629c922c58d8e12":"右","3850a186c3235bc646d4c2f79cebac36":"下",d2aff1417831aa621c16cd5b95306b4b:"左","841d77223f0ec8cd0b530ed8e0775b20":"内边距","961534b4ea37e4e88aada736b299d063":"边框",d4d2a66820d30e07b44c850eb3f116c0:"位置","58f966670529f4753fb3c5a0647606be":"大小","6b36c6f7ec834692ec6c8e3816349fdd":"颜色",fbae87bcc352f6933541fb77a07418ed:"主色",d8c7e04c8e2be23dd3b81a31db6e04f1:"信息","900c70fa5f7dbc014e6f762d5e0e885c":"警告","540f84ddc0883866b229f71c2844199a":"危险","330363dfc524cff2488f2ebde0500896":"成功","2fc96b2704b05d6a9f299c442573ee77":"白色",adb7e5312abdb9a44297e48d63815fa3:"暗色","48d0a09bdd5fe7e89f0a445b0ffdf14f":"浅色","0d98c74797e49d00bcc4c17c9d557a2b":"其他","0103eb2d3dca70270d1a74e9ec987ac9":"圆角","8456bc40d48da5af833f1c63385e9879":"字体",b3b2682579133673d3fe08c156d565dc:"细","56dce5d1cbb97439d291c458e50107e0":"粗","49a79f4047b81186c069ed1c9c151c66":"淡色","8e1b944f4389bdaab6f11d5bc83190c8":"背景",c28479019e24e0e4745f4948e9e97ee7:"宽度",f72ce9ad683cc82e0eab557ffc9c67a0:"特小",b95c462d7697958c25861193fc89ae07:"加大","3386da5f56fac758ed0f18e024ecb943":"特大",ffaa96ef7232cb6d8ee4d7e673dbf4ac:"占满","47eac1ac32a8aa9081dffbdc4d374318":"请输入 css 类名","939d5345ad4345dbaabe14798f6ac0f1":"提交","55c56d01a7747ffe0346d42145b62d97":"[amis-editor]响应动态添加插件事件：",d6f73c6f3b92be5a64f7ea0163501284:"区域节点不允许剪切。","4fda4f585214d469c04466e2fc98b796":"根节点不允许剪切。","657bbe06d3922b23552817df7fa8268e":"当前元素不允许剪切。","416445a316595bdeb44b661c7de875a8":"当前元素不能向上移动","6ac88d87b2fd118ba7beab8c17880470":"当前元素不能向下移动",fdb3cba60407b2f1aea0230cca644573:"区域节点不可以直接删除。","8a4b4e2e3b0382007e0c69ed1fe6fe71":"根节点不允许删除。","22f031f3de2e55c430a818d8c588f7a1":"当前元素不允许删除。","3b6d5995e9f2ecd3df059b3f1bea201e":"调用错误，或者存在跨域。","09f33be5ec04eb48b3102e4e31af5b38":"调用错误","283c2a52955ad87574fd6c0cc932c443":"只能在 Iframe 里面调用",a71002967924a83e32b38a80705290fb:"系统错误","058ebdf2884474ebff2977ba2f0e275e":"系统消息","88f000a0fdc38ce3808cef072b00893c":"渲染中...","279321f97f11da7bc90facca156b3444":"代码有误，错误的地方是\\n {{@1}}","7e4b38ba0ab9cbfcabd9dd859e36b601":"当前有部分已更改数据因为格式不正确尚未保存，您确认要丢弃这部分更改吗？",af86ad9dd8a221f931dcdc5a63382b6f:"查看更改","43d586cd6cf1a512c0bcb85ed9efde51":"请确认",bb79667f37035e9562ec6bcffd6cf8ef:"组件","5cb297585d4c81bb8fdbd31210a30d6f":"系统组件","6fce1c9aa3654ae2f0eedcc068a7e189":"自定义组件","06e004ef21414c06d3e4ff2cefaf6a04":"代码","7f7c624a843b0d539a4ea59a696702f9":"批量操作",b80ed82d124c6fd9242dcacdda2a2f8b:"更改组件类型","41150516bf0d90646edc5239593366e9":"选中组件插入到",d87481b371771b4f150da76e311bbbef:"输入关键字可过滤组件",becdc848350872592201e31bab03892a:"无法预览","751dfe6f476903c21381c9acf88332e2":"没有可用组件，也许你该切换容器试试。",e22c9a05b424b761efce11f17726fdd7:"替换","9bdb07e72d3a9a6084201a7398523f5a":"插入","625fb26b4b3340f7872b411f401e754c":"取消","95509c09bdef4bb7842a9b957ab1f971":"关闭悬浮模式","426480bb614633c8c3ba8faa0338b72f":"开启悬浮模式",fbf7967f9baf6a22bd6ca7f4e6390bf9:"{{@1}}-[公共配置]","93383ef1ab4a433df97a56a73e571b9f":"大纲","962d43ff8d39c381d8e2c73838412111":"查询页面元素","0c95d1856ffdeeade7cebe0ef928f361":"将目标拖入导航中的节点可以切换容器",c482df2a3ac8e014febd8a5fc9cadaea:"加载中，请稍等...",c44c6c179c44e794b103053886847dc4:"没有预览图",e4cefe7df36e92da1d7e875b92655507:"点击展开","7ae451de83aa6f5f140e941904377391":"点击折叠","84c8f0087acfc9b9862371d0bd59b830":"点击添加「{{@1}}」",f3430f4fdd8b9643daa74f4a5716dd15:"&nbsp;详情&nbsp;",b797a8992ef41320919e45a069f2b459:"没有找到可用组件，您可以换个关键字继续查找。","0bd36c8db19e3a93506f39ebc8ff0ab9":"当表单、列表等组件有名字时会出现在这里方便选择",bb28ec819520ced0ffb4c3da01f112e2:"点击清空当前区域",eeb6908870e058bc23d52c1e405a054e:"上一步","38ce27d84639f3a6e07c00b3b4995c0e":"下一步",e83a256e4f5bb4ff8b3d804b5473217a:"确认","22c799040acdb2601b437ed5449de076":"容器",bd9fcf46b4e5993f97fe04ee9ebcd7ed:"撤销",c3c873d33f1c6482c79b0ffd862786cd:"重做",e9509c688a0df6b088503d21569b6e8f:"类型错误，无法渲染","2168c5735883bd040eaf09909d0911b8":"输入关键字查询组件",e9c38f88375807704270aa3572454976:"搜索历史","288f0c404c4e546aa3683ff5054e85e2":"清空","4b9bc9abf2a2beb3772d903a3d01d1de":"点击删除这条搜索记录","9d3128a1675de32cdd290b31140a7290":"搜索结果为空，您可以换个关键字继续查找。",accb901a02b1415b40d95cdd31b8da1d:"组件分类","79d3abe929f67f0644a78bf32adb3a89":"复制",b7d817611230d382f6ef92b41848a342:"复制当前选中元素",eafbece1016a6af76cce466e55ad9f00:"粘贴",e0b9bb8e41eccd3ce6b282664643d7f8:"将复制的元素插入到当前选中节点","43fc77886b7fbcd658f0ccdba36bd5a0":"剪切",a6be4ad12e9612811963c44466af3218:"剪切当前选中元素","58887132871b71b015c3a391e7755815":"恢复上一次撤销的操作",be5fbbe34ce9979bfb6576d9eddc5612:"保存","1f81fd4598e9151538f29c41b8aa0020":"保存当前所有操作","645dbc5504e722a30896486085a06b32":"预览","5bc425ac8b75c571093a63eb6073c354":"开启预览模式","426cd14ebd62a4922186527d07ba37f3":"删除当前节点","499e58e764420aeed2d1476a56d8fa34":"向上移动",d040485f0e3887f0b297f8f772db03e4:"向上移动当前节点","08ad565f066d30572d1f8e2ee17cbe12":"向下移动","6348dc0e83d6ab391a8816f67d0e5ceb":"向下移动当前节点",fbec96e028142496df88ed2c63b44512:"点击查看当前可用快捷键","9c3f1278ffa822835bb3a677f02bca27":"当前可用快捷键","4e98a5dcd3defffb23629fce3add04f6":"暂无快捷键","186733ed7ec817040b8f9cbc610ba49a":"程序错误",e777eb796f8a02e97a891fde43d10ce4:"{{@1}}变量","5d665bc55779aafdefcc4050e3a8429e":"{{@1}}({{@2}})渲染发生错误：",a30dd4945df5b44b264fa3be6ee9682e:"当前渲染器信息：","63f94190d2d4ea22263e6e9f07c96558":"错误对象：",f66335b5bff0e26fdff2a3303e0f9bb0:"错误信息：","966e23b5c1efe8e18fc4f0c326d47314":")渲染发生错误，详细错误信息请查看控制台输出。","245897371cda2055f5c17c6cf298ed48":"温馨提示：预览模式下禁止跳转",e1b7255934e3189b1f5d440fc1aa0230:"注册插件异常，已存在同名插件：","979a50681e278dcc0be18f68459e8217":"系统变量","75c142934800d6ee31fcf3fdff9e5d53":"[amis-editor]当前已有{{@1}}插件","0e24e1bbc19612a350f81296d9fb7802":"请先选择一个元素作为插入的位置。",bd690facb536d759814ee64f2760fecb:"当前节点不允许追加新组件。","02f180cd26ff0951ddfda490080ee5ea":"配置项已复制","1ff035555ac8a68dc5b0ea2d0af55f00":"剪切板内容为空","6cb01692eea2fa7066d20fe2b6ccaea3":"假数据","7f2f0461a58c43667d7245ce92bb2e77":"按住拖动调整位置","78c1c38b91c672da1113fa2564c14ea6":"向前插入组件","87f48bbadfbef5ef4554e06b7e141d37":"向后插入组件","0ec9eaf9c3525eb110db58aae5912210":"更多","417db09508befe7dbe9f84a517a6edec":"重复一份","99b81127ef28368151621cdfccce69f8":"取消多选","205f45ee17394bd5668412780eaa55e2":"插入组件","4c725f0159023c485ead728680e277ba":"选中{{@1}}","7ad78e0991f34ff3a345c59a2fc31572":"选中层级",aafda9e8f6b7b613680677c513edb7a6:"取消选中",b58d101f52531c845f15db63d7212115:"复制配置","74e2bc6615b7dbbb11fd5e1e212263ae":"剪切配置",e2f401af580d1354ae00ec4ca19e2e24:"粘贴配置","21462ae22216eec41dc688cc4a8ae64b":"向前移动",ed2bc13d8bbd99e16e017dd5f5393393:"向后移动","9e54f3e4ee3330299c5fdc910c2e8d3c":"撤销（Undo）",ae8e86e426c2ba00da274b66dc372a8b:"重做（Redo）","2b6bc0f293f5ca01b006206c2535ccbc":"操作",aa920263020f14211a44ea172efc7253:"上下文数据","48ac479789304b37afa2f1b06642f4da":"当前","9bc16c658ab8a8c4eddc5e24d85bef20":"上层","004d4be2ba8e6b8eed9333d15bc80a88":"上{{@1}}层",e366ccf1556c0672dcecba135ed5472e:"设置","0cbec43d00e491a663ff0525ffe31868":"快速构建「{{@1}}」","1dd554cdfc1ddf7dce13453805523c16":"变更",a82240ce09faf0b972a8aa5c9e93d209:"插入组件面板",eadc8c8d4a8776893672330598babca0:"位置错误，目标位置没有找到",f3c057f37fb9a4e7dd44b04919c12578:"请从左侧组件面板中点击添加新的元素。",f942c7a6a35c4eb1381d2966462d0489:'<div class="wrapper-sm b-a b-light m-b-sm">拖入占位</div>',"392342f7750a565f9a79c678c6b12421":"<隐藏状态>","8e44aba21d01c1e08cc79f4ebaf0b3f2":"布局容器组件不支持拖拽插入子元素。","52e6abbe5c11e7cbf14788c1540f8bf2":"已复制","372ea9fd27fb7cfacfe1b4ca3046f8d0":"配置项","2a6287664de5ab46c65220c7182878ff":"已剪切",db805d4e361ac2d3fc6047eaea1a7c69:"自由容器","969e9e56b3812abffa3994f35ea31835":"吸附容器","5b804b05e14aaacc75033a4f77fc2844":"源码","69a53230577258b6d97ee932befcc168":"<列>:",cc6aeb073ebc3cb29734a49164f8964c:"页面变量",b71e8739cb9bcba8057a8fa8b59512da:"<列>"});var ae=e.utils.guid,ne=e.utils.omitControls,re=e.utils.isObjectShallowModified,oe=e.utils.cloneObject,ie=e.utils.anyChanged,se=e.utils.noop,de=e.utils.makeHorizontalDeeper,le=e.utils.findIndex,ce=e.utils.isEmpty,ue=e.utils.eachTree,pe=e.utils.createObject;function fe(e){return e}function he(e){return et(e)?(Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),e):e}function me(e){if(!et(e)||e.$$typeof)return e;if(Array.isArray(e))return e.map(me);var t={},n=!1;return e.$$id||(n=!0,t.$$id=ae()),Object.keys(e).forEach((function(a){var r=e[a];if(Array.isArray(r)){var o=!1,i=r.map((function(e){var t=me(e);return t!==e&&(o=!0),t}));o&&(n=!0,t[a]=i)}else{(i=me(r))!==r&&(n=!0,t[a]=i)}})),n&&(e=he(a.__assign(a.__assign({},e),t))),e}function ge(e,t){if(Array.isArray(e)){var n=!1,r=e.map((function(e){var a=ge(e,t);return a!==e&&(n=!0),a}));return n?r:e}if(!et(e)||i.isObservable(e))return e;var o=!1,s={};return e.$$id&&(o=!0,s.$$id=void 0),Object.keys(e).forEach((function(a){var n=e[a];if("function"==typeof t?t(a,n):!1!==t&&"__"===a.substring(0,2))return s[a]=void 0,void(o=!0);var r=ge(n,t);r!==n&&(o=!0,s[a]=r)})),o&&(e=he(a.__assign(a.__assign({},e),s))),e}function ve(e){var t=e.css;if(!e.css)return e;var n={};return Object.keys(t).forEach((function(t){if("$$id"!==t){var a="".concat(t,"-").concat(e.id.replace("u:",""));e[t]?~e[t].indexOf(a)||(n[t]=e[t]+" "+a):n[t]=a}})),e=he(a.__assign(a.__assign({},e),n))}function be(e,t,a){var n=e;return a&&a.push(e),t.forEach((function(e){n=n[e],a&&a.push(n)})),n}function ye(e,t,a){void 0===a&&(a="$$id");for(var n=[],r=!1,o=[{path:".",data:e}],i=function(){var e=o.shift(),i=e.data,s=e.path;if(i[a]===t)return r=!0,n=s.split(".").filter((function(e){return e})),"break";Object.keys(i).forEach((function(e){var t=i[e];Array.isArray(t)?t.forEach((function(t,a){et(t)&&o.push({data:t,path:"".concat(s,".").concat(e,".").concat(a)})})):et(t)&&o.push({data:t,path:"".concat(s,".").concat(e)})}))};o.length;){if("break"===i())break}return r?n:null}function _e(e,t,a){var n=ye(e,t,a);return null===n?null:be(e,n)}function Ee(e,t,a){void 0===a&&(a=!1);var n=ye(e,t);if(null===n||!n.length)return null;var r=e,o=[r];for(n.pop(),n.forEach((function(e){r=r[e],o.unshift(r)}));a&&Array.isArray(o[0]);)o.shift();return o[0]}function we(e,t,n,r){void 0===r&&(r=!1);var o=ye(e,t);if(null===o)return e;var i=[],s=be(e,o,i);if(Array.isArray(n)&&i[i.length-2]&&Array.isArray(i[i.length-2])){var d=i[i.length-2].indexOf(i[i.length-1]);i[i.length-2]=i[i.length-2].concat(),i[i.length-2].splice.apply(i[i.length-2],[d,1].concat(n)),i.pop()}else i[i.length-1]=s=a.__assign(a.__assign(a.__assign({},r?null:s),n),{$$id:t});for(;i.length>1;){var l=i.pop();Array.isArray(i[i.length-1])?i[i.length-1]=i[i.length-1].concat():i[i.length-1]=a.__assign({},i[i.length-1]),i[i.length-1][o[i.length-1]]=l}return i[0]}function Se(e,t,n,r){var o=ye(e,t);if(null===o)return e;Array.isArray(n)&&n.push.apply(n,o);var i=o.pop(),s=[],d=be(e,o,s);for(Array.isArray(d)?(s[s.length-1]=d=d.concat(),d.splice(i,1),r&&!d.length&&(s[s.length-1]=void 0)):(s[s.length-1]=d=a.__assign({},d),delete d[i]);s.length>1;){var l=s.pop();Array.isArray(s[s.length-1])?s[s.length-1]=s[s.length-1].concat():s[s.length-1]=a.__assign({},s[s.length-1]),void 0===l?delete s[s.length-1][o[s.length-1]]:s[s.length-1][o[s.length-1]]=l}return s[0]}function Ce(e,t){if(!et(e)||!et(t))return t;if(!re(e,t))return e;var a={};return e.$$id&&(a.$$id=e.$$id),Object.keys(t).forEach((function(n){Array.isArray(t[n])&&Array.isArray(e[n])&&t[n]!==e[n]?a[n]=t[n].map((function(t,a){return e[n][a]?Ce(e[n][a],t):t})):void 0===e[n]?a[n]=t[n]:a[n]=Ce(e[n],t[n])})),a}function xe(e,t,n){var r=ye(e,t);if(null===r)return e;var o=parseInt(r.pop(),10),i=[],s=be(e,r,i);if(!Array.isArray(s))return e;for(i[i.length-1]=s=s.concat(),n(s,s[o],o);i.length>1;){var d=i.pop();Array.isArray(i[i.length-1])?i[i.length-1]=i[i.length-1].concat():i[i.length-1]=a.__assign({},i[i.length-1]),i[i.length-1][r[i.length-1]]=d}return i[0]}function Ie(e,t){var a=Ee(e,t);return!(!a||!Array.isArray(a))&&le(a,(function(e){return e.$$id===t}))>0}function Re(e,t){return xe(e,t,(function(e,t,a){0!==a&&(e.splice(a,1),e.splice(a-1,0,t))}))}function Oe(e,t){var a=Ee(e,t);if(!a||!Array.isArray(a))return!1;var n=le(a,(function(e){return e.$$id===t}));return~n&&n<a.length-1}function Ne(e,t){return xe(e,t,(function(e,t,a){a!==e.length-1&&(e.splice(a,1),e.splice(a+1,0,t))}))}function ke(e,t,a){return void 0===a&&(a={}),xe(e,t,(function(e,t,n){var r=me(ge(t));e.splice(n+1,0,Ae(r,a))}))}function Ae(e,t){return void 0===t&&(t={}),Ye(e,(function(e,a,n){var r,o="string"==typeof e&&0===e.indexOf("u:");if("id"===a&&o&&n){var i=at();t[n.id]=i,n.id=i}else"componentId"===a&&o&&(n.componentId=null!==(r=t[e])&&void 0!==r?r:e);return e})),e}function Me(e){Object.isFrozen(e)||(Array.isArray(e)&&e.forEach((function(e){return Me(e)})),et(e)&&!i.isObservable(e)&&(e.type&&!e.id&&(e.id=at()),Object.keys(e).forEach((function(t){var a=e[t];(et(a)||Array.isArray(a))&&Me(a)}))))}function De(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild}function Fe(e,t,a){return void 0===a&&(a={}),(null==e?void 0:e.$$commonSchema)===t?a[t]=e:L.default(e)?Object.keys(e).forEach((function(n){Fe(e[n],t,a)})):Array.isArray(e)&&e.map((function(e){return Fe(e,t,a)})),a}function Pe(e,t){if(Array.isArray(e))return e.map((function(e){return Pe(e,t)}));if(L.default(e)){var n={},r=!1;return Object.keys(e).forEach((function(o){var i=e[o],s=Pe(i,t);if(e.$$commonSchema?n[o]&&(n[o]=s):n[o]=s,s!==i&&(r=!0),"$$commonSchema"!==o||t){if("$$commonSchema"===o&&t){var d=Fe(t,i);d[i]&&(e=n=a.__assign({},d[i]))}}else e=n={$$commonSchema:i}})),r?n:e}return e}function Be(e){if(Array.isArray(e))return e.map((function(e){return Be(e)}));if(L.default(e)){var t={},a=!1;return Object.keys(e).forEach((function(n){var r=e[n];~["visible","visibleOn","hidden","hiddenOn","toggled"].indexOf(n)&&(n="$$".concat(n),a=!0);var o=Be(r);t[n]=o,/[C|c]lassName/.test(n)&&e.editorState&&(t[n]=t[n]?t[n]+" "+e.editorState:e.editorState,a=!0),o!==r&&(a=!0)})),a?t:e}return e}function Te(e){return function(t){return!~e.indexOf(t)}}function je(e,t){var a=t?"function"==typeof t?t:function(e){return e[t]}:function(e){return e};return function(t,n){var r=e.indexOf(a(t)),o=e.indexOf(a(n));return(r=~r?r:999999)>(o=~o?o:999999)?1:r===o?0:-1}}function Le(e,t){var a=localStorage.getItem("amis-editor-".concat(e));return a&&(a=JSON.parse(a)),a||t}function ze(e,t){t=JSON.stringify(t),localStorage.setItem("amis-editor-".concat(e),t)}function He(e){return e.replace(/\-[a-z0-9]+$/g,"")}var $e=e.utils.autobind;function Ke(e){for(;e&&(e.classList.add("ae-is-draging"),!(null==(e=e.parentElement)?void 0:e.hasAttribute("data-region"))););}function Ve(e){for(;e&&(e.classList.remove("ae-is-draging"),!(null==(e=e.parentElement)?void 0:e.hasAttribute("data-region"))););}function Ue(e){return e.replace(/\W+(.)/g,(function(e,t){return t.toUpperCase()}))}var We=function(e,t){var a;return i.reaction(e,(function(e){T.default(e,a)||(t(e,a),a=e)}))};function qe(e,t){void 0===t&&(t=1);for(var a=[];t-- >0;)a.push(e);return a}function Ze(e,t,a){return j.default.diff(e,t,a)}function Je(e,t){return t?t.reduce((function(t,n){return function(e,t,n){if(e&&Array.isArray(null==n?void 0:n.path)){e=e===t?a.__assign({},e):e;var r=n.path.concat();"A"!==n.kind&&r.pop(),r.reduce((function(e,t){var n=e.target,r=e.source[t],o=n[t];return r===o&&(o=Array.isArray(o)?o.concat():a.__assign({},o),n[t]=o),{source:r,target:o}}),{target:e,source:t}),j.default.applyChange(e,t,n)}return e}(t,e,n)}),e):e}function Ye(e,t){Object.keys(e).forEach((function(a){var n=e[a];L.default(n)||Array.isArray(n)?Ye(n,t):t(n,a,e)}))}var Ge=function(e){return z.default(e)||!isNaN(parseFloat(String(e).toString()))},Xe=function(e,t){return void 0===t&&(t="px"),e?Ge(e)?"".concat(parseFloat(String(e).toString())).concat(t):e:void 0};function Qe(e){return"String"===Object.prototype.toString.call(e).slice(8,-1)}function et(e){var t=!1;return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&(t=!0),t}function tt(e){void 0===e&&(e={});var t={type:"object",properties:{}};return Object.keys(e).forEach((function(a){var n=e[a],r=typeof n;~["string","number"].indexOf(r)?t.properties[a]={type:r,title:a}:t.properties[a]="object"===r&&n?{type:"object",title:a}:{type:"",title:a}})),t}function at(){return"u:"+ae()}function nt(t){return t.pluginIcon&&e.hasIcon(t.pluginIcon)}function rt(e){return!(!e||"flex"!==e.type)}function ot(e,t){if("auto"===e)return"auto";var a=parseInt(e),n=t;z.default(t)||(n=parseInt(t));var r=e.substring(a.toString().length);return r||(r="px"),"".concat(a+n).concat(r)}function it(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"")}function st(e){return["divider","crud2","crud","list","picker","table","table-view","grid","cards","card","form","progress","diff-editor","editor","input-range","flex"].indexOf(e)>-1}function dt(){var e,t;return null!==(t=null===(e=null===window||void 0===window?void 0:window.editorStore)||void 0===e?void 0:e.i18nEnabled)&&void 0!==t&&t}function lt(t,a){var n;return a=a||(null===(n=null===window||void 0===window?void 0:window.editorStore)||void 0===n?void 0:n.appCorpusData),L.default(a)?e.mapObject(t,(function(e){return a[e]||e})):t}function ct(e){var t,a;return Qe(e)&&(null===(a=null===(t=null===window||void 0===window?void 0:window.editorStore)||void 0===t?void 0:t.appCorpusData)||void 0===a?void 0:a[e])||e}function ut(e){var t,a,n,r,o=!1;return!!e&&("page"===e.rendererName&&("aside"===e.name||"body"===e.name)||(!!(null===(a=null===(t=e.node)||void 0===t?void 0:t.schema)||void 0===a?void 0:a.isFreeContainer)||(((null===(n=e.$$editor)||void 0===n?void 0:n.needFillPlaceholder)||(null===(r=e.regionConfig)||void 0===r?void 0:r.needFillPlaceholder))&&(o=!0),o)))}var pt=Object.freeze({__proto__:null,guid:ae,isObjectShallowModified:re,anyChanged:ie,noop:se,makeHorizontalDeeper:de,omitControls:ne,isEmpty:ce,cloneObject:oe,eachTree:ue,createObject:pe,__uri:fe,cleanUndefined:he,JSONPipeIn:me,JSONPipeOut:ge,addStyleClassName:ve,JSONGetByPath:be,JSONGetPathById:ye,JSONGetById:_e,JSONGetParentById:Ee,JSONUpdate:we,JSONDelete:Se,JSONMerge:Ce,JSONChangeInArray:xe,JSONCanMoveUp:Ie,JSONMoveUpById:Re,JSONCanMoveDown:Oe,JSONMoveDownById:Ne,JSONDuplicate:ke,reGenerateID:Ae,JsonGenerateID:Me,createElementFromHTML:De,deepFind:Fe,filterSchemaForConfig:Pe,filterSchemaForEditor:Be,blackList:Te,sortByList:je,persistGet:Le,persistSet:ze,normalizeId:He,autobind:$e,addDragingClass:Ke,removeDragingClass:Ve,camelize:Ue,reactionWithOldValue:We,repeatArray:qe,diff:Ze,patchDiff:Je,JSONTraverse:Ye,isNumeric:Ge,string2CSSUnit:Xe,isString:Qe,isObject:et,jsonToJsonSchema:tt,generateNodeId:at,isHasPluginIcon:nt,isLayoutPlugin:rt,unitFormula:ot,stringRegExp:it,needDefaultWidth:st,getI18nEnabled:dt,translateSchema:lt,appTranslate:ct,needFillPlaceholder:ut}),ft=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainRef=F.default.createRef(),e}return a.__extends(n,t),n.prototype.handleWResizerMouseDown=function(e){return this.startResize(e,"horizontal")},n.prototype.handleHResizerMouseDown=function(e){return this.startResize(e,"vertical")},n.prototype.handleResizerMouseDown=function(e){return this.startResize(e,"both")},n.prototype.startResize=function(e,t){var a,n,r,o=this;if(void 0===t&&(t="horizontal"),(1===e.button&&null!==window.event||0===e.button)&&!e.defaultPrevented){e.preventDefault();var i=this.props,s=i.manager,d=i.id,l=i.node,c=i.store;if(l){var u=document.querySelector('[data-editor-id="'.concat(d,'"]'));if(u){s.disableHover=!0;var p=s["both"===t?"onSizeChangeStart":"vertical"===t?"onHeightChangeStart":"onWidthChangeStart"](e,{dom:u,node:l,store:c,resizer:"both"===t?this.resizerDom:"vertical"===t?this.hResizerDom:this.wResizerDom}),f=null===(a=p.data)||void 0===a?void 0:a.onMove,h=null===(n=p.data)||void 0===n?void 0:n.onEnd;if(f||h){null===(r=this.mainRef.current)||void 0===r||r.setAttribute("data-resizing","");var m=function(e){e.preventDefault(),null==f||f(e)},g=function(e){var t;e.preventDefault(),s.disableHover=!1,null===(t=o.mainRef.current)||void 0===t||t.removeAttribute("data-resizing"),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g),document.body.style.cursor="default";var a=function(e){window.removeEventListener("click",a,!0),e.preventDefault(),e.stopPropagation()};window.addEventListener("click",a,!0),setTimeout((function(){return window.removeEventListener("click",a,!0)}),350),null==h||h(e)};window.addEventListener("mousemove",m),window.addEventListener("mouseup",g),document.body.style.cursor="both"===t?"nwse-resize":"vertical"===t?"ns-resize":"ew-resize"}}}}},n.prototype.wResizerRef=function(e){var t;e?e.addEventListener("mousedown",this.handleWResizerMouseDown):null===(t=this.wResizerDom)||void 0===t||t.addEventListener("mousedown",this.handleWResizerMouseDown),this.wResizerDom=e},n.prototype.hResizerRef=function(e){var t;e?e.addEventListener("mousedown",this.handleHResizerMouseDown):null===(t=this.hResizerDom)||void 0===t||t.addEventListener("mousedown",this.handleHResizerMouseDown),this.hResizerDom=e},n.prototype.resizerRef=function(e){var t;e?e.addEventListener("mousedown",this.handleResizerMouseDown):null===(t=this.resizerDom)||void 0===t||t.addEventListener("mousedown",this.handleResizerMouseDown),this.resizerDom=e},n.prototype.handleMouseEnter=function(){this.props.manager.disableHover||this.props.store.setHoverId(this.props.id)},n.prototype.handleDragStart=function(e){var t=this.props,a=t.manager,n=t.id;a.disableHover||a.startDrag(n,e)},n.prototype.render=function(){var t=this.props,a=t.className,n=t.store,r=t.id,o=t.title,i=t.children,s=t.node;t.toolbarContainer;var d=t.onSwitch,l=n.sortedToolbars,c=n.sortedSecondaryToolbars,u=n.sortedSpecialToolbars,p=n.isActive(r),f=n.parentIsFreeContainer(),h=n.isHoved(r)||n.dropId===r||n.insertOrigId===r||f===r,m=n.draggableContainer(r),g=document.getElementById("aePreviewHighlightBox").offsetWidth-s.x<176;return F.default.createElement("div",{className:B.default("ae-Editor-hlbox",{shake:r===n.insertOrigId,selected:p||~n.selections.indexOf(r),hover:h,regionOn:s.childRegions.some((function(e){return n.isRegionHighlighted(e.id,e.region)})),isFreeContainerElem:!!f||m},a),"data-hlbox-id":r,style:{display:s.w&&s.h?"block":"none",top:s.y,left:s.x,width:s.w,height:s.h},ref:this.mainRef,onMouseEnter:this.handleMouseEnter,draggable:!!f||m,onDragStart:this.handleDragStart},p?F.default.createElement("div",{className:"ae-Editor-toolbarPopover ".concat(g?"is-right-elem":"")},F.default.createElement("div",{className:"ae-Editor-nav"},s.host?F.default.createElement("div",{className:"ae-Editor-tip parent",onClick:function(){return null==d?void 0:d(s.host.id)}},s.host.label):null,F.default.createElement("div",{key:"tip",className:"ae-Editor-tip current"},o),s.firstChild?F.default.createElement("div",{className:"ae-Editor-tip child",onClick:function(){return null==d?void 0:d(s.firstChild.id)}},s.firstChild.label):null),F.default.createElement("div",{className:"ae-Editor-toolbar",key:"toolbar"},l.map((function(t){return F.default.createElement("button",{key:t.id,type:"button",draggable:t.draggable,onDragStart:t.onDragStart,"data-id":t.id,"data-tooltip":t.tooltip||void 0,"data-position":t.placement||"top",onClick:t.onClick},t.iconSvg?F.default.createElement(e.Icon,{className:"icon",icon:t.iconSvg}):~t.icon.indexOf("<")?F.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon}}):F.default.createElement("i",{className:t.icon}))})))):null,p&&c.length?F.default.createElement("div",{className:"ae-Editor-toolbar sencondary",key:"sencondary-toolbar"},c.map((function(t){return F.default.createElement("button",{key:t.id,type:"button",className:t.className,"data-id":t.id,"data-tooltip":t.tooltip||void 0,"data-position":t.placement||"top",onClick:t.onClick},t.iconSvg?F.default.createElement(e.Icon,{className:"icon",icon:t.iconSvg}):~t.icon.indexOf("<")?F.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon}}):F.default.createElement("i",{className:t.icon}))}))):null,p&&u.length?F.default.createElement("div",{className:"ae-Editor-toolbar special",key:"special-toolbar"},u.map((function(t){return F.default.createElement("button",{key:t.id,type:"button",className:t.className,"data-id":t.id,"data-tooltip":t.tooltip||void 0,"data-position":t.placement||"top",onClick:t.onClick},t.iconSvg?F.default.createElement(e.Icon,{className:"icon",icon:t.iconSvg}):~t.icon.indexOf("<")?F.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.icon}}):F.default.createElement("i",{className:t.icon}))}))):null,i,s.widthMutable?F.default.createElement(F.default.Fragment,null,F.default.createElement("span",{className:"ae-border-WResizer",ref:this.wResizerRef}),F.default.createElement("span",{className:"ae-WResizer",ref:this.wResizerRef})):null,s.heightMutable?F.default.createElement(F.default.Fragment,null,F.default.createElement("span",{className:"ae-border-HResizer",ref:this.hResizerRef}),F.default.createElement("span",{className:"ae-HResizer",ref:this.hResizerRef})):null,s.widthMutable&&s.heightMutable?F.default.createElement("span",{className:"ae-Resizer",ref:this.resizerRef}):null)},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],n.prototype,"handleWResizerMouseDown",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],n.prototype,"handleHResizerMouseDown",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],n.prototype,"handleResizerMouseDown",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"wResizerRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"hResizerRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"resizerRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"handleMouseEnter",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleDragStart",null),n=a.__decorate([u.observer],n)}(F.default.Component),ht=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return a.__extends(r,n),r.prototype.handleClick=function(){var e=this.props,t=e.manager,a=e.id,n=e.name;t.emptyRegion(a,n)},r.prototype.render=function(){var a=this.props,n=a.store,r=a.id,o=a.name,i=a.title,s=a.node,d=a.isOnlyChildRegion,l=n.isRegionHighlighted(r,o),c=n.isRegionHighlightHover(r,o),u=n.isRegionDragEnter(r,o),p=n.getNodeById(r),f=s.x-p.x,h=s.y-p.y;return F.default.createElement("div",{"data-renderer":s.host.info.renderer.name,"data-region":o,className:B.default("ae-Editor-rhlbox",u?"is-dragenter":"",!d&&c?"region-hover":"",l?"is-highlight":"",f<87&&h<21&&s.x<190?"region-label-within":""),style:{width:s.w,height:s.h,borderWidth:"".concat(Math.max(0,h),"px ").concat(Math.max(0,p.w-f-s.w),"px ").concat(Math.max(0,p.h-h-s.h),"px ").concat(Math.max(0,f),"px")}},F.default.createElement("div",{"data-node-id":r,"data-node-region":o,className:"region-tip ".concat(d?"is-only-child-region":""," ignore-hover-elem")},i,F.default.createElement("span",{className:"margin-space"},"|"),F.default.createElement("button",{type:"button",className:"clear-icon-btn","data-tooltip":t.i18n("bb28ec819520ced0ffb4c3da01f112e2"),"data-position":"bottom",onClick:this.handleClick},F.default.createElement(e.Icon,{icon:"clear-btn"}))))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),r=a.__decorate([u.observer],r)}(F.default.Component),mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.render=function(){return F.default.createElement("div",{className:"ae-ErrorRenderer"},"类型错误，无法渲染")},t}(F.default.Component);function gt(e,t){var a={context:t,type:e,prevented:!1,stoped:!1,preventDefault:function(){a.prevented=!0},stopPropagation:function(){a.stoped=!0},get data(){return a.context.data},setData:function(e){a.context.data=e}};return a}var vt=function(){function e(e){this.manager=e}return e.prototype.getRendererInfo=function(e){var a=e.renderer,n=e.schema,r=this;if(n.$$id&&r.name&&r.rendererName&&r.rendererName===a.name){var o=r.name;return(null==n?void 0:n.isFreeContainer)?o=t.i18n("db805d4e361ac2d3fc6047eaea1a7c69"):(null==n?void 0:n.isSorptionContainer)&&(o=t.i18n("969e9e56b3812abffa3994f35ea31835")),{name:o,regions:r.regions,patchContainers:r.patchContainers,vRendererConfig:r.vRendererConfig,wrapperProps:r.wrapperProps,wrapperResolve:r.wrapperResolve,filterProps:r.filterProps,$schema:r.$schema,renderRenderer:r.renderRenderer,multifactor:r.multifactor,scaffoldForm:r.scaffoldForm,disabledRendererPlugin:r.disabledRendererPlugin,isBaseComponent:r.isBaseComponent,rendererName:r.rendererName}}},e.prototype.buildEditorPanel=function(e,n){var r,o,i,s,d=this,l=this.manager.store;if(l.activeId&&!e.selections.length){if(!e.info.hostId&&(d.panelControls||d.panelControlsCreator||d.panelBody||d.panelBodyCreator)&&e.info.plugin===this){var c=d.panelBodyCreator?d.panelBodyCreator(e):d.panelBody;this.manager.trigger("after-build-panel-body",{context:e,data:c,plugin:d}),n.push({key:"config",icon:d.panelIcon||d.icon||"fa fa-cog",pluginIcon:d.pluginIcon,title:d.panelTitle||t.i18n("e366ccf1556c0672dcecba135ed5472e"),render:this.manager.makeSchemaFormRender({definitions:d.panelDefinitions,submitOnChange:d.panelSubmitOnChange,api:d.panelApi,body:c,controls:d.panelControlsCreator?d.panelControlsCreator(e):d.panelControls,justify:d.panelJustify,panelById:l.activeId})})}else e.info.plugin===this&&e.info.hostId&&((null===(r=d.vRendererConfig)||void 0===r?void 0:r.panelControls)||(null===(o=d.vRendererConfig)||void 0===o?void 0:o.panelControlsCreator)||(null===(i=d.vRendererConfig)||void 0===i?void 0:i.panelBody)||(null===(s=d.vRendererConfig)||void 0===s?void 0:s.panelBodyCreator))&&n.push({key:e.info.multifactor?"vconfig":"config",icon:d.vRendererConfig.panelIcon||"fa fa-cog",title:d.vRendererConfig.panelTitle||t.i18n("e366ccf1556c0672dcecba135ed5472e"),render:this.manager.makeSchemaFormRender({submitOnChange:d.panelSubmitOnChange,api:d.panelApi,definitions:d.vRendererConfig.panelDefinitions,controls:d.vRendererConfig.panelControlsCreator?d.vRendererConfig.panelControlsCreator(e):d.vRendererConfig.panelControls,body:d.vRendererConfig.panelBodyCreator?d.vRendererConfig.panelBodyCreator(e):d.vRendererConfig.panelBody,justify:d.vRendererConfig.panelJustify,panelById:l.activeId})});if(e.info.plugin===this&&e.info.multifactor){var u=e.node.sameIdChild;if(u)this.manager.collectPanels(u,!1,!0).forEach((function(e){var t,r;"config"!==e.key&&"vconfig"!==e.key||n.push(a.__assign(a.__assign({},e),{key:"sub-".concat(e.key),icon:(null===(r=null===(t=u.info)||void 0===t?void 0:t.plugin)||void 0===r?void 0:r.icon)||e.icon}))}))}}},e.prototype.buildSubRenderers=function(e,t,a){var n=this;return Array.isArray(n.scaffolds)?n.scaffolds.map((function(e){var t,a,r,o,i,s,d,l;return{name:null!==(t=e.name)&&void 0!==t?t:n.name,icon:null!==(a=e.icon)&&void 0!==a?a:n.icon,pluginIcon:n.pluginIcon,description:null!==(r=e.description)&&void 0!==r?r:n.description,previewSchema:null!==(o=e.previewSchema)&&void 0!==o?o:n.previewSchema,tags:null!==(i=e.tags)&&void 0!==i?i:n.tags,docLink:null!==(s=e.docLink)&&void 0!==s?s:n.docLink,type:null!==(d=e.type)&&void 0!==d?d:n.type,scaffold:null!==(l=e.scaffold)&&void 0!==l?l:n.scaffold,scaffoldForm:n.scaffoldForm,disabledRendererPlugin:n.disabledRendererPlugin,isBaseComponent:n.isBaseComponent,rendererName:n.rendererName}})):n.name&&n.description?{searchKeywords:n.searchKeywords,name:n.name,icon:n.icon,description:n.description,previewSchema:n.previewSchema,tags:n.tags,docLink:n.docLink,type:n.type,scaffold:n.scaffold,scaffoldForm:n.scaffoldForm,disabledRendererPlugin:n.disabledRendererPlugin,isBaseComponent:n.isBaseComponent,pluginIcon:n.pluginIcon,rendererName:n.rendererName}:void 0},e.prototype.renderPlaceholder=function(e,t,a){return F.default.createElement("div",{key:t,className:"wrapper-sm b-a b-light m-b-sm",style:a,children:F.default.createElement("span",{className:"text-muted",children:e})})},e.prototype.getPlugin=function(e){return H.default(this.manager.plugins,(function(t){return"string"==typeof e?t.rendererName===e:t instanceof e}))},e.scene=["global"],e}(),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.onActive=function(e){var t,a=e.context;if((null===(t=a.info)||void 0===t?void 0:t.plugin)===this&&a.node){var n=a.node,r=n.schema||{};r.isFixedWidth&&n.setWidthMutable(!0),r.isFixedHeight&&n.setHeightMutable(!0)}},t.prototype.onWidthChangeStart=function(e){return this.onSizeChangeStart(e,"horizontal")},t.prototype.onHeightChangeStart=function(e){return this.onSizeChangeStart(e,"vertical")},t.prototype.onSizeChangeStart=function(e,t){var a;void 0===t&&(t="both");var n=e.context,r=n.node,o=n.store;if((null===(a=r.info)||void 0===a?void 0:a.plugin)===this){var i=n.resizer,s=n.dom,d=o.getDoc()||document,l=s.parentElement.getBoundingClientRect(),c=s.getBoundingClientRect(),u=n.nativeEvent.pageX,p=n.nativeEvent.pageY;e.setData({onMove:function(e){var a=e.pageY-p,n=e.pageX-u,o=Math.max(50,c.height+a),s=Math.max(100,Math.min(c.width+n,l.width)),f={width:s,height:o},h=d.querySelector("[data-hlbox-id='".concat(r.id,"']")),m=d.querySelector("[data-editor-id='".concat(r.id,"']"));"both"===t?(i.setAttribute("data-value","".concat(s,"px x ").concat(o,"px")),h.style.height="".concat(o,"px"),h.style.width="".concat(s,"px"),m.style.height="".concat(o,"px"),m.style.width="".concat(s,"px")):"vertical"===t?(i.setAttribute("data-value","".concat(o,"px")),h.style.height="".concat(o,"px"),m.style.height="".concat(o,"px"),delete f.width):(i.setAttribute("data-value","".concat(s,"px")),h.style.width="".concat(s,"px"),m.style.width="".concat(s,"px"),delete f.height),r.updateState(f),requestAnimationFrame((function(){r.calculateHighlightBox()}))},onEnd:function(e){var a=e.pageY-p,n=e.pageX-u,o=Math.max(50,c.height+a),s={width:Math.max(100,Math.min(c.width+n,l.width)),height:o};"vertical"===t?delete s.width:"horizontal"===t&&delete s.height,i.removeAttribute("data-value"),r.updateSchemaStyle(s),requestAnimationFrame((function(){r.calculateHighlightBox()}))}})}},t}(vt),yt=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(n,e),n.prototype.componentDidMount=function(){this.markDom(this.props.$$editor.id),this.props.$$node&&requestAnimationFrame((function(){}))},n.prototype.componentDidUpdate=function(e){this.markDom(this.props.$$editor.id)},n.prototype.getWrappedInstance=function(){return this.ref},n.prototype.refFn=function(e){this.ref=e},n.prototype.markDom=function(e){var a,n,r=this,o=p.findDOMNode(this);if(o&&e){var i=this.props.$$editor,s=!1!==this.props.$$visible&&!0!==this.props.$$hidden,d=i.wrapperResolve?i.wrapperResolve(o):o;(Array.isArray(d)?d:d?[d]:[]).forEach((function(a){a.setAttribute("data-editor-id",e),a.setAttribute("name",r.props.id),a.setAttribute("data-visible",s?"":"false"),a.setAttribute("data-hide-text",s?"":t.i18n("392342f7750a565f9a79c678c6b12421"))})),null===(n=null===(a=i.plugin)||void 0===a?void 0:a.markDom)||void 0===n||n.call(a,d,this.props)}},n.prototype.render=function(){var e=this.props,t=e.$$editor,n=e.$$node,r=e.store,o=a.__rest(e,["$$editor","$$node","store"]),i=t.renderer;return t.filterProps&&(o=t.filterProps.call(t.plugin,o,n)),t.renderRenderer?t.renderRenderer.call(t.plugin,a.__assign(a.__assign(a.__assign(a.__assign(a.__assign(a.__assign({},o),{store:r}),null==n?void 0:n.state),{$$editor:t}),t.wrapperProps),{ref:this.refFn}),t):F.default.createElement(i.component,a.__assign({},o,{store:r},null==n?void 0:n.state,{$$editor:t},t.wrapperProps,{ref:this.refFn}))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"refFn",null),n=a.__decorate([u.observer],n)}(F.default.Component),_t=f.types.model("EditorNode",{parentId:"",parentRegion:"",isCommonConfig:!1,id:"",type:"",label:"",regionInfo:f.types.maybe(f.types.frozen()),path:"",schemaPath:"",region:"",preferTag:"",state:f.types.optional(f.types.frozen(),{}),widthMutable:!1,heightMutable:!1,memberIndex:-1,folded:!1,patched:!1,x:0,y:0,w:0,h:0,children:f.types.optional(f.types.array(f.types.late((function(){return _t}))),[])}).volatile((function(){return{getData:f.types.frozen()}})).views((function(e){var t,n;return{get info(){return t},setInfo:function(e){t=e},get rendererConfig(){return n},setRendererConfig:function(e){n=e},get isVitualRenderer(){return!!~e.memberIndex},get clickable(){var e,t;return!1!==(null===(e=this.info)||void 0===e?void 0:e.editable)||!(null===(t=this.info)||void 0===t?void 0:t.hostId)},get draggable(){var e;return!(!this.moveable||!1===(null===(e=this.info)||void 0===e?void 0:e.draggable))},get moveable(){var e,t;return!(this.isRegion||!1===(null===(e=this.info)||void 0===e?void 0:e.movable)||!Array.isArray(this.schemaParent)||(null===(t=this.host)||void 0===t?void 0:t.memberImmutable(this.parent.region)))},get canMoveUp(){return!(this.isRegion||!this.moveable||!Array.isArray(this.schemaParent)||!this.prevSibling)},get canMoveDown(){return!(this.isRegion||!this.moveable||!Array.isArray(this.schemaParent)||!this.nextSibling)},get removable(){var e;return!(this.isRegion||!1===(null===(e=this.info)||void 0===e?void 0:e.removable)||!Array.isArray(this.schemaParent)||!this.host||this.host.memberImmutable(this.parent.region))},get duplicatable(){var e;return!(this.isRegion||!1===(null===(e=this.info)||void 0===e?void 0:e.duplicatable)||!Array.isArray(this.schemaParent)||this.host.memberImmutable(this.parent.region))},get replaceable(){var e;return!this.isRegion&&!1!==(null===(e=this.info)||void 0===e?void 0:e.replaceable)},memberImmutable:function(e){var t,a;return!!(!0===(null===(t=this.info)||void 0===t?void 0:t.memberImmutable)||Array.isArray(null===(a=this.info)||void 0===a?void 0:a.memberImmutable)&&~this.info.memberImmutable.indexOf(e))},get isRegion(){return!!e.region},get childRegions(){var e,t,a=this.uniqueChildren.filter((function(e,t,a){return e.isRegion}));if(null===(e=this.info)||void 0===e?void 0:e.multifactor){var n=this.sameIdChild;null===(t=null==n?void 0:n.childRegions)||void 0===t||t.forEach((function(e){return a.push(e)}))}return a},get uniqueChildren(){var t=e.children.filter((function(e,t,a){return a.findIndex((function(t){return e.isRegion?t.id===e.id&&t.region===e.region:t.id===e.id}))===t}));if(Array.isArray(this.schema)){var a=this.schema;t=t.sort((function(e,t){return V.default(a,(function(t){return(null==t?void 0:t.$$id)===e.id}))-V.default(a,(function(e){return(null==e?void 0:e.$$id)===t.id}))}))}return t},get sameIdChild(){var t;return null===(t=this.uniqueChildren)||void 0===t?void 0:t.find((function(t){return!t.isRegion&&t.id===e.id}))},get singleRegion(){return!(1!==this.uniqueChildren.length||!this.uniqueChildren[0].isRegion)},isExists:function(t){return e.children.some((function(e){return e.id===t}))},getChildById:function(t){return e.children.find((function(e){return e.id===t}))},get parent(){try{var t=f.getParent(e,2);return"root"!==(null==t?void 0:t.id)?t:null}catch(e){return null}},get ancestorField(){var t,n,r,o,i=f.getParent(e,4);if("root"===(null==i?void 0:i.id))return null;var s=null!==(n=null===(t=null==i?void 0:i.getComponent())||void 0===t?void 0:t.props)&&void 0!==n?n:{},d=null!==(r=null==s?void 0:s.body)&&void 0!==r?r:[],l=Object.keys(null!==(o=null==s?void 0:s.data)&&void 0!==o?o:{});return K.default(a.__spreadArray(a.__spreadArray([],a.__read(d.map((function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""}))),!1),a.__read(l),!1))},get host(){var t=e.parent;return(null==t?void 0:t.isRegion)&&(t=t.parent),t},get firstChild(){var t=e;if(!t.children.length)return null;for(var a=t.children[0];a;){if(!a.isRegion&&a.id!==t.id)return a;a=a.children.length?a.children[0]:null}return null},get index(){return this.parent.uniqueChildren.indexOf(e)},get prevSibling(){for(var t=this.parent.uniqueChildren,a=t.indexOf(e)-1;a>=0&&t[a];){if(t[a].id!==e.id)return t[a];a--}return null},get nextSibling(){for(var t=this.parent.uniqueChildren,a=t.length,n=t.indexOf(e)+1;n<a&&t[n];){if(t[n].id!==e.id)return t[n];n++}return null},get schema(){if(!f.isAlive(e))return null;var t=f.getRoot(e).getSchema(e.id);return this.isRegion&&t?t[e.region]:t},get schemaParent(){var t=f.getRoot(e);return this.isRegion?t.getSchema(e.id):t.getSchemaParentById(e.id)},get isSecondFactor(){var t;return(null===(t=this.parent)||void 0===t?void 0:t.id)===e.id}}})).actions((function(t){function n(e,t){var r=!1,o={};if(e)return t.forEach((function(t){var a=t.split(".");t=a.shift();var i=e[t];if("string"==typeof i)return r=!0,void(o[t]=[me({type:"tpl",tpl:i,wrapperComponent:"",inline:!1})]);if(Array.isArray(i)){var s=!1,d=i.map((function(e){if("string"==typeof e&&e)return s=!0,me({type:"tpl",tpl:e,wrapperComponent:"",inline:!1});if(a.length){var t=n(e,[a.join(".")]);t!==e&&(s=!0,e=t)}return e}));s&&(r=!0,o[t]=d)}else i&&(o[t]=[me(i)],r=!0)})),r&&(e=a.__assign(a.__assign({},e),o)),e}function r(e){var a=Array.isArray(e)?e:e?[e]:[];if(a.length){var n=f.getRoot(t).getIframe(),r=f.getRoot(t).getLayer().getBoundingClientRect(),o=function(e){for(var t=e.concat(),a=t.shift(),n=a.getBoundingClientRect(),r={left:n.left,top:n.top,width:n.width,height:n.height,right:n.right,bottom:n.bottom},o=a.parentElement.closest(".ae-Preview-inner,[data-region]");t.length;){var i=t.shift(),s=i.getBoundingClientRect(),d=i.parentElement.closest(".ae-Preview-inner,[data-region],[data-editor-id]");if(!o&&d)o=d;else if(d&&o&&d!==o)continue;r.left=Math.min(r.left,s.left),r.top=Math.min(r.top,s.top),r.right=Math.max(r.right,s.right),r.bottom=Math.max(r.bottom,s.bottom),r.width=r.right-r.left,r.height=r.bottom-r.top}return r}(a),i={left:o.left-r.left,top:o.top-r.top};if(n){var s=n.getBoundingClientRect();i.left+=s.left,i.top+=s.top}var d=o.height;d&&(t.x=i.left+0,t.y=i.top+0,t.w=o.width,t.h=d)}}var o;return{getClosestParentByType:function(e){for(var a=t;a===a.parent;){if(a.schema.type===e)return a;if("root"===a.id)return}},updateIsCommonConfig:function(e){t.isCommonConfig=!!e},addChild:function(e){t.children.push(a.__assign(a.__assign({},e),{parentId:t.id,parentRegion:t.region}));var n=t.children[t.children.length-1];return n.setInfo(e.info),n},removeChild:function(e){var a=t.children.findIndex((function(t){return t===e}));t.children.splice(a,1)},toggleFold:function(e){e.stopPropagation(),e.preventDefault(),t.folded=!t.folded},patch:function(r,o){if(void 0===o&&(o=!1),!t.patched||o){t.patched=!0;var i=r,s=t.info;if(!1!==s.editable){var d=i.getSchema(s.id),l=d;(null==l?void 0:l.id)||(l=a.__assign(a.__assign({},l),{id:"u:"+ae()})),(Array.isArray(s.regions)&&s.regions.length||Array.isArray(s.patchContainers))&&(l=n(l,s.patchContainers||s.regions.map((function(e){return e.key})))),(l=me(l=e.filterSchema(l,{component:s.renderer.component})))!==d&&i.changeValueById(s.id,l,void 0,!0,!0)}}},updateSchema:function(e){var n=t.info;if(!1!==n.editable){var r=f.getRoot(t),o=r.getSchema(n.id);o=a.__assign(a.__assign({},o),e),r.changeValueById(n.id,o)}},updateSchemaStyle:function(e){var n=t.info;if(!1!==n.editable){var r=f.getRoot(t),o=r.getSchema(n.id);o=a.__assign(a.__assign({},o),{style:a.__assign(a.__assign({},o.style),e)}),r.changeValueById(n.id,o)}},setComponent:function(e){o=e},getComponent:function(){return o},calculateHighlightBox:function(e){var a;if(void 0===e&&(e=f.getRoot(t)),e.calculateStarted){var n=f.getRoot(t).getDoc();if(t.isRegion){r(o=n.querySelector('[data-region="'.concat(t.region,'"][data-region-host="').concat(t.id,'"]')))}else{var o=[].slice.call(n.querySelectorAll('[data-editor-id="'.concat(t.id,'"]')));r("button"===(null===(a=t.info)||void 0===a?void 0:a.renderer.name)?null==o?void 0:o[0]:o),t.childRegions.forEach((function(t){return t.calculateHighlightBox(e)}))}}},resetHighlightBox:function(e){t.x=0,t.y=0,t.w=0,t.h=0,t.childRegions.forEach((function(t){return t.resetHighlightBox(e)}))},updateState:function(e,n){void 0===n&&(n=!1),t.state=a.__assign(a.__assign({},n?null:t.state),e)},setWidthMutable:function(e){t.widthMutable=!!e},setHeightMutable:function(e){t.heightMutable=!!e}}})),Et=F.default.createContext(null),wt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.UNSAFE_componentWillMount=function(){this.parentNode=this.context;var e=this.props,t=e.$$editor,a=e.manager;if(!this.parentNode&&t&&t.id){var n=a.store.getNodeById(t.id);n&&(this.parentNode=n)}this.parentNode&&(this.editorNode=this.parentNode.addChild({id:this.parentNode.id,type:this.parentNode.type,label:this.props.label,path:"".concat(this.parentNode.path,"/").concat(this.props.name),region:this.props.name,regionInfo:this.props.regionConfig,preferTag:this.props.preferTag}))},t.prototype.componentDidMount=function(){this.editorNode&&this.markDom(this.editorNode.id,this.props.name,this.props.rendererName)},t.prototype.componentDidUpdate=function(e){this.editorNode&&this.markDom(this.editorNode.id,this.props.name,this.props.rendererName)},t.prototype.componentWillUnmount=function(){this.editorNode&&f.isAlive(this.editorNode)&&this.parentNode&&this.parentNode.removeChild(this.editorNode)},t.prototype.markDom=function(e,t,a){var n=p.findDOMNode(this);if(n){var r=this.props.wrapperResolve,o=r?r(n):n.parentElement;o.setAttribute("data-region",t),o.setAttribute("data-region-host",e),a&&o.setAttribute("data-renderer",a)}},t.prototype.render=function(){var e="wrapper"===this.props.rendererName||"container"===this.props.rendererName,t=!1;return ut(this.props)&&(t=!0),F.default.createElement(Et.Provider,{value:this.editorNode},this.props.children,F.default.createElement("span",{className:"ae-Region-placeholder ".concat(e?"layout-content":""," ").concat(t?"fill-placeholder":"")},this.props.placeholder||this.props.label))},t.contextType=Et,t}(F.default.Component),St=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}var o;return a.__extends(r,n),r.prototype.getWrappedInstance=function(){return this.ref},r.prototype.refFn=function(e){this.ref=e},r.prototype.renderChild=function(e,t,a){var n=this.props,r=n.render,o=n.$$editor,i=n.$$node,s=r(e,t,a);if(null==i?void 0:i.memberImmutable(e))return s;var d=H.default(o.regions,(function(t){return t.key===e&&!t.matchRegion&&!t.renderMethod}));if(d){var l=d.wrapper||wt;return F.default.createElement(l,{key:null==a?void 0:a.key,preferTag:d.preferTag,name:d.key,label:d.label,placeholder:d.placeholder,regionConfig:d,editorStore:o.plugin.manager.store,wrapperResolve:d.wrapperResolve,manager:o.plugin.manager,children:s,rendererName:o.renderer.name,$$editor:o,node:i})}return s},r.prototype.render=function(){var e=this.props,n=e.$$editor,r=e.$$node,o=a.__rest(e,["$$editor","$$node"]),i={},s=n.plugin.manager.store;return n.id&&(s.isActive(n.id)||s.dropId===n.id)&&Array.isArray(n.regions)&&n.regions.forEach((function(e){var a=e.key;if(!e.optional&&!(null==r?void 0:r.memberImmutable(a))){var n=[];"actions"!==a||void 0!==o.submitText&&!o.submitText||(n=[{type:"submit",label:o.submitText||t.i18n("939d5345ad4345dbaabe14798f6ac0f1"),primary:!0}]);var s=Array.isArray(o[a])?o[a].concat():o[a]?[o[a]]:n;s.length||s.push({children:function(){return null}}),i[a]=s}})),F.default.createElement(yt,a.__assign({},o,i,{$$editor:n,$$node:r,render:this.renderChild,ref:this.refFn}))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"refFn",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,"function"==typeof(o=void 0!==e.Schema&&e.Schema)?o:Object,Object]),a.__metadata("design:returntype",void 0)],r.prototype,"renderChild",null),r=a.__decorate([u.observer],r)}(F.default.Component),Ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){var e=p.findDOMNode(this);if(e){var t=this.props.$$editor,a=t.wrapperResolve?t.wrapperResolve(e):e;(Array.isArray(a)?a:a?[a]:[]).forEach((function(e){e.classList.remove("ae-Editor-common-config")}))}},t.prototype.markDom=function(e){var t=p.findDOMNode(this);if(t&&e){var a=this.props.$$editor,n=a.wrapperResolve?a.wrapperResolve(t):t;this.props.$$commonSchema&&(Array.isArray(n)?n:n?[n]:[]).forEach((function(t){t.setAttribute("data-editor-id",e),t.classList.add("ae-Editor-common-config")}))}},t.prototype.render=function(){var e=this.props,t=e.$$editor,n=e.$$node,r=e.$schema,o=e.store,i=a.__rest(e,["$$editor","$$node","$schema","store"]),s=t.renderer;return i=ge(i),t.filterProps&&(i=t.filterProps.call(t.plugin,i,n)),t.renderRenderer?t.renderRenderer.call(t.plugin,a.__assign(a.__assign(a.__assign(a.__assign({},i),{store:o,$schema:r,$$editor:t}),t.wrapperProps),{ref:this.refFn}),t):F.default.createElement(s.component,a.__assign({},i,{store:o,$schema:r,$$editor:t},t.wrapperProps,{ref:this.refFn}))},t}(yt);function xt(n){var r,o=this,i=n.propKey,s=n.body,d=n.definitions,l=n.controls,u=n.onChange,p=n.value,f=n.env,h=n.api,m=n.popOverContainer,g=n.submitOnChange,v=n.node,b=n.manager,_=n.justify,E=n.ctx,w=n.pipeIn,S=n.pipeOut,C="body";Array.isArray(l)&&(s=l,C="controls"),s=Array.isArray(s)?s.concat():[],!1===g&&s.push({type:"submit",label:t.i18n("be5fbbe34ce9979bfb6576d9eddc5612"),level:"primary",block:!0,className:"ae-Settings-actions"});var x=((r={key:i,definitions:d})[C]=s,r.className=B.default("config-form-content","ae-Settings-content","hoverShowScrollBar",!1===g?"with-actions":""),r.wrapperComponent="div",r.type="form",r.title="",r.mode="normal",r.api=h,r.wrapWithPanel=!1,r.submitOnChange=!1!==g,r.messages={validateFailed:""},r);_&&(x.mode="horizontal",x.horizontal={left:4,right:8,justify:!0});var I=w?w(p):p;return e.render(x,{onFinished:function(e){return a.__awaiter(o,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(a){switch(a.label){case 0:return S?[4,S(e)]:[3,2];case 1:return t=a.sent(),[3,3];case 2:t=e,a.label=3;case 3:return n=Ze(p,e=t),u(e,n),[2]}}))}))},data:E?c.createObject(E,I):I,node:v,manager:b,popOverContainer:m},a.__assign({},y.omit(f,"replaceText")))}function It(e,t,n){for(var r=e.Renderer;r.ComposedComponent;)r=r.ComposedComponent;var o=r.prototype;if(Array.isArray(t)){var i=$.default(t,(function(e){return e.renderMethod}));Object.keys(i).forEach((function(e){var t;if(!o["__".concat(e)]&&o[e]){var n,r,s=i[e],d=null===(t=s[0])||void 0===t?void 0:t.renderMethodOverride;o["__".concat(e)]=o[e],o[e]=(n=o["__".concat(e)],r=(null==d?void 0:d(s.concat(),Rt))||function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.props.$$editor,r=this.super.apply(this,e);if(n&&!this.props.$$commonSchema&&Array.isArray(n.regions)&&s.every((function(e){return H.default(n.regions,(function(t){return t.key===e.key}))}))){var o=s.map((function(e){var t=H.default(n.regions,(function(t){return t.key===e.key&&(!e.rendererName||e.rendererName===t.rendererName)}));return t?a.__assign(a.__assign({},e),{label:t.label,preferTag:t.preferTag}):e}));return Rt(this,r,o,n,n.plugin.manager)}return r},"function"!=typeof n?n:function(){var e=this.super;this.super=n.bind(this);var t=r.apply(this,arguments);return this.super=e,t})}}))}else n&&Object.keys(n).forEach((function(e){var t,a;o["__".concat(e)]||"function"!=typeof o[e]||(o["__".concat(e)]=o[e],o[e]=(t=o["__".concat(e)],a=n[e],"function"!=typeof t?t:function(){var e=this.super;this.super=t.bind(this);var n=a.apply(this,arguments);return this.super=e,n}))}))}function Rt(e,t,n,r,o){if(!0===r.memberImmutable)return t;if(Array.isArray(r.memberImmutable)&&n.every((function(e){return r.memberImmutable.includes(e.key)})))return t;var i=H.default(n,(function(e){return!e.matchRegion}));if(i){var s=i.wrapper||wt;return"inner"===i.insertPosition&&F.default.isValidElement(t)?F.default.cloneElement(t,{children:F.default.createElement(s,{key:i.key,preferTag:i.preferTag,name:i.key,label:i.label,placeholder:i.placeholder,regionConfig:i,editorStore:o.store,manager:o,children:t.props.children,wrapperResolve:i.wrapperResolve,rendererName:r.renderer.name})}):F.default.createElement(s,{key:i.key,preferTag:i.preferTag,name:i.key,label:i.label,placeholder:i.placeholder,regionConfig:i,editorStore:o.store,manager:o,children:t,wrapperResolve:i.wrapperResolve,rendererName:r.renderer.name})}if(n.length){var d=a.__read(function(e,t,a){var n=-1,r=void 0;return a.some((function(a,o){return!!a.matchRegion(t,e)&&(n=o,r=a,!0)})),[r,n]}(e,t,n),2),l=d[0],c=d[1];if(l){s=l.wrapper||wt;if(n.splice(c,1),"outter"===l.insertPosition)return F.default.createElement(s,{key:l.key,preferTag:l.preferTag,name:l.key,label:l.label,placeholder:l.placeholder,regionConfig:l,editorStore:o.store,manager:o,children:t,wrapperResolve:l.wrapperResolve});if(F.default.isValidElement(t)){var u=t.props.children;return F.default.cloneElement(t,{children:F.default.createElement(s,{key:l.key,preferTag:l.preferTag,name:l.key,label:l.label,placeholder:l.placeholder,regionConfig:l,editorStore:o.store,manager:o,children:u,wrapperResolve:l.wrapperResolve})})}}else if(F.default.isValidElement(t)&&t.props.children){u=t.props.children;return u=Array.isArray(u)?u.map((function(t){return Rt(e,t,n,r,o)})):Rt(e,u,n,r,o),F.default.cloneElement(t,{children:u})}}return t}var Ot=document.createElement("div");var Nt={updateLocation:function(){},jumpTo:function(){e.toast.info(t.i18n("245897371cda2055f5c17c6cf298ed48"))},fetcher:function(e){var t=e.url,n=e.method,r=e.data,o=e.config;return a.__awaiter(void 0,void 0,void 0,(function(){var e;return a.__generator(this,(function(a){switch(a.label){case 0:return(o=o||{}).url=t,o.withCredentials=!0,o.cancelExecutor&&(o.cancelToken=new W.default.CancelToken(o.cancelExecutor)),o.headers=o.headers||{},o.method=n,o.data=r,"get"===n&&r?o.params=r:r&&r instanceof FormData||!r||"string"==typeof r||r instanceof Blob||r instanceof ArrayBuffer||(r=JSON.stringify(r),o.headers["Content-Type"]="application/json"),[4,W.default(o)];case 1:return e=a.sent(),[4,c.attachmentAdpator(e,(function(e){return""}))];case 2:return[2,e=a.sent()]}}))}))},isCancel:function(e){return W.default.isCancel(e)},alert:e.alert,confirm:e.confirm,notify:function(a,n){e.toast[a]?e.toast[a](n,"error"===a?t.i18n("a71002967924a83e32b38a80705290fb"):t.i18n("058ebdf2884474ebff2977ba2f0e275e")):console.warn("[Notify]",a,n)}},kt=function(){function n(e,t){this.dnd=e,this.region=t,this.exchangeX=0,this.exchangeY=0,this.dndContainer=this.dnd.store.getDoc().querySelector('[data-region="'.concat(t.region,'"][data-region-host="').concat(t.id,'"]'))}return n.prototype.enter=function(n,r){var o=this.dnd.dragElement;if(o&&o.closest("[data-region]")===this.dndContainer){var i=Array.isArray(this.region.schema)?this.region.schema:[],s=this.getChild(this.dndContainer,o),d=o.getAttribute("data-editor-id"),l=V.default(i,(function(e){return e.$$id===d}));~l&&i[l+1]&&(this.dropBeforeId=i[l+1].$$id),this.dndContainer.insertBefore(r,s);var c=o.outerHTML.replace("ae-is-draging","").replace(/\bdata\-editor\-id=(?:'.+?'|".+?")/g,"");r.innerHTML=c}else{var u=this.dnd.manager,f=u.store;!function(n,r,o,i){n.innerHTML="";var s=r.host.getComponent(),d=(null==s?void 0:s.renderControl)&&"body"===r.region;try{p.render(e.render({children:function(e){var t=e.render;return d?t("",{type:"form",wrapWithPanel:!1,mode:s.props.mode,body:[o]}):t(r.region,o)}},{},a.__assign(a.__assign({},i.env),{theme:(null==s?void 0:s.props.theme)||i.env.theme,session:"ghost-thumb"}),""),Ot)}catch(e){}var l=Ot.innerHTML||t.i18n("f942c7a6a35c4eb1381d2966462d0489");n.innerHTML=l,p.unmountComponentAtNode(Ot),Ot.innerHTML=""}(r,this.region,lt(f.dragSchema),u),this.dndContainer.appendChild(r)}},n.prototype.leave=function(e,t){this.dndContainer.removeChild(t)},n.prototype.over=function(t,a){var n,r,o=this.getTarget(t),i=this.dndContainer,s=this.region.schema,d=Array.isArray(s)?s:[],l=t.clientX-this.exchangeX,c=t.clientY-this.exchangeY;if(o&&!e.animation.animating){var u=o.getAttribute("data-editor-id"),p=this.getChild(i,o),f=V.default(d,(function(e){return e.$$id===u})),h=Array.prototype.indexOf.call(i.children,a),m=Array.prototype.indexOf.call(i.children,p);~h&&h>m&&(!this.exchangeY||c<0||l<0)?(this.exchangeX=t.clientX,this.exchangeY=t.clientY,this.dropBeforeId=null===(n=d[f])||void 0===n?void 0:n.$$id,h!==m-1&&(e.animation.capture(i),i.insertBefore(a,p),e.animation.animateAll())):~h&&h<m&&(!this.exchangeY||c>0||l>0)&&(this.exchangeX=t.clientX,this.exchangeY=t.clientY,d[f+1]?this.dropBeforeId=null===(r=d[f+1])||void 0===r?void 0:r.$$id:delete this.dropBeforeId,h!==m+1&&(e.animation.capture(i),i.insertBefore(a,p.nextSibling),e.animation.animateAll()))}a.parentNode!==i&&(delete this.dropBeforeId,e.animation.capture(i),i.appendChild(a),e.animation.animateAll())},n.prototype.getDropBeforeId=function(){return this.dropBeforeId},n.prototype.getTarget=function(e){for(var t,a,n=e.target.closest("[data-editor-id]");n;){if((null===(t=n.parentElement)||void 0===t?void 0:t.closest("[data-region]"))===this.dndContainer)return"grid"===n.getAttribute("data-renderer")?n.parentElement:n;n=(null===(a=n.parentElement)||void 0===a?void 0:a.closest("[data-editor-id]"))||null}return null},n.prototype.getChild=function(e,t){for(var a=t;a&&a.parentElement!==e;)a=a.parentElement;return a},n.prototype.dispose=function(){delete this.dropBeforeId},n}(),At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.enter=function(e,t){t.innerHTML="",t.classList.add("use-position"),t.classList.add("is-horizontal");var a=this.dnd.dragElement,n=this.dndContainer.getBoundingClientRect(),r=Array.isArray(this.region.schema)?this.region.schema:[];if(a&&a.closest("[data-region]")===this.dndContainer){var o=a.getAttribute("data-editor-id"),i=V.default(r,(function(e){return e.$$id===o}));if(~i&&r[i+1]&&(this.dropBeforeId=r[i+1].$$id),a.nextElementSibling){var s=a.nextElementSibling.getBoundingClientRect();t.style.cssText+="top: 0; left: ".concat(s.x-n.x,"px;")}else t.style.cssText+="top: 0; left: 100%;"}else t.style.cssText+="top: 0; left: -999999%;";this.dndContainer.appendChild(t)},t.prototype.leave=function(e,t){t.classList.remove("use-position"),t.classList.remove("is-horizontal")},t.prototype.over=function(e,t){var a,n,r=this.getTarget(e);if(r){if("table"===(null===(a=this.dndContainer)||void 0===a?void 0:a.getAttribute("data-renderer"))){var o=null===(n=r.parentElement)||void 0===n?void 0:n.closest("th[data-editor-id], td[data-editor-id]");o&&this.dndContainer.contains(o)&&(r=o)}var i=this.dndContainer.getBoundingClientRect();!Array.isArray(this.region.schema)||this.region.schema;var s=r.getBoundingClientRect();r.nextElementSibling&&r.nextElementSibling.hasAttribute("data-editor-id")?(t.style.cssText+="left: ".concat(s.x-i.x,"px;"),this.dropBeforeId=r.getAttribute("data-editor-id")):e.clientX>s.x+s.width/2?(t.style.cssText+="top: 0; left: ".concat(s.right-i.x,"px;"),delete this.dropBeforeId):(t.style.cssText+="left: ".concat(s.x-i.x,"px;"),this.dropBeforeId=r.getAttribute("data-editor-id"))}},t}(kt),Mt=q.default((function(t){e.toast.warning(t)}),500),Dt=function(){function e(e,t){this.manager=e,this.store=t,this.toDispose=[],this.dragEnterCount=0,this.lastX=0,this.lastY=0,this.lastMoveAt=0,this.startX=0,this.startY=0,this.toDispose.push(We((function(){return"schema"===t.dragType?t.dragId:""}),this.updateDragElements),We((function(){return{id:t.dropId,region:t.dropRegion}}),this.updateDropRegion),We((function(){return{id:t.planDropId,region:t.planDropRegion}}),this.updatePlanDropRegion)),this.dragGhost=document.createElement("div"),this.dragGhost.classList.add("ae-DragGhost"),this.dragGhost.classList.add("is-ghost")}return e.prototype.createDragImage=function(e,t){var a=document.createElement("div");return a.classList.add("ae-DragImage"),a.innerHTML="<span>".concat((null==t?void 0:t.label)||e,"</span>"),document.body.appendChild(a),this.dragImage=a,a},e.prototype.disposeDragImage=function(){var e,t=this.dragImage;null===(e=null==t?void 0:t.parentElement)||void 0===e||e.removeChild(t),delete this.dragImage},e.prototype.switchToRegion=function(e,t,a){var n,r,o,i,s,d=this.store;if(!t||!a||d.dropId===t&&d.dropRegion===a)return!1;var l=d.getNodeById(t,a),c=l.regionInfo,u=d.dragSchema;if(!1===(null===(n=null==c?void 0:c.accept)||void 0===n?void 0:n.call(c,u))||(null===(r=l.host)||void 0===r?void 0:r.memberImmutable(a)))return!1;var p={mode:d.dragMode,sourceType:d.dragType,sourceId:d.dragId,data:d.dragSchema,targetId:t,targetRegion:a};return!this.manager.trigger("dnd-accept",p).prevented&&(null===(o=this.dndMode)||void 0===o||o.leave(e,this.dragGhost),null===(i=this.dndMode)||void 0===i||i.dispose(),d.setDropId(t,a),this.makeDNDModeInstance(l),null===(s=this.dndMode)||void 0===s||s.enter(e,this.dragGhost),!0)},e.prototype.makeDNDModeInstance=function(e){var t;if(!e||!f.isAlive(e))return this.dndMode||null;var a=null===(t=e.regionInfo)||void 0===t?void 0:t.dndMode,n=kt;return"position-h"===a&&(n=At),this.dndMode=new n(this,e),this.dndMode},e.prototype.startDrag=function(e,t){var a,n=this,r=this.store.getNodeById(e),o=this.store.getDoc().querySelector('[data-editor-id="'.concat(e,'"]'));if(r&&o){if(null===(a=t.target)||void 0===a||a.addEventListener("dragend",this.dragEnd),this.lastX=t.clientX,this.lastY=t.clientY,this.manager.draggableContainer(r.id))return this.curDragId=e,this.startX=t.clientX,void(this.startY=t.clientY);this.dragElement=o,t.dataTransfer.effectAllowed="move",t.dataTransfer.setDragImage(this.createDragImage(e,r),0,0),t.dataTransfer.setData("dnd/ae-node-".concat(e).toLowerCase(),""),setTimeout((function(){n.store.setDragId(e);var a=r.parent;n.switchToRegion(t,a.id,a.region)}),4)}else t.preventDefault()},e.prototype.dragEnter=function(e){var a,n=this.store;this.dragEnterCount++;var r=n.activeId;if(r)if(o=n.getNodeById(r)){if(!n.dragId&&1===this.dragEnterCount){var o,i=e.dataTransfer.types;if(i.length>0)for(var s=function(t){if(/^dnd-dom\/(.*)$/.test(i[t])){var a=RegExp.$1,r=document.querySelector(a);if(r){r.addEventListener("dragend",d.dragEnd);var o=r.getAttribute("data-dnd-id"),s=r.getAttribute("data-dnd-type"),l=r.getAttribute("data-dnd-data"),c=l?JSON.parse(l):{type:"tpl",tpl:"Unknown"};n.setDragId(o,"copy",s,c);var u=n.activeContainerId;if(u){var p=n.getNodeById(u);if(null==p?void 0:p.childRegions.length){var f=0;p.childRegions.forEach((function(e,t){e.region&&(f=t)})),d.switchToRegion(e,p.id,p.childRegions[f].region)}}return"break"}}},d=this,l=i.length-1;l>=0;l--){if("break"===s(l))break}if(this.curDragId&&this.manager.draggableContainer(this.curDragId)){if(o=n.getNodeById(r)){var c=o.parentId?n.getNodeById(o.parentId):void 0;(null===(a=null==c?void 0:c.schema)||void 0===a?void 0:a.isFreeContainer)&&n.setDropId(o.parentId,"body")}}else;}}else Mt(t.i18n("0e24e1bbc19612a350f81296d9fb7802"));else Mt(t.i18n("0e24e1bbc19612a350f81296d9fb7802"))},e.prototype.dragOver=function(e){var t,a=this.store,n=e.target;e.preventDefault();var r=e.clientX-this.lastX,o=e.clientY-this.lastY,i=Math.max(Math.abs(r),Math.abs(o)),s=Date.now(),d=n.closest("[data-region][data-region-host]"),l=null==d?void 0:d.getAttribute("data-region-host"),c=null==d?void 0:d.getAttribute("data-region");if(i>0&&this.curDragId&&this.manager.draggableContainer(this.curDragId)){var u=a.getDoc(),p=null===parent||void 0===parent?void 0:parent.window.document,f=u.querySelector("[data-hlbox-id='".concat(this.curDragId,"']"));if(a.isMobile&&!f&&p&&(f=p.querySelector("[data-hlbox-id='".concat(this.curDragId,"']"))),f){var h=(f.style.inset||"auto").split(" "),m={top:f.style.top||h[0]||"auto",right:f.style.right||h[1]||"auto",bottom:f.style.bottom||h[2]||h[0]||"auto",left:f.style.left||h[3]||h[1]||"auto"};f.style.inset="".concat("auto"!==m.top?ot(m.top,o):"auto"," ").concat("auto"!==m.right?ot(m.right,-r):"auto"," ").concat("auto"!==m.bottom?ot(m.bottom,-o):"auto"," ").concat("auto"!==m.left?ot(m.left,r):"auto")}var g=u.querySelector("[data-editor-id='".concat(this.curDragId,"']"));if(g){var v=(g.style.inset||"auto").split(" "),b={top:v[0]||"auto",right:v[1]||"auto",bottom:v[2]||v[0]||"auto",left:v[3]||v[1]||"auto"};g.style.inset="".concat("auto"!==b.top?ot(b.top,o):"auto"," ").concat("auto"!==b.right?ot(b.right,-r):"auto"," ").concat("auto"!==b.bottom?ot(b.bottom,-o):"auto"," ").concat("auto"!==b.left?ot(b.left,r):"auto")}return this.lastX=e.clientX,void(this.lastY=e.clientY)}if(a.dropId&&n)if(i<5){if(!d||l===a.dropId)return;s-this.lastMoveAt>200&&c&&l&&this.switchToRegion(e,l,c)}else a.setPlanDropId("",""),this.lastMoveAt=s,this.lastX=e.clientX,this.lastY=e.clientY,a.dropId===l&&c&&c!==a.dropRegion&&this.switchToRegion(e,a.dropId,c),null===(t=this.dndMode)||void 0===t||t.over(e,this.dragGhost)},e.prototype.drop=function(e){var t;return a.__awaiter(this,void 0,void 0,(function(){var n,r,o,i,s,d,l,c;return a.__generator(this,(function(a){switch(a.label){case 0:return n=this.store,this.curDragId&&this.manager.draggableContainer(this.curDragId)?(r=e.clientX-this.startX,o=e.clientY-this.startY,this.manager.updateContainerStyleByDrag(this.curDragId,r,o),this.curDragId="",this.store.setDropId(""),[2]):n.dropId?(i=null===(t=this.dndMode)||void 0===t?void 0:t.getDropBeforeId(),"move"!==n.dragMode?[3,1]:(this.manager.move(n.dropId,n.dropRegion,n.dragId,i),[3,4])):[2];case 1:return"copy"!==n.dragMode?[3,4]:(s=n.dragSchema,d=n.dropId,l=n.dropRegion,c=void 0,"subrenderer"!==n.dragType?[3,3]:(null==(c=H.default(n.subRenderers,(function(e){return e.id===n.dragId})))?void 0:c.scaffoldForm)?[4,this.manager.scaffold(c.scaffoldForm,s)]:[3,3]);case 2:s=a.sent(),a.label=3;case 3:this.manager.addChild(d,l,s,i,c,{id:n.dragId,type:n.dragType,data:n.dragSchema}),a.label=4;case 4:return[2]}}))}))},e.prototype.dragLeave=function(e){this.dragEnterCount--},e.prototype.dragEnd=function(e){var t,a;null===(t=e.target)||void 0===t||t.removeEventListener("dragend",this.dragEnd),null===(a=this.dndMode)||void 0===a||a.leave(e,this.dragGhost),delete this.dndMode,this.dragGhost.innerHTML="",this.store.setDragId(""),this.store.setDropId(""),this.disposeDragImage(),this.dragEnterCount=0},e.prototype.updateDragElements=function(e){e&&this.manager.draggableContainer(e)||(e?[].slice.call(this.store.getDoc().querySelectorAll('[data-editor-id="'.concat(e,'"]'))).forEach((function(e){return e.classList.add("ae-is-draging")})):[].slice.call(this.store.getDoc().querySelectorAll(".ae-is-draging")).forEach((function(e){return e.classList.remove("ae-is-draging")})))},e.prototype.updateDropRegion=function(e,t){var a,n;this.store.dragId&&this.manager.draggableContainer(this.store.dragId)||((null==t?void 0:t.id)&&t.region&&(null===(a=this.store.getDoc().querySelector('[data-region="'.concat(t.region,'"][data-region-host="').concat(t.id,'"]')))||void 0===a||a.classList.remove("is-dragenter")),e.id&&e.region&&(null===(n=this.store.getDoc().querySelector('[data-region="'.concat(e.region,'"][data-region-host="').concat(e.id,'"]')))||void 0===n||n.classList.add("is-dragenter")))},e.prototype.updatePlanDropRegion=function(e,t){var a,n;this.store.dragId&&this.manager.draggableContainer(this.store.dragId)||((null==t?void 0:t.id)&&t.region&&(null===(a=this.store.getDoc().querySelector('[data-region="'.concat(t.region,'"][data-region-host="').concat(t.id,'"]')))||void 0===a||a.classList.remove("is-entering")),e.id&&e.region&&(null===(n=this.store.getDoc().querySelector('[data-region="'.concat(e.region,'"][data-region-host="').concat(e.id,'"]')))||void 0===n||n.classList.add("is-entering")))},e.prototype.dispose=function(){this.disposeDragImage(),this.toDispose.forEach((function(e){return e()})),this.toDispose=[]},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[DragEvent]),a.__metadata("design:returntype",void 0)],e.prototype,"dragEnter",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[DragEvent]),a.__metadata("design:returntype",void 0)],e.prototype,"dragOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[DragEvent]),a.__metadata("design:returntype",Promise)],e.prototype,"drop",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[DragEvent]),a.__metadata("design:returntype",void 0)],e.prototype,"dragLeave",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[DragEvent]),a.__metadata("design:returntype",void 0)],e.prototype,"dragEnd",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],e.prototype,"updateDragElements",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,Object]),a.__metadata("design:returntype",void 0)],e.prototype,"updateDropRegion",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,Object]),a.__metadata("design:returntype",void 0)],e.prototype,"updatePlanDropRegion",null),e}(),Ft=function(){function e(e,t,a){this.variables=Array.isArray(t)?Z.default(J.default(t),[function(e){var t;return null!==(t=e.order)&&void 0!==t?t:1}]):[],this.dataSchema=e instanceof c.DataSchema?e:new c.DataSchema([]),this.options=G.default(a,["beforeScopeInsert","afterScopeInsert","onContextSchemaChange","onContextOptionChange"]),this.init()}return e.prototype.init=function(){var e,t=this,a=this.variables,n=this.dataSchema,r=null!==(e=this.options)&&void 0!==e?e:{},o=r.beforeScopeInsert,i=r.afterScopeInsert;a.forEach((function(e){var a=e.parentId,r=e.name,s=e.title,d=e.schema;n.hasScope(a)&&(n.switchTo(a),n.hasScope(r)&&n.removeScope(r),o&&"function"==typeof o&&(d=o(t,d)),n.addScope(d,r),n.switchTo(r),n.current.tag=s,i&&"function"==typeof i&&i(t))})),n.switchToRoot()},e.prototype.getVariableContextSchema=function(){var e,t,a=this,n=[],r=(null!==(e=this.options)&&void 0!==e?e:{}).onContextSchemaChange;return this.variables&&(null===(t=this.variables)||void 0===t?void 0:t.length)>0&&(n=this.variables.map((function(e){if(a.dataSchema.hasScope(e.name)){var t=a.dataSchema.getScope(e.name);return t.schemas.length>0?t.schemas[0]:null}return null})).filter((function(e){return null!==e}))),r&&"function"==typeof r&&(n=r(this,n)),n},e.prototype.getVariableFormulaOptions=function(e){var t,n,r=this;void 0===e&&(e=!1);var o=(null!==(t=this.options)&&void 0!==t?t:{}).onContextOptionChange,i=[];return this.variables&&(null===(n=this.variables)||void 0===n?void 0:n.length)>0&&this.variables.forEach((function(e){if(r.dataSchema.hasScope(e.name)){var t=r.dataSchema.getScope(e.name),n=c.mapTree(t.getDataPropsAsOptions(),(function(e){return a.__assign(a.__assign({},e),{tag:e.type})}));t.tag?i.push({label:t.tag,children:n}):i.push.apply(i,a.__spreadArray([],a.__read(n),!1))}})),o&&"function"==typeof o&&(i=o(this,i,"formula")),c.eachTree(i,(function(e){"array"===e.type&&delete e.children})),e?i:Y.default(i)},e.prototype.getVariableOptions=function(){var e,t,n,r,o=(null!==(e=this.options)&&void 0!==e?e:{}).onContextOptionChange,i=null!==(r=null===(n=null===(t=this.getVariableFormulaOptions(!1))||void 0===t?void 0:t[0])||void 0===n?void 0:n.children)&&void 0!==r?r:[];return i=c.mapTree(i,(function(e,t,n,r){return a.__assign(a.__assign({},e),{valueExpression:"string"!=typeof e.value||e.value.startsWith("${")?e.value:"${".concat(e.value,"}")})})),o&&"function"==typeof o&&(i=o(this,i,"normal")),i},e.prototype.getPageVariablesOptions=function(){var e,a,n=[],r=null===(a=null===(e=this.dataSchema)||void 0===e?void 0:e.root.children)||void 0===a?void 0:a.filter((function(e){return e.tag===t.i18n("cc6aeb073ebc3cb29734a49164f8964c")}))[0];return r&&(n=r.getDataPropsAsOptions()),c.eachTree(n,(function(e){"array"===e.type&&delete e.children})),n},e.prototype.getNameByPath=function(e,t,n){var r,o;if(void 0===t&&(t="value"),void 0===n&&(n="label"),!e||"string"!=typeof e)return"";var i=a.__spreadArray(a.__spreadArray([],a.__read(this.getVariableOptions()),!1),a.__read(this.getPageVariablesOptions()),!1),s=c.findTree(i,(function(a){return a[null!=t?t:"value"]===e}));return s&&null!==(o=null!==(r=s[null!=n?n:"label"])&&void 0!==r?r:s[null!=t?t:"value"])&&void 0!==o?o:""},e}(),Pt=[];function Bt(){window.AMISEditorCustomPlugins&&Object.keys(window.AMISEditorCustomPlugins).forEach((function(e){var t=window.AMISEditorCustomPlugins[e];t&&Tt(t)}))}function Tt(e){var t=Array.from(new Set(["global"].concat(e.scene||"global")));e.scene=t;(e.prototype&&e.prototype.isNpmCustomWidget?Pt.find((function(t){return Array.isArray(t)?t[0].prototype.name===e.prototype.name:t.prototype.name===e.prototype.name})):Pt.find((function(t){return t===e})))?console.warn("注册插件异常，已存在同名插件：",e):Pt.push(e)}var jt=function(){function n(n,r,o){var s=this;this.config=n,this.store=r,this.parent=o,this.toDispose=[],this.id=ae(),this.disableHover=!1,this.amisStore={},this.broadcasts=[],this.pluginEvents={},this.pluginActions={},this.isInFrame=!1,this.listeners=[],this.lazyPatchSchema=q.default(this.patchSchema.bind(this),250,{leading:!1,trailing:!0}),this.patching=!1;var d=!!o;this.isInFrame=d,this.env=a.__assign(a.__assign(a.__assign({},Nt),y.omit(n.amisEnv,"replaceText")),{theme:n.theme}),this.env.beforeDispatchEvent=this.beforeDispatchEvent.bind(this,this.env.beforeDispatchEvent),this.hackIn=(null==o?void 0:o.hackIn)||It,Bt(),n.scene,this.plugins=(null==o?void 0:o.plugins)||(n.disableBultinPlugin?[]:Pt).concat(this.normalizeScene(null==n?void 0:n.plugins)).filter((function(e){return e=Array.isArray(e)?e[0]:e,!n.disablePluginList||("function"==typeof n.disablePluginList?!n.disablePluginList(e.id||"",e):!n.disablePluginList.includes(e.id||"unkown"))})).map((function(e){var t,a={};Array.isArray(e)&&(a="function"==typeof e[1]?e[1]():e[1],e=e[0]);var n=new e(s,a);return n.order=null!==(t=n.order)&&void 0!==t?t:0,n.rendererName&&(s.pluginEvents[n.rendererName]=n.events||[],s.pluginActions[n.rendererName]=n.actions||[]),n})).sort((function(e,t){return e.order-t.order})),this.hackRenderers(),this.dnd=(null==o?void 0:o.dnd)||new Dt(this,r),this.dataSchema=(null==o?void 0:o.dataSchema)||new e.DataSchema(n.schemas||[]),this.dataSchema.current.tag=t.i18n("979a50681e278dcc0be18f68459e8217"),this.variableManager=new Ft(this.dataSchema,null==n?void 0:n.variables,null==n?void 0:n.variableOptions),d||this.toDispose.push(We((function(){return r.activeId}),(function(e,t){return a.__awaiter(s,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return this.store.insertId&&this.store.closeInsertPanel(),this.buildJSONSchemaUri(),this.buildToolbars(),[4,this.buildRenderers()];case 1:return n.sent(),this.buildPanels(),this.trigger("active",e?a.__assign(a.__assign({},this.buildEventContext(e)),{active:!0}):{id:t,active:!1}),[2]}}))}))})),i.reaction((function(){return r.selections.join(",")}),(function(){s.buildPanels()})),i.reaction((function(){return r.needPatch}),(function(e){e&&s.lazyPatchSchema()})),We((function(){return{id:r.hoverId,region:r.hoverRegion}}),(function(e,t){var a,n,o=r.getDoc();e.id&&e.region?null===(a=o.querySelector('[data-region="'.concat(e.region,'"][data-region-host="').concat(e.id,'"]')))||void 0===a||a.classList.add("is-region-active"):(null==t?void 0:t.id)&&(null==t?void 0:t.region)&&(null===(n=o.querySelector('[data-region="'.concat(t.region,'"][data-region-host="').concat(t.id,'"]')))||void 0===n||n.classList.remove("is-region-active"))})))}return n.prototype.normalizeScene=function(e){return(null==e?void 0:e.map((function(e){var t=Array.from(new Set(["global"].concat(e.scene||"global")));return e.scene=t,e})))||[]},n.prototype.dynamicAddPlugin=function(e){var t;if(e)if(this.plugins.some((function(t){return t&&t.name===e})))console.warn("[amis-editor]当前已有".concat(e,"插件"));else{var a=Pt.find((function(t){return t.prototype&&t.prototype.name===e}));if(!a&&window.AMISEditorCustomPlugins&&(a=window.AMISEditorCustomPlugins[e]),a){var n=new a(this);n.order=null!==(t=n.order)&&void 0!==t?t:0,this.plugins.push(n),this.plugins.sort((function(e,t){return e.order-t.order})),n.rendererName&&(this.pluginEvents[n.rendererName]=n.events||[],this.pluginActions[n.rendererName]=n.actions||[]),this.buildRenderers()}}},n.prototype.updateAMISContext=function(e){e&&(this.amisStore=e)},n.prototype.buildRenderersAndPanels=function(){var e=this;setTimeout((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(a){switch(a.label){case 0:return(e=this.store).activeId||!(null===(t=null==e?void 0:e.schema)||void 0===t?void 0:t.$$id)?[3,2]:[4,this.buildRenderers()];case 1:a.sent(),this.buildPanels(e.schema.$$id),a.label=2;case 2:return[2]}}))}))}),200)},n.prototype.buildEventContext=function(e){var t="string"==typeof e?this.store.getNodeById(e):e,a=this.store.getSchema(t.id);return{node:t,id:t.id,info:t.info,path:t.path,schemaPath:t.schemaPath,schema:a,data:""}},n.prototype.buildJSONSchemaUri=function(){var e=this.store.activeId,t="";if(e){var a=this.buildEventContext(e),n=this.trigger("before-resolve-json-schema",a);if(t=n.context.data,!n.prevented){this.plugins.forEach((function(e){var n;if(!t){var r=null===(n=e.buildJSONSchema)||void 0===n?void 0:n.call(e,a);r&&(t=r)}})),a.data=t;var r=this.trigger("after-resolve-json-schema",a);t=r.data}}this.store.setJSONSchemaUri(t)},n.prototype.buildToolbars=function(){var e=this.store.activeId,t=[];if(e){var n=this.buildEventContext(e);this.plugins.forEach((function(e){var r,o=a.__assign({},n);null===(r=e.buildEditorToolbar)||void 0===r||r.call(e,o,t)})),this.trigger("build-toolbars",a.__assign(a.__assign({},n),{data:t}))}this.store.setActiveToolbars(t.map((function(e){return a.__assign(a.__assign({},e),{order:e.order||0,id:ae()})})))},n.prototype.collectPanels=function(e,t,n){var r=this;void 0===t&&(t=!1),void 0===n&&(n=!1);var o=[];if(e){var i=a.__assign(a.__assign({},this.buildEventContext(e)),{secondFactor:n,data:o,selections:this.store.selections.map((function(e){return r.buildEventContext(e)}))});this.plugins.forEach((function(e){var t;null===(t=e.buildEditorPanel)||void 0===t||t.call(e,i,o)})),t&&this.trigger("build-panels",i),o=i.data||o,i.changeLeftPanelKey&&this.store.changeLeftPanelKey(i.changeLeftPanelKey)}return o},n.prototype.buildPanels=function(e){var t,n,r=e||this.store.activeId,o=[];if(!r&&(null===(t=this.store)||void 0===t?void 0:t.schema)&&(r=null===(n=this.store)||void 0===n?void 0:n.schema.$$id),r||this.store.selections.length){r=r||this.store.selections[0];var i=this.store.getNodeById(r);o=i?this.collectPanels(i,!0):o}this.store.setPanels(o.map((function(e){return a.__assign(a.__assign({},e),{order:e.order||0})})))},n.prototype.collectRenderers=function(e,t){var n,r,o,i;return void 0===t&&(t=this.store.activeContainerId),a.__awaiter(this,void 0,void 0,(function(){var s,d,l,u,p,f,h,m,g,v,b,y,_;return a.__generator(this,(function(E){switch(E.label){case 0:if(s=[],!(d=t)&&(null===(n=this.store)||void 0===n?void 0:n.schema)&&(d=null===(r=this.store)||void 0===r?void 0:r.schema.$$id),!d)return[2,s];if(!(l=this.store.getNodeById(d)))return[2,s];u=this.store.getSchema(d),p={node:l,id:l.id,info:l.info,path:l.path,schemaPath:l.schemaPath,schema:u,region:e},f=[],h=function(e,t){var n,r;return a.__generator(this,(function(t){switch(t.label){case 0:return n=m.plugins[e],[4,null===(o=n.buildSubRenderers)||void 0===o?void 0:o.call(n,p,s,c.getRenderers())];case 1:return(r=t.sent())&&(Array.isArray(r)?r:[r]).forEach((function(e){return s.push(a.__assign(a.__assign({},e),{id:ae(),plugin:n,parent:l.info,order:e.order||0}))})),n.asyncUpdateCustomSubRenderersInfo&&f.push(n),[2]}}))},m=this,g=0,v=this.plugins.length,E.label=1;case 1:return g<v?[5,h(g,v)]:[3,4];case 2:E.sent(),E.label=3;case 3:return g++,[3,1];case 4:if(!f.length)return[3,8];b=0,y=f.length,E.label=5;case 5:return b<y?(_=f[b],[4,null===(i=_.asyncUpdateCustomSubRenderersInfo)||void 0===i?void 0:i.call(_,p,s,c.getRenderers())]):[3,8];case 6:E.sent(),E.label=7;case 7:return b++,[3,5];case 8:return[2,s.filter((function(e){return!e.disabledRendererPlugin}))]}}))}))},n.prototype.buildRenderers=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.collectRenderers(e)];case 1:return t=a.sent(),this.store.setSubRenderers(t),this.store.changeSubRendererRegion(e||""),[2]}}))}))},n.prototype.rebuild=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.buildRenderers()];case 1:return e.sent(),this.buildToolbars(),this.buildPanels(),[2]}}))}))},n.prototype.updateConfigPanel=function(e){var t,n=this,r=this.store,o=r.activeId,i=r.getSchema,s=r.getNodeById,d=e;if(!d&&this.store.activeId){var l=i(o);d=l.type}if(d&&this.store.activeId){var c=this.store.panels.concat(),u=s(o);if(d&&u){var p=this.plugins.find((function(e){return e.rendererName===d}));c.splice(c.findIndex((function(e){return"config"===e.key})),1);var f=a.__assign(a.__assign({},this.buildEventContext(u)),{data:c,selections:this.store.selections.map((function(e){return n.buildEventContext(e)}))});p&&(null===(t=p.buildEditorPanel)||void 0===t||t.call(p,f,c),this.store.setPanels(c.map((function(e){return a.__assign(a.__assign({},e),{order:e.order||0})}))))}}},n.prototype.switchToRegion=function(e){this.store.activeId&&this.buildRenderers(e)},n.prototype.showInsertPanel=function(e,t,n,r,o,i){var s,d,l;return void 0===t&&(t=this.store.activeId),void 0===r&&(r="insert"),void 0===o&&(o=""),a.__awaiter(this,void 0,void 0,(function(){var c,u;return a.__generator(this,(function(a){switch(a.label){case 0:return void 0===n&&t&&(c=this.store.getNodeById(t),n=null===(l=null===(d=null===(s=null==c?void 0:c.info)||void 0===s?void 0:s.regions)||void 0===d?void 0:d.find((function(t){return t.key===e})))||void 0===l?void 0:l.preferTag),[4,this.collectRenderers(e,t)];case 1:return u=a.sent(),this.store.setInsertRenderers(u),this.store.setInsertRegion(e,t,n,r,o,i),[2]}}))}))},n.prototype.showReplacePanel=function(e,t){var a=this.store.getNodeById(e),n=null==a?void 0:a.parent;if(a&&n&&n.isRegion&&n.parent){var r=n.parent;this.showInsertPanel(n.region,r.id,t,"replace",a.id)}},n.prototype.showRendererPanel=function(e,t){this.store.showRendererPanel(e,t)},n.prototype.on=function(e,t){this.listeners.push({type:e,fn:t})},n.prototype.off=function(e,t){var a=V.default(this.listeners,(function(a){return a.type===e&&a.fn===t}));~a&&this.listeners.splice(a,1)},n.prototype.trigger=function(e,t){var a=gt(e,t),n=Ue(/^(?:before|after)/.test(e)?e:"on-".concat(e)),r=this.listeners.filter((function(t){return t.type===e}));this.plugins.forEach((function(t){return t[n]&&r.push({type:e,fn:t[n].bind(t)})})),this.config[n]&&r.push({fn:this.config[n],type:e});var o=[];return r.some((function(e){var t=e.fn.call(null,a);return!1===t?(a.preventDefault(),a.stopPropagation()):(null==t?void 0:t.then)?o.push(t):void 0!==t&&a.setData(t),a.stoped})),o.length&&(a.pending=Promise.all(o)),a},n.prototype.addElem=function(n){var r,o,i,s,d;return a.__awaiter(this,void 0,void 0,(function(){var l,c,u,p,f,h,m,g,v,b,y,_,E,w,S,C;return a.__generator(this,(function(a){switch(a.label){case 0:if(!n)return[2];if(l="",Qe(n)?l=n.toString():et(n)&&(c=n),u=this.store,f=u.activeId,h=u.getNodeById(f),l&&(p=u.getSubRendererById(l),"fixed"===((null===(r=null==p?void 0:p.scaffold)||void 0===r?void 0:r.style)||{}).position&&(f=u.getRootId(),h=u.getNodeById(f))),!p&&!c)return[2];if(!h)return e.toast.warning(t.i18n("0e24e1bbc19612a350f81296d9fb7802")),[2];if(m=c||(null==p?void 0:p.scaffold),g=this.isSpecialLayout(m),!("wrapper"!==h.type&&"container"!==h.type||0!==(null===(i=null===(o=h.schema)||void 0===o?void 0:o.body)||void 0===i?void 0:i.length)||"flex"!==(null==m?void 0:m.type)||(null===(s=h.schema)||void 0===s?void 0:s.isFreeContainer)||g))return this.replaceChild(f,m),[2];if(v=h.parent,b=null,y=null,_=null,u.activeRegion)y=f,_=u.activeRegion;else if(h.schema.columns&&"grid"!==h.type)y=f,_="columns";else if(h.schema.items&&rt(h.schema))y=f,_="items";else if(h.schema.body)y=f,_="body";else if(v){if(y=v.id,_=v.region,!v.region&&v.schema.body)_="body";else if(!v.region&&v.schema.items)_="items";else if(!v.region&&!v.schema.body&&!v.schema.items)return e.toast.warning(t.i18n("bd690facb536d759814ee64f2760fecb")),[2];E=u.getSchemaParentById(f),w=-1,E.some((function(e,t){var a=!1;return e.$$id===f&&(w=t,a=!0),a})),b=null===(d=E[w+1])||void 0===d?void 0:d.$$id}else y=f,_="body";return S=c,!p||c?[3,2]:(S=p.scaffold||{type:p.type},p.scaffoldForm?[4,this.scaffold(p.scaffoldForm,S)]:[3,2]);case 1:S=a.sent(),a.label=2;case 2:return(C=this.addChild(y,_,S,b,p))&&setTimeout((function(){u.setActiveId(C.$$id)}),100),[2]}}))}))},n.prototype.appendSiblingSchema=function(n,r,o){var i,s;return a.__awaiter(this,void 0,void 0,(function(){var d,l,c,u,p,f,h,m,g,v;return a.__generator(this,(function(a){if(!n)return[2];if(d=this.store,l=d.activeId,!(c=d.getNodeById(l)))return e.toast.warning(t.i18n("0e24e1bbc19612a350f81296d9fb7802")),[2];if(u=c.parent,p=null,f=null,h=null,u){if(f=u.id,h=u.region,!u.region&&u.schema.body)h="body";else if(!u.region&&"flex"===(null===(i=u.schema)||void 0===i?void 0:i.type)&&u.schema.items)h="items";else if(!u.region&&!u.schema.body)return e.toast.warning(t.i18n("bd690facb536d759814ee64f2760fecb")),[2];m=d.getSchemaParentById(l),g=-1,m.some((function(e,t){var a=!1;return e.$$id===l&&(g=t,a=!0),a})),p=null===(s=m[r?g:g+1])||void 0===s?void 0:s.$$id,(v=this.addChild(f,h,n,p))&&!o&&setTimeout((function(){d.setActiveId(v.$$id)}),100)}return[2]}))}))},n.prototype.insert=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,i,s;return a.__generator(this,(function(a){switch(a.label){case 0:return e=this.store,(t=e.selectedInsertRendererInfo)?(n=e.insertId,r=e.insertRegion,o=e.insertBeforeId,i=t.scaffold||{type:t.type},t.scaffoldForm?[4,this.scaffold(t.scaffoldForm,i)]:[3,2]):[2];case 1:i=a.sent(),a.label=2;case 2:return(s=this.addChild(n,r,i,o,t))&&(e.closeInsertPanel(),setTimeout((function(){e.setActiveId(s.$$id)}),100)),[2]}}))}))},n.prototype.replace=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,o,i=this;return a.__generator(this,(function(a){switch(a.label){case 0:return e=this.store,(t=e.selectedInsertRendererInfo)?(n=e.insertOrigId,r=t.scaffold||{type:t.type},o=e.insertRegion,t.scaffoldForm?[4,this.scaffold(t.scaffoldForm,r)]:[3,2]):[2];case 1:r=a.sent(),a.label=2;case 2:return this.replaceChild(n,r,t,o)&&(e.closeInsertPanel(),setTimeout((function(){i.rebuild()}),4)),[2]}}))}))},n.prototype.isFlexContainer=function(e){return this.store.isFlexContainer(e)},n.prototype.isFlexItem=function(e){return this.store.isFlexItem(e)},n.prototype.isFlexColumnItem=function(e){return this.store.isFlexColumnItem(e)},n.prototype.isSpecialLayout=function(e){var t=(null==e?void 0:e.style)||{};return"fixed"===(null==t?void 0:t.position)||"absolute"===(null==t?void 0:t.position)},n.prototype.draggableContainer=function(e){return this.store.draggableContainer(e)},n.prototype.updateContainerStyleByDrag=function(e,t,a){this.store.updateContainerStyleByDrag(e,t,a)},n.prototype.getEditorInfo=function(e,t,n){var r=null,o=n.$$id?this.store.getSchemaPath(n.$$id):"",i={renderer:e,path:t,schemaPath:o,schema:n},s=this.trigger("before-resolve-editor-info",i);return s.prevented?s.context.data:(this.plugins.some((function(t){var s,d=null===(s=t.getRendererInfo)||void 0===s?void 0:s.call(t,i);return!!d&&(r=a.__assign(a.__assign({id:n.$$id},d),{type:n.type,plugin:t,renderer:e,schemaPath:o}),!0)})),this.trigger("after-resolve-editor-info",a.__assign(a.__assign({},i),{data:r})).context.data)},n.prototype.panelChangeValue=function(e,t){var n=this.store,r=a.__assign(a.__assign({},this.buildEventContext(n.activeId)),{value:e,diff:t});this.trigger("before-update",r).prevented||(n.changeValue(e,t),this.trigger("after-update",r))},n.prototype.openSubEditor=function(e){this.store.openSubEditor(e)},n.prototype.openContextMenu=function(t,n,r){var o=this,i=[],s=this.buildEventContext(t),d=a.__assign(a.__assign({},s),{selections:this.store.selections.map((function(e){return o.buildEventContext(e)})),region:n,data:i});(i=this.buildContextMenus(d)).length&&(this.store.setContextId(t),e.openContextMenus({x:r.x,y:r.y},i,(function(){return o.store.setContextId("")})))},n.prototype.buildContextMenus=function(e){return this.plugins.forEach((function(t){var a;null===(a=t.buildEditorContextMenu)||void 0===a||a.call(t,e,e.data)})),this.trigger("build-context-menus",e),e.data},n.prototype.closeContextMenu=function(){},n.prototype.moveUp=function(){var e,t=this.store;if(t.activeId){var n=t.getNodeById(t.activeId),r=n.parent,o=n.host,i=this.buildEventContext(o),s=a.__assign(a.__assign({},i),{sourceId:n.id,direction:"up",beforeId:null===(e=n.prevSibling)||void 0===e?void 0:e.id,region:r.region});this.trigger("before-move",s).prevented||(t.moveUp(n.id),this.trigger("after-move",s),this.trigger("after-update",s))}},n.prototype.moveDown=function(){var e,t,n=this.store;if(n.activeId){var r=n.getNodeById(n.activeId),o=r.parent,i=r.host,s=this.buildEventContext(i),d=a.__assign(a.__assign({},s),{sourceId:r.id,direction:"down",beforeId:null===(t=null===(e=r.nextSibling)||void 0===e?void 0:e.nextSibling)||void 0===t?void 0:t.id,region:o.region});this.trigger("before-move",d).prevented||(n.moveDown(r.id),this.trigger("after-move",d),this.trigger("after-update",d))}},n.prototype.del=function(e){if(e&&e.length){var t=Array.isArray(e)?e[0]:e,n=a.__assign(a.__assign({},this.buildEventContext(t)),{data:Array.isArray(e)?e.concat():[]});this.trigger("before-delete",n).prevented||(Array.isArray(n.data)&&n.data.length?this.store.delMulti(n.data):this.store.del(t),this.trigger("after-delete",n))}},n.prototype.duplicate=function(e){this.store.duplicate(e)},n.prototype.copy=function(a,n){void 0===n&&(n=t.i18n("52e6abbe5c11e7cbf14788c1540f8bf2"));var r=this.store.getValueOf(a);this.clipboardData=w.stringify(r),e.toast.info(t.i18n("372ea9fd27fb7cfacfe1b4ca3046f8d0")+n)},n.prototype.cut=function(e){this.copy(e,t.i18n("2a6287664de5ab46c65220c7182878ff")),this.del(e)},n.prototype.paste=function(n,r){return a.__awaiter(this,void 0,void 0,(function(){var o;return a.__generator(this,(function(a){return this.clipboardData?(o=Ae(w.parse(this.clipboardData)),r?this.addChild(n,r,o):this.replaceChild(n,o),[2]):(e.alert(t.i18n("1ff035555ac8a68dc5b0ea2d0af55f00")),[2])}))}))},n.prototype.emptyRegion=function(e,t){var a=this;this.store.emptyRegion(e,t),setTimeout((function(){a.store.activeId&&a.store.getNodeById(a.store.activeId)||a.store.setActiveId(e)}),100)},n.prototype.addChild=function(e,t,n,r,o,i){var s=this.store,d=-1,l=this.buildEventContext(e),c=a.__assign({},n);if(Me(c),r){var u=l.schema[t];Array.isArray(u)&&(d=V.default(u,(function(e){return(null==e?void 0:e.$$id)===r})))}var p=a.__assign(a.__assign({},l),{beforeId:r,index:d,region:t,data:c,subRenderer:o,dragInfo:i}),f=this.trigger("before-insert",p);if(!f.prevented){var h=s.insertSchema(f);return this.trigger("after-insert",p),h}return null},n.prototype.move=function(e,t,n,r){var o=this.store,i=a.__assign(a.__assign({},this.buildEventContext(e)),{beforeId:r,region:t,sourceId:n}),s=this.trigger("before-move",i);return!s.prevented&&(o.moveSchema(s),this.trigger("after-move",i),!0)},n.prototype.replaceChild=function(e,t,n,r){var o=a.__assign(a.__assign({},this.buildEventContext(e)),{data:a.__assign({},t),subRenderer:n,region:r}),i=this.trigger("before-replace",o);return!(i.prevented||!i.context.data)&&(this.store.replaceChild(e,i.context.data),this.trigger("after-replace",o),!0)},n.prototype.setActiveId=function(e){this.store.setActiveId(e)},n.prototype.openConfigPanel=function(e){var t=this.store;t.activeId!==e&&t.setActiveId(e),t.changePanelKey("config")},n.prototype.openCodePanel=function(e){var t=this.store;t.activeId!==e&&t.setActiveId(e),t.changePanelKey("code")},n.prototype.toggleSelection=function(e){var t=this.store,a=t.selections.concat();!a.length&&t.activeId&&a.push(t.activeId);var n=a.indexOf(e);~n?a.splice(n,1):a.push(e),this.setSelection(a,e)},n.prototype.setSelection=function(e,t){var n=this;void 0===t&&(t=e[0]);var r=this.store,o=this.buildEventContext(t),i=a.__assign(a.__assign({},o),{selections:e.map((function(e){return n.buildEventContext(e)})),data:e});this.trigger("selection-change",i).prevented||(1===(e=i.data).length?r.setActiveId(e[0]):r.setSelections(e))},n.prototype.startDrag=function(e,t){t.persist(),this.dnd.startDrag(e,t.nativeEvent)},n.prototype.scaffold=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n=this;return a.__generator(this,(function(r){return[2,new Promise((function(r){n.store.openScaffoldForm(a.__assign(a.__assign({},e),{value:e.pipeIn?e.pipeIn(t):t,callback:r}))}))]}))}))},n.prototype.reScaffold=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.scaffold(t,n)];case 1:return r=a.sent(),this.replaceChild(e,r),[2]}}))}))},n.prototype.reScaffoldV2=function(e){var t;return a.__awaiter(this,void 0,void 0,(function(){var n,r,o,i;return a.__generator(this,(function(a){switch(a.label){case 0:return n=this.buildEventContext(e),r=null===(t=n.info)||void 0===t?void 0:t.scaffoldForm,o=n.schema,[4,this.scaffold(r,o)];case 1:return i=a.sent(),this.replaceChild(e,i),[2]}}))}))},n.prototype.patchSchema=function(e){var t=this;if(void 0===e&&(e=!1),!this.patching){this.patching=!0;var a=function(n){n.forEach((function(n){n.uniqueChildren&&n.uniqueChildren.length&&a(n.uniqueChildren),n.isRegion||n.patch(t.store,e)}))};a(this.store.root.children),this.patching=!1}},n.prototype.hackRenderers=function(e){var t=this;void 0===e&&(e=c.getRenderers());var a=[];e.forEach((function(e){t.plugins.filter((function(t){var a;return Array.isArray(null==t?void 0:t.regions)&&t.regions.some((function(a){var n;return a.renderMethod&&(null!==(n=a.rendererName)&&void 0!==n?n:t.rendererName)===e.name}))||t.overrides&&(null!==(a=t.overrideTargetRendererName)&&void 0!==a?a:t.rendererName)===e.name})).forEach((function(t){var n,r,o=null===(n=t.regions)||void 0===n?void 0:n.filter((function(a){var n;return a.renderMethod&&(null!==(n=a.rendererName)&&void 0!==n?n:t.rendererName)===e.name}));(null==o?void 0:o.length)&&a.push({renderer:e,regions:o}),t.overrides&&(null!==(r=t.overrideTargetRendererName)&&void 0!==r?r:t.rendererName)===e.name&&a.push({renderer:e,overrides:t.overrides})}))})),a.forEach((function(e){var a=e.regions,n=e.renderer,r=e.overrides;return t.hackIn(n,a,r)}))},n.prototype.makeWrapper=function(n,r){var o;return(null===(o=this.parent)||void 0===o?void 0:o.makeWrapper)?this.parent.makeWrapper(n,r):function(n,r,o){var i=n.store,s=o.component;return function(d){function l(e){var t=d.call(this,e)||this;return t.state={hasError:!1},t}var c;return a.__extends(l,d),l.prototype.UNSAFE_componentWillMount=function(){var e=this,a=this.context||i.root;if(r.id&&(this.editorNode=a.addChild({id:r.id,type:r.type,label:r.name,isCommonConfig:!!this.props.$$commonSchema,path:this.props.$path,schemaPath:r.schemaPath,info:r,getData:function(){return e.props.data}}),this.editorNode.setRendererConfig(o),o.storeType&&!n.dataSchema.hasScope("".concat(r.id,"-").concat(r.type)))){for(var s=a,d=void 0;s&&!d;)s===i.root?d=n.dataSchema.getScope("root"):n.dataSchema.hasScope("".concat(s.id,"-").concat(s.type))&&(d=n.dataSchema.getScope("".concat(s.id,"-").concat(s.type))),s="root"===s.parentId?i.root:s.parent;if(!d)throw new Error(t.i18n("186733ed7ec817040b8f9cbc610ba49a"));n.dataSchema.switchTo(d.id),this.scopeId="".concat(r.id,"-").concat(r.type),n.dataSchema.addScope([],this.scopeId),r.name&&(n.dataSchema.current.tag="".concat(r.name,"变量"))}},l.prototype.componentDidUpdate=function(e){var t=this.props;this.editorNode&&t.$$commonSchema!==e.$$commonSchema&&this.editorNode.updateIsCommonConfig(!!this.props.$$commonSchema)},l.prototype.componentDidCatch=function(e,a){console.warn("".concat(r.name,"(").concat(r.id,")渲染发生错误：")),console.warn(t.i18n("a30dd4945df5b44b264fa3be6ee9682e"),r),console.warn(t.i18n("63f94190d2d4ea22263e6e9f07c96558"),e),console.warn(t.i18n("f66335b5bff0e26fdff2a3303e0f9bb0"),a),this.setState({hasError:!0})},l.prototype.componentWillUnmount=function(){this.editorNode&&f.isAlive(this.editorNode)&&(this.context||i.root).removeChild(this.editorNode),this.scopeId&&n.dataSchema.removeScope(this.scopeId)},l.prototype.wrapperRef=function(e){for(;null==e?void 0:e.getWrappedInstance;)e=e.getWrappedInstance();this.editorNode&&f.isAlive(this.editorNode)&&this.editorNode.setComponent(e)},l.prototype.renderChild=function(e,t,n){var o=this.props.render;return t.$$id&&((n=n||{}).key=t.$$id||n.key),o(e,t,a.__assign(a.__assign({},n),{$$editor:r}))},l.prototype.render=function(){var e=this.props;e.$$id;var t=a.__rest(e,["$$id"]);if(this.state.hasError)return F.default.createElement("div",{className:"ae-Editor-renderer-error"},r.name,"(",r.id,")渲染发生错误，详细错误信息请查看控制台输出。");var n=this.props.$$commonSchema?Ct:r.regions?St:yt;return F.default.createElement(Et.Provider,{value:this.editorNode||this.context},F.default.createElement(n,a.__assign({},t,{render:this.renderChild,$$editor:r,$$node:this.editorNode,ref:this.wrapperRef})))},l.displayName=s.displayName,l.propsList=(s&&s.propsList||[]).concat(["$$id"]),l.contextType=Et,a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],l.prototype,"wrapperRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,"function"==typeof(c=void 0!==e.Schema&&e.Schema)?c:Object,Object]),a.__metadata("design:returntype",void 0)],l.prototype,"renderChild",null),a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],l)}(F.default.Component)}(this,n,r)},n.prototype.makeSchemaFormRender=function(e){return function(e,t){var n=a.__assign(a.__assign({},e.env),{session:"schema-form"});return function(r){var o=r.value,i=r.onChange,s=r.popOverContainer,d=r.id,l=r.store,c=r.node,u=a.__assign({},e.store.ctx);if((null==t?void 0:t.panelById)&&(null==t?void 0:t.panelById)!==(null==c?void 0:c.id))return F.default.createElement(F.default.Fragment,null);d&&Object.defineProperty(u,"__props__",{get:function(){var e,t=l.getNodeById(d);return(null===(e=null==t?void 0:t.getComponent())||void 0===e?void 0:e.props)||{}}});var p="".concat(d,"-").concat(null==c?void 0:c.type).concat(t.formKey?"-":"").concat(t.formKey?t.formKey:"");return F.default.createElement(xt,{key:p,propKey:p,api:t.api,definitions:t.definitions,body:t.body?U.default(Array.isArray(t.body)?t.body:[t.body]):void 0,controls:t.controls?U.default(Array.isArray(t.controls)?t.controls:[t.controls]):void 0,value:o,ctx:u,pipeIn:t.pipeIn,pipeOut:t.pipeOut,submitOnChange:t.submitOnChange,onChange:i,env:n,popOverContainer:s,node:c,manager:e,justify:t.justify})}}(this,e)},n.prototype.onWidthChangeStart=function(e,t){return this.trigger("width-change-start",a.__assign(a.__assign({},t),{nativeEvent:e}))},n.prototype.onHeightChangeStart=function(e,t){return this.trigger("height-change-start",a.__assign(a.__assign({},t),{nativeEvent:e}))},n.prototype.onSizeChangeStart=function(e,t){return this.trigger("size-change-start",a.__assign(a.__assign({},t),{nativeEvent:e}))},n.prototype.openNodePopOverForm=function(e){var t,a,n,r,o="string"==typeof e?this.store.getNodeById(e):e;if(o&&((null===(a=null===(t=o.info)||void 0===t?void 0:t.plugin)||void 0===a?void 0:a.popOverBody)||(null===(r=null===(n=o.info)||void 0===n?void 0:n.plugin)||void 0===r?void 0:r.popOverBodyCreator))){var i=o.info.plugin,s=this.store,d={body:i.popOverBodyCreator?i.popOverBodyCreator(this.buildEventContext(o)):i.popOverBody,value:s.getValueOf(o.id),callback:this.panelChangeValue,target:function(){return document.querySelector('[data-editor-id="'.concat(o.id,'"]'))}};s.openPopOverForm(d)}},n.prototype.addBroadcast=function(e){this.broadcasts.push(e)},n.prototype.removeBroadcast=function(e){var t=V.default(this.broadcasts,(function(t){return t.eventName===e}));this.broadcasts.splice(t,1)},n.prototype.getContextSchemas=function(e,t){var n,r,o,i,s;return void 0===t&&(t=!1),a.__awaiter(this,void 0,void 0,(function(){var d,l,c,u,p,f,h,m,g,v,b,y;return a.__generator(this,(function(_){switch(_.label){case 0:if(!(d="string"==typeof e?this.store.getNodeById(e):e))return[2,[]];for(c=d,u=d,p=d;!l&&c;)f=null===(n=c.info)||void 0===n?void 0:n.id,v=null===(r=c.info)||void 0===r?void 0:r.type,l=this.dataSchema.hasScope("".concat(f,"-").concat(v))?this.dataSchema.getScope("".concat(f,"-").concat(v)):void 0,(null==(c=c.parent)?void 0:c.isRegion)&&(u=c);_.label=1;case 1:return l?(m=a.__read(l.id.split("-"),2),g=m[0],v=m[1],b=this.store.getNodeById(g,v),h||!b||b.isSecondFactor||(h=l),[4,null===(s=null===(i=null===(o=null==b?void 0:b.info)||void 0===o?void 0:o.plugin)||void 0===i?void 0:i.buildDataSchemas)||void 0===s?void 0:s.call(i,b,u,p)]):[3,3];case 2:return(y=_.sent())&&(l.removeSchema(y.$id),l.addSchema(y)),l=t?void 0:l.parent,[3,1];case 3:return(null==h?void 0:h.id)&&this.dataSchema.switchTo(h.id),[2,t?this.dataSchema.current.schemas:this.dataSchema.getSchemas()]}}))}))},n.prototype.getAvailableContextFields=function(e){var t,n;return a.__awaiter(this,void 0,void 0,(function(){var r,o,i,s,d,l;return a.__generator(this,(function(c){if(!e)return[2];for(o=e;!r&&o;)r=this.dataSchema.hasScope("".concat(o.id,"-").concat(o.type))?this.dataSchema.getScope("".concat(o.id,"-").concat(o.type)):void 0,null==(o=o.parent)||o.isRegion;for(;r;){if(i=a.__read(r.id.split("-"),2),s=i[0],d=i[1],l=this.store.getNodeById(s,d))return[2,null===(n=null==l?void 0:(t=l.info.plugin).getAvailableContextFields)||void 0===n?void 0:n.call(t,l,e)];r=r.parent}return[2]}))}))},n.prototype.beforeDispatchEvent=function(e,t,a,n,r,o){var i,s,d,l;null==e||e(t,a,n,r,o);var c=a.props.$$id||(null===(i=a.props.$$editor)||void 0===i?void 0:i.id);if(c){var u=this.store.getNodeById(c,a.props.type);null===(l=null===(d=null===(s=null==u?void 0:u.info)||void 0===s?void 0:s.plugin)||void 0===d?void 0:d.rendererBeforeDispatchEvent)||void 0===l||l.call(d,u,t,ge(r))}},n.prototype.dispose=function(){this.trigger("dispose",{data:this}),this.toDispose.forEach((function(e){return e()})),this.toDispose=[],this.plugins.forEach((function(e){var t;return null===(t=e.dispose)||void 0===t?void 0:t.call(e)})),this.plugins.splice(0,this.plugins.length),this.listeners.splice(0,this.listeners.length),this.broadcasts.splice(0,this.broadcasts.length),this.lazyPatchSchema.cancel(),this.dnd.dispose()},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,Object]),a.__metadata("design:returntype",void 0)],n.prototype,"panelChangeValue",null),n}(),Lt=function(n){function r(){var r,o,i=this;return(i=n.apply(this,a.__spreadArray([],a.__read(arguments),!1))||this).env=a.__assign(a.__assign(a.__assign(a.__assign({},i.props.manager.env),{notify:function(a,n){i.props.editable?console.warn("[Notify]",a,n):e.toast[a]?e.toast[a](n,"error"===a?t.i18n("a71002967924a83e32b38a80705290fb"):t.i18n("058ebdf2884474ebff2977ba2f0e275e")):console.warn("[Notify]",a,n)},theme:i.props.theme,session:"preview-".concat(i.props.manager.id),rendererResolver:i.rendererResolver}),i.props.manager.env),null===(o=(r=i.props).envCreator)||void 0===o?void 0:o.call(r,i.props)),i}var o;return a.__extends(r,n),r.prototype.componentDidMount=function(){var e=p.findDOMNode(this);if(e.addEventListener("mouseleave",this.handleMouseLeave),e.addEventListener("mousemove",this.handleMouseMove),e.addEventListener("click",this.handleClick),e.addEventListener("mouseover",this.handeMouseOver),this.props.autoFocus){var t=this.props.manager.store;setTimeout((function(){if(f.isAlive(t)){var e=c.findTree(t.outline,(function(e){return!e.isRegion&&e.clickable}));e&&t.setActiveId(e.id)}}),350)}else this.props.manager.buildRenderersAndPanels()},r.prototype.componentWillUnmount=function(){var e=p.findDOMNode(this);e.removeEventListener("mouseleave",this.handleMouseLeave),e.removeEventListener("mousemove",this.handleMouseMove),e.removeEventListener("click",this.handleClick),e.removeEventListener("mouseover",this.handeMouseOver)},r.prototype.contentsRef=function(t){var a,n=this;this.dom=t,t?(this.syncIframeHeight(),this.unSensor=e.resizeSensor(t,(function(){n.syncIframeHeight()}))):(null===(a=this.unSensor)||void 0===a||a.call(this),delete this.unSensor)},r.prototype.syncIframeHeight=function(){var e=this.props.manager;this.dom&&(e.store.getIframe().style.cssText+="height: ".concat(this.dom.offsetHeight,"px"))},r.prototype.handleClick=function(e){var t=this.props.store,a=e.target.closest("[data-editor-id]");if(!e.defaultPrevented&&(a&&t.setActiveId(a.getAttribute("data-editor-id")),this.props.editable)){var n=this.props.manager.trigger("prevent-click",{data:e});n.prevented||n.stoped||(e.preventDefault(),e.stopPropagation())}},r.prototype.handleMouseMove=function(e){var t=this.props.store,a=e.target.closest("[data-editor-id]");a&&t.setHoverId(a.getAttribute("data-editor-id"))},r.prototype.handleMouseLeave=function(){this.props.store.setHoverId("")},r.prototype.handeMouseOver=function(e){this.props.editable&&(e.preventDefault(),e.stopPropagation())},r.prototype.handleDragEnter=function(e){this.props.manager.dnd.dragEnter(e.nativeEvent)},r.prototype.handleDragLeave=function(e){this.props.manager.dnd.dragLeave(e.nativeEvent)},r.prototype.handleDragOver=function(e){this.props.manager.dnd.dragOver(e.nativeEvent)},r.prototype.handleDrop=function(e){this.props.manager.dnd.drop(e.nativeEvent)},r.prototype.handleContextMenu=function(e){var t,a=null===(t=e.target.closest("[data-editor-id]"))||void 0===t?void 0:t.getAttribute("data-editor-id"),n="";if(!a){var r=e.target.closest("[data-node-id]");if(!(a=null==r?void 0:r.getAttribute("data-node-id")))return;n=r.getAttribute("data-node-region")}e.preventDefault(),e.stopPropagation();var o=this.props.manager,i=o.store.getIframe().getBoundingClientRect();o.parent.openContextMenu(a,n,{x:window.scrollX+e.clientX+i.left,y:window.scrollY+e.clientY+i.top})},r.prototype.rendererResolver=function(t,n,r){var o=this.props,i=o.editable,s=o.manager,d=e.resolveRenderer(t,n);if(!1===i)return d;d=d||{name:"error",test:function(){return!0},component:mt};var l=s.getEditorInfo(d,t,n);return r&&r.store&&r.store.data&&s.updateAMISContext(r.store.data),l&&(d=a.__assign(a.__assign({},d),{component:s.makeWrapper(l,d)})),d},r.prototype.render=function(){var n=this.props,r=n.store,o=n.editable;n.manager;var i=n.className,s=n.schema,d=n.data,l=a.__rest(n,["store","editable","manager","className","schema","data"]);return F.default.createElement("div",{ref:this.contentsRef,onContextMenu:this.handleContextMenu,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop,className:B.default("ae-IFramePreview",i,o?"is-edting":"")},e.render(s||{type:"tpl",tpl:t.i18n("88f000a0fdc38ce3808cef072b00893c")},a.__assign(a.__assign({},l),{key:o?"edit-mode":"preview-mode",theme:this.env.theme,data:null!=d?d:r.ctx}),this.env))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"contentsRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handleMouseMove",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleMouseLeave",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handeMouseOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragEnter",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragLeave",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDrop",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleContextMenu",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,"function"==typeof(o=void 0!==e.Schema&&e.Schema)?o:Object,Object]),a.__metadata("design:returntype",void 0)],r.prototype,"rendererResolver",null),r}(F.default.Component),zt=function(e){function t(t){var a=e.call(this,t)||this,n="__amis_editor_bridge_fn_".concat(ae());return window[n]=function(e){return delete window[n],a.bridge=e,a.update(t),t.manager},a.bridgeFnName=n,a}return a.__extends(t,e),t.prototype.componentDidUpdate=function(){this.update()},t.prototype.componentWillUnmount=function(){var e=this.props.store;f.isAlive(e)&&e.setDoc(document)},t.prototype.iframeRef=function(e){var t=this.props.store;f.isAlive(t)&&t.setIframe(e)},t.prototype.update=function(e){var t;void 0===e&&(e=this.props);var n=e.editable,r=e.store;null===(t=this.bridge)||void 0===t||t.update(a.__assign(a.__assign({},e),{schema:n?r.filteredSchema:r.filteredSchemaForPreview}))},t.prototype.render=function(){var e=this.props,t=e.url,a=e.manager,n=e.className,r=e.editable,o=e.store;return this.schema=r?o.filteredSchema:o.filteredSchemaForPreview,F.default.createElement("iframe",{ref:this.iframeRef,className:n,id:a.id,src:"".concat(t,"#").concat(this.bridgeFnName)})},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],t.prototype,"iframeRef",null),t=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],t)}(F.default.PureComponent),Ht=function(e){function n(n){var r=e.call(this,n)||this;r.state={},r.inited=!1;var o=n.bridgeName,i=parent[o];if("function"!=typeof i)throw new Error(t.i18n("3b6d5995e9f2ecd3df059b3f1bea201e"));var s=i({update:function(e){return r.inited?r.setState(a.__assign({},e)):r.state=a.__assign({},e)}});if(!s)throw new Error(t.i18n("09f33be5ec04eb48b3102e4e31af5b38"));s.store.setDoc(document);var d=new jt(s.config,s.store,s);return r.manager=d,r.inited=!0,r}return a.__extends(n,e),n.prototype.componentWillUnmount=function(){var e=this.manager;e.toDispose.forEach((function(e){return e()})),e.toDispose=[],e.listeners.splice(0,e.listeners.length),e.lazyPatchSchema.cancel()},n.prototype.render=function(){return F.default.createElement(Lt,a.__assign({},this.state,{manager:this.manager,store:this.manager.store,envCreator:this.props.envCreator}))},n}(F.default.Component);var $t,Kt=function(e){function t(t){var a=e.call(this,t)||this;return a.ref=F.default.createRef(),a.scrollElem=null,a.state={visible:void 0!==t.visible&&t.visible},a}return a.__extends(t,e),t.prototype.componentDidMount=function(){this.bindScrollEvent()},t.prototype.componentWillUnmount=function(){this.scrollElem&&this.scrollElem.removeEventListener("scroll",this.handleScroll)},t.prototype.getDefaultTarget=function(){return this.ref.current&&this.ref.current.ownerDocument?this.ref.current.ownerDocument:window},t.prototype.handleScroll=function(e){var t=this.props.visibilityHeight||400,a=function(e,t){var a;if("undefined"==typeof window)return 0;var n,r=t?"scrollTop":"scrollLeft",o=0,i=null!=(n=e)&&n===n.window;return i?o=e[t?"pageYOffset":"pageXOffset"]:e instanceof Document?o=e.documentElement[r]:e&&(o=e[r]),e&&!i&&"number"!=typeof o&&(o=null===(a=(e.ownerDocument||e).documentElement)||void 0===a?void 0:a[r]),o}(e.target,!0);this.setState({visible:a>t})},t.prototype.bindScrollEvent=function(){var e=this.props.target;this.scrollElem=e()||this.getDefaultTarget(),this.scrollElem&&(this.scrollElem.addEventListener("scroll",this.handleScroll),this.handleScroll({target:this.scrollElem}))},t.prototype.scrollToTop=function(e){var t=this.props.onClick;this.scrollElem&&(this.scrollElem.scrollTo({top:0,behavior:"smooth"}),"function"==typeof t&&t(e))},t.prototype.render=function(){var e=this.props,t=e.children,n=e.className,r=void 0===n?"":n,o=B.default("editor-backTop",r,this.state.visible?"":"hidden"),i=X.default(this.props,["className","children","visibilityHeight","target","visible"]),s=F.default.createElement("div",{className:"backTop-content"},F.default.createElement("div",{className:"backTop-icon"},"UP"));return F.default.createElement("div",a.__assign({},i,{className:o,onClick:this.scrollToTop,ref:this.ref}),t||s)},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],t.prototype,"getDefaultTarget",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],t.prototype,"handleScroll",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],t.prototype,"bindScrollEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],t.prototype,"scrollToTop",null),t}(F.default.Component),Vt=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.env=a.__assign(a.__assign({},r.props.manager.env),{notify:function(a,n,o){r.props.editable?console.warn("[Notify]",a,n):e.toast[a]?e.toast[a](n,o||("error"===a?t.i18n("a71002967924a83e32b38a80705290fb"):t.i18n("058ebdf2884474ebff2977ba2f0e275e"))):console.warn("[Notify]",a,n)},theme:r.props.theme,session:"preview-".concat(r.props.manager.id),rendererResolver:r.rendererResolver.bind(r)}),r.doingSelection=!1,r.unReaction=We((function(){return[r.getHighlightNodes(),r.props.store.activeId]}),(function(e,t){var n=a.__read(e,1)[0],o=r.props.store;setTimeout((function(){r.calculateHighlightBox(n)}),50);var i=null==t?void 0:t[0];Array.isArray(i)&&(i=i.filter((function(e){return!~n.indexOf(e)})),o.resetHighlightBox(i))})),r}return a.__extends(r,n),r.prototype.componentDidMount=function(){this.currentDom=p.findDOMNode(this),this.currentDom.addEventListener("mouseleave",this.handleMouseLeave),this.currentDom.addEventListener("mousemove",this.handleMouseMove),this.currentDom.addEventListener("click",this.handleClick),this.currentDom.addEventListener("mouseover",this.handeMouseOver),this.currentDom.addEventListener("mousedown",this.handeMouseDown),this.props.manager.on("after-update",this.handlePanelChange)},r.prototype.componentWillUnmount=function(){var e,t=this;this.currentDom&&(this.currentDom.removeEventListener("mouseleave",this.handleMouseLeave),this.currentDom.removeEventListener("mousemove",this.handleMouseMove),this.currentDom.removeEventListener("click",this.handleClick),this.currentDom.removeEventListener("mouseover",this.handeMouseOver),this.currentDom.removeEventListener("mousedown",this.handeMouseDown),this.props.manager.off("after-update",this.handlePanelChange)),null===(e=this.scrollLayer)||void 0===e||e.removeEventListener("scroll",this.handlePanelChange),setTimeout((function(){return c.clearStoresCache([t.env.session])}),500)},r.prototype.contentsRef=function(t){var a;t?(this.scrollLayer=t,this.scrollLayer.addEventListener("scroll",this.handlePanelChange),this.layer=t.querySelector(".ae-Preview-widgets"),this.props.store.setLayer(this.layer),this.unSensor=e.resizeSensor(t,this.handlePanelChange)):(delete this.scrollLayer,delete this.layer,null===(a=this.unSensor)||void 0===a||a.call(this),delete this.unSensor)},r.prototype.handlePanelChange=function(){var e=this;setTimeout((function(){return e.calculateHighlightBox(e.getHighlightNodes())}),50)},r.prototype.getHighlightNodes=function(){return this.props.store.highlightNodes.map((function(e){return e.id}))},r.prototype.calculateHighlightBox=function(e){var t=this.props.store;this.layer&&t.calculateHighlightBox(e)},r.prototype.handeMouseDown=function(e){var t,a=this,n=1===e.button&&null!==window.event||0===e.button;if(this.props.editable&&n&&!e.defaultPrevented&&!e.defaultPrevented&&!(null===(t=e.target)||void 0===t?void 0:t.closest("[draggable]"))){var r=this.layer;if(r){var o=null,i=r.getBoundingClientRect(),s=e.pageX,d=e.pageY,l=s-i.left,c=d-i.top,u=function(e){o||((o=document.createElement("div")).classList.add("ae-Editor-selectionCursor"),r.appendChild(o)),a.doingSelection=!0;var t=e.pageX-s,n=e.pageY-d;o.style.cssText="left: ".concat(l+Math.min(t,0),"px; top: ").concat(c+Math.min(n,0),"px; width: ").concat(Math.abs(t),"px; height: ").concat(Math.abs(n),"px;")},p=function(e){a.doingSelection=!1,window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",p),o&&r.removeChild(o);var t=e.pageX-s,n=e.pageY-d,i={x:l+Math.min(t,0),y:c+Math.min(n,0),w:Math.abs(t),h:Math.abs(n)};if(!(i.w<10&&i.h<10)){var f=function(e){window.removeEventListener("click",f,!0),e.preventDefault(),e.stopPropagation()};window.addEventListener("click",f,!0),setTimeout((function(){return window.removeEventListener("click",f,!0)}),350),a.doSelection(i)}};window.addEventListener("mousemove",u),window.addEventListener("mouseup",p)}}},r.prototype.doSelection=function(e){var t=this.layer,a=p.findDOMNode(this);if(t&&a){var n=[],r=t.getBoundingClientRect(),o=e.x+r.left,i=e.y+r.top,s=(e.w,e.h,e.x+r.left+e.w),d=e.y+r.top+e.h,l=a.querySelectorAll("[data-editor-id]");[].slice.apply(l).forEach((function(e){if(!n.some((function(t){return t.contains(e)}))){var t=e.getBoundingClientRect();o<=t.left&&i<=t.top&&s>=t.right&&d>=t.bottom&&(~n.indexOf(e)||n.push(e))}}));var c=n.map((function(e){return e.getAttribute("data-editor-id")})).filter((function(e,t,a){return a.indexOf(e)===t}));c.length&&this.props.manager.setSelection(c)}},r.prototype.handleClick=function(e){var t,a=this.props.store,n=e.target.closest("[data-editor-id]");if(!e.target.closest(".ae-editor-action-btn"))if(e.defaultPrevented)e.stopPropagation();else{if(n){var r=n.getAttribute("data-editor-id"),o="",i=e.target.closest("[data-region-host]");if(i){var s=i.getAttribute("data-region-host");s&&s===r&&i.getAttribute("data-region")&&(o=i.getAttribute("data-region"))}e.metaKey?this.props.manager.toggleSelection(r):a.setActiveId(r,o)}if(!(null===(t=this.layer)||void 0===t?void 0:t.contains(e.target))&&this.props.editable){var d=this.props.manager.trigger("prevent-click",{data:e});d.prevented||d.stoped||(e.preventDefault(),e.stopPropagation())}}},r.prototype.handleNavSwitch=function(e){this.props.store.setActiveId(e)},r.prototype.handleMouseMove=function(e){var t;if(!this.doingSelection&&!this.props.manager.disableHover){var a=this.props.store,n=e.target;if(!(null===(t=this.layer)||void 0===t?void 0:t.contains(n))&&!e.target.closest(".ignore-hover-elem")){var r=n.closest("[data-editor-id]");if(r){var o=r.getAttribute("data-editor-id"),i="",s=e.target.closest("[data-region-host]");if(s){var d=s.getAttribute("data-region-host");d&&d===o&&s.getAttribute("data-region")&&(i=s.getAttribute("data-region"))}a.setMouseMoveRegion(i),a.setHoverId(o)}}}},r.prototype.handleMouseLeave=function(){var e=this.props.store;e.setMouseMoveRegion(""),e.setHoverId("")},r.prototype.handeMouseOver=function(e){this.props.editable&&(e.preventDefault(),e.stopPropagation())},r.prototype.handleDragEnter=function(e){this.props.manager.dnd.dragEnter(e.nativeEvent)},r.prototype.handleDragLeave=function(e){this.props.manager.dnd.dragLeave(e.nativeEvent)},r.prototype.handleDragOver=function(e){this.props.manager.dnd.dragOver(e.nativeEvent)},r.prototype.handleDrop=function(e){this.props.manager.dnd.drop(e.nativeEvent)},r.prototype.getCurrentTarget=function(){return this.props.isMobile?this.currentDom.querySelector(".ae-Preview-inner"):this.currentDom.querySelector(".ae-Preview-body")},r.prototype.rendererResolver=function(t,n,r){var o=this.props,i=o.editable,s=o.manager,d=e.resolveRenderer(t,n);if(!1===i)return d;d=d||{name:"error",test:function(){return!0},component:mt};var l=s.getEditorInfo(d,t,n);return r&&r.store&&r.store.data&&s.updateAMISContext(r.store.data),l&&(d=a.__assign(a.__assign({},d),{component:s.makeWrapper(l,d)})),d},r.prototype.render=function(){var t=this,n=this.props,r=n.className,o=n.editable,i=n.store,s=n.manager,d=n.amisEnv,l=n.theme,c=n.isMobile,u=n.iframeUrl,p=n.autoFocus,f=n.toolbarContainer,h=n.appLocale,m=a.__rest(n,["className","editable","store","manager","amisEnv","theme","isMobile","iframeUrl","autoFocus","toolbarContainer","appLocale"]),g=a.__assign(a.__assign({},this.env),d);return F.default.createElement("div",{id:"editor-preview-body",onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDragOver:this.handleDragOver,onDrop:this.handleDrop,className:B.default("ae-Preview",r,c?"is-mobile-body hoverShowScrollBar":"is-pc-body")},F.default.createElement("div",{className:B.default("ae-Preview-body",r,o?"is-edting":"",c?"is-mobile":"is-pc hoverShowScrollBar"),ref:this.contentsRef},u&&c&&F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:"mobile-sound"}),F.default.createElement("div",{className:"mobile-receiver"}),F.default.createElement("div",{className:"mobile-left-btn"}),F.default.createElement("div",{className:"mobile-right-btn"}),F.default.createElement("div",{className:"mobile-open-btn"})),F.default.createElement("div",{className:"ae-Preview-inner"},u&&c?F.default.createElement(zt,a.__assign({},m,{key:"mobile",className:"ae-PreviewFrame",editable:o,isMobile:c,store:i,env:g,manager:s,url:u,theme:l,autoFocus:p})):F.default.createElement(Ut,a.__assign({},m,{editable:o,autoFocus:p,store:i,env:g,manager:s,key:"pc",appLocale:h})),u&&c&&i.contextId?F.default.createElement("span",{className:"ae-IframeMask"}):null,F.default.createElement("div",{className:"ae-Preview-widgets",id:"aePreviewHighlightBox"},i.highlightNodes.map((function(e){return F.default.createElement(ft,{node:e,key:e.id,store:i,id:e.id,title:e.label,toolbarContainer:f,onSwitch:t.handleNavSwitch,manager:s},e.childRegions.map((function(t){return!e.memberImmutable(t.region)&&i.isRegionActive(t.id,t.region)?F.default.createElement(ht,{manager:s,key:t.region,store:i,node:t,id:t.id,name:t.region,title:t.label,preferTag:t.preferTag,isOnlyChildRegion:1===e.childRegions.length}):null})))})))),this.currentDom&&F.default.createElement(Kt,{key:c?"mobile-back-up":"pc-back-up",className:"ae-editor-action-btn",target:this.getCurrentTarget.bind(this),onClick:function(e){console.log(e)}},F.default.createElement(e.Icon,{icon:"back-up",className:"back-top-icon"}))))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"contentsRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handlePanelChange",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Array]),a.__metadata("design:returntype",void 0)],r.prototype,"calculateHighlightBox",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handeMouseDown",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleNavSwitch",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handleMouseMove",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleMouseLeave",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[MouseEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handeMouseOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragEnter",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragLeave",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDrop",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"getCurrentTarget",null),r=a.__decorate([u.observer],r)}(n.Component),Ut=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(n,t),n.prototype.componentDidMount=function(){var e=this.props.store;this.props.autoFocus?setTimeout((function(){if(f.isAlive(e)){var t=c.findTree(e.outline,(function(e){return!e.isRegion&&e.clickable}));t&&f.isAlive(e)&&e.setActiveId(t.id)}}),350):this.props.manager.buildRenderersAndPanels()},n.prototype.componentDidUpdate=function(e){var t=this.props;t.editable!==e.editable&&t.editable&&this.props.manager.trigger("preview2editor",{data:this.props.manager})},n.prototype.render=function(){var t=this.props,n=t.editable,r=t.store,o=t.appLocale;t.autoFocus;var i=t.env,s=t.data;t.manager;var d=a.__rest(t,["editable","store","appLocale","autoFocus","env","data","manager"]);return e.render(n?r.filteredSchema:r.filteredSchemaForPreview,a.__assign(a.__assign({},d),{key:n?"edit-mode":"preview-mode",theme:i.theme,data:null!=s?s:r.ctx,locale:o}),i)},n=a.__decorate([u.observer],n)}(F.default.Component),Wt=function(t){function n(e){var n=t.call(this,e)||this;return n.env=a.__assign({session:"preview"},n.props.env),n.state={scale:!0},n.rootRef=n.rootRef.bind(n),n.syncHeight=n.syncHeight.bind(n),n.handleClick=n.handleClick.bind(n),n}return a.__extends(n,t),n.prototype.componentWillUnmount=function(){this.unSensor&&this.unSensor()},n.prototype.rootRef=function(t){var a;this.ref=t,t&&(this.syncHeight(),this.unSensor=e.resizeSensor(null===(a=t.firstChild)||void 0===a?void 0:a.firstChild,this.syncHeight))},n.prototype.syncHeight=function(){if(this.ref){var e=this.state.scale,t=this.ref.firstChild;this.ref.style.cssText="height: ".concat(t.scrollHeight/(e?2:1),"px;")}},n.prototype.handleClick=function(e){e.preventDefault(),this.setState({scale:!this.state.scale})},n.prototype.render=function(){var t=this,n=this.props,r=n.schema,o=n.theme;return F.default.createElement(c.LazyComponent,{unMountOnHidden:!1,schema:r,component:function(n){var r=n.schema;return F.default.createElement("div",{className:"ae-RenderersPicker-thumb ".concat(t.state.scale?"is-scaled":"")},F.default.createElement("div",{className:"ae-Editor-rendererThumbWrap"},F.default.createElement("div",{className:"ae-Editor-rendererThumbIcon",onClick:t.handleClick},F.default.createElement(e.Icon,{icon:t.state.scale?"zoom-in":"zoom-out"})),F.default.createElement("div",{ref:t.rootRef,className:"ae-Editor-rendererThumb"},F.default.createElement("div",{className:"ae-Editor-rendererThumbInner"},e.render(a.__assign(a.__assign({},r),{mode:"horizontal"===r.mode?"normal":r.mode}),{theme:o},t.env)))))}})},n}(F.default.Component),qt=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return a.__extends(r,n),r.prototype.handleLeftClick=function(e){var t=e.currentTarget.getAttribute("data-value");this.props.store.setInsertTag(t)},r.prototype.handleClick=function(e){var t=e.currentTarget.getAttribute("data-value");this.props.store.setInsertSelected(t)},r.prototype.hadnlDBClick=function(e){var t=e.currentTarget.getAttribute("data-value"),a=this.props.store;a.setInsertSelected(t);var n=this.props.manager;"replace"===a.insertMode?n.replace():n.insert()},r.prototype.handleInsert=function(){this.props.manager.insert()},r.prototype.handleReplace=function(){this.props.manager.replace()},r.prototype.handleCancel=function(){this.props.store.closeInsertPanel()},r.prototype.render=function(){var a,n,r=this,o=this.props.store,i=this.props.manager,s=null===(a=o.getNodeById(o.insertId))||void 0===a?void 0:a.info,d=null===(n=H.default(s.regions,(function(e){return e.key===o.insertRegion})))||void 0===n?void 0:n.label,l=o.groupedInsertRenderers,c=Object.keys(l),u=o.insertTag||t.i18n("a8b0c20416853bda54120bf19477ad11"),p=l[u]||l[t.i18n("a8b0c20416853bda54120bf19477ad11")];return F.default.createElement("div",{className:"ae-InsertPanel"},"replace"===o.insertMode?F.default.createElement("div",{className:"ae-InsertPanel-title"},"更改组件类型"):F.default.createElement("div",{className:"ae-InsertPanel-title"},F.default.createElement("span",null,"选中组件插入到")," ",F.default.createElement("code",null,s.name," > ",d)),F.default.createElement("div",{className:"m-b-xs"},F.default.createElement(e.InputBox,{className:"editor-InputSearch",value:o.insertRenderersKeywords,onChange:o.changeInsertRenderersKeywords,placeholder:t.i18n("d87481b371771b4f150da76e311bbbef"),clearable:!1},o.insertRenderersKeywords?F.default.createElement("a",{onClick:o.resetInsertRenderersKeywords},F.default.createElement(e.Icon,{icon:"close",className:"icon"})):F.default.createElement(e.Icon,{icon:"search",className:"icon"}))),F.default.createElement("div",{className:"ae-RenderersPicker-list"},F.default.createElement("ul",null,c.map((function(e){return F.default.createElement("li",{key:e,className:u===e?"is-active":""},F.default.createElement("a",{"data-value":e,onClick:r.handleLeftClick},e))}))),F.default.createElement("div",{className:"ae-RenderersPicker-content"},Array.isArray(p)&&p.length?F.default.createElement("ul",null,p.map((function(a){return F.default.createElement("li",{key:a.id,className:o.insertSelected===a.id?"is-active":"","data-value":a.id,onClick:r.handleClick,onDoubleClick:r.hadnlDBClick},F.default.createElement(Wt,{theme:i.env.theme,env:i.env,schema:a.previewSchema||{type:"tpl",tpl:t.i18n("becdc848350872592201e31bab03892a")}}),F.default.createElement("div",{className:"ae-RenderersPicker-info"},F.default.createElement("h4",null,a.name),F.default.createElement("div",null,F.default.createElement(e.Html,{html:a.description}),a.docLink?F.default.createElement("a",{target:"_blank",href:o.amisDocHost+a.docLink},F.default.createElement("span",null,"详情")):null)))}))):F.default.createElement("div",null,"没有可用组件，也许你该切换容器试试。"))),F.default.createElement("div",{className:"ae-InsertPanel-footer"},"replace"===o.insertMode?F.default.createElement(e.Button,{className:"action-btn action-btn-primary",onClick:this.handleReplace,disabled:!o.insertSelected,level:"primary"},"替换"):F.default.createElement(e.Button,{className:"action-btn action-btn-primary",onClick:this.handleInsert,disabled:!o.insertSelected,level:"primary"},"插入"),F.default.createElement(e.Button,{className:"action-btn",onClick:this.handleCancel},"取消")))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleLeftClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"hadnlDBClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleInsert",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleReplace",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleCancel",null),r=a.__decorate([u.observer],r)}(F.default.Component);function Zt(){return Zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Zt.apply(this,arguments)}var Jt;function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Yt.apply(this,arguments)}var Gt;function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Xt.apply(this,arguments)}var Qt;function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ea.apply(this,arguments)}var ta;function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},aa.apply(this,arguments)}var na;function ra(){return ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ra.apply(this,arguments)}var oa,ia,sa;function da(){return da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},da.apply(this,arguments)}var la,ca,ua;function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pa.apply(this,arguments)}var fa,ha,ma,ga,va,ba,ya,_a;function Ea(){return Ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ea.apply(this,arguments)}var wa;function Sa(){return Sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sa.apply(this,arguments)}var Ca;function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xa.apply(this,arguments)}var Ia;function Ra(){return Ra=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ra.apply(this,arguments)}var Oa;function Na(){return Na=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Na.apply(this,arguments)}var ka;function Aa(){return Aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Aa.apply(this,arguments)}var Ma;function Da(){return Da=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Da.apply(this,arguments)}var Fa;function Pa(){return Pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Pa.apply(this,arguments)}var Ba;function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ta.apply(this,arguments)}var ja,La;function za(){return za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},za.apply(this,arguments)}var Ha,$a,Ka;function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Va.apply(this,arguments)}var Ua;function Wa(){return Wa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Wa.apply(this,arguments)}var qa;function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Za.apply(this,arguments)}var Ja;function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Ya.apply(this,arguments)}var Ga;function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Xa.apply(this,arguments)}var Qa;function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},en.apply(this,arguments)}var tn,an;function nn(){return nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},nn.apply(this,arguments)}var rn;function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},on.apply(this,arguments)}var sn;function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},dn.apply(this,arguments)}var ln;function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},cn.apply(this,arguments)}var un;function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pn.apply(this,arguments)}var fn;function hn(){return hn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},hn.apply(this,arguments)}var mn;function gn(){return gn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},gn.apply(this,arguments)}var vn;function bn(){return bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},bn.apply(this,arguments)}var yn;function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_n.apply(this,arguments)}var En,wn;function Sn(){return Sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Sn.apply(this,arguments)}var Cn;function xn(){return xn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},xn.apply(this,arguments)}var In,Rn=function(e){return P.createElement("svg",xn({viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Cn||(Cn=P.createElement("path",{d:"m12.233 5-4.24 4.24L3.753 5l-.713.713 4.95 4.95.003-.003.003.003 4.95-4.95z"})))};function On(){return On=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},On.apply(this,arguments)}var Nn;function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},kn.apply(this,arguments)}var An;function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Mn.apply(this,arguments)}var Dn;function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fn.apply(this,arguments)}var Pn;function Bn(){return Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Bn.apply(this,arguments)}var Tn;function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},jn.apply(this,arguments)}var Ln;function zn(){return zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},zn.apply(this,arguments)}var Hn;function $n(){return $n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$n.apply(this,arguments)}var Kn;function Vn(){return Vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Vn.apply(this,arguments)}var Un;function Wn(){return Wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Wn.apply(this,arguments)}var qn;function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Zn.apply(this,arguments)}e.registerIcon("arrow-to-right",(function(e){return P.createElement("svg",Zt({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),$t||($t=P.createElement("path",{d:"M755.627 481.707 584.96 311.04a42.667 42.667 0 1 0-60.587 60.587l98.134 97.706H128a42.667 42.667 0 0 0 0 85.334h494.507l-98.134 97.706a42.667 42.667 0 0 0 0 60.587 42.667 42.667 0 0 0 60.587 0l170.667-170.667a42.667 42.667 0 0 0 8.96-14.08 42.667 42.667 0 0 0 0-32.426 42.667 42.667 0 0 0-8.96-14.08zM896 170.667a42.667 42.667 0 0 0-42.667 42.666v597.334a42.667 42.667 0 0 0 85.334 0V213.333A42.667 42.667 0 0 0 896 170.667z"})))})),e.registerIcon("left-arrow-to-left",(function(e){return P.createElement("svg",Yt({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Jt||(Jt=P.createElement("path",{d:"M896 469.333H401.493l98.134-97.706a42.667 42.667 0 1 0-60.587-60.587L268.373 481.707a42.667 42.667 0 0 0-8.96 14.08 42.667 42.667 0 0 0 0 32.426 42.667 42.667 0 0 0 8.96 14.08L439.04 712.96a42.667 42.667 0 0 0 60.587 0 42.667 42.667 0 0 0 0-60.587l-98.134-97.706H896a42.667 42.667 0 0 0 0-85.334zM128 128a42.667 42.667 0 0 0-42.667 42.667v682.666a42.667 42.667 0 0 0 85.334 0V170.667A42.667 42.667 0 0 0 128 128z"})))})),e.registerIcon("top-arrow-to-top",(function(e){return P.createElement("svg",Xt({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Gt||(Gt=P.createElement("path",{d:"M542.293 268.373a42.667 42.667 0 0 0-14.08-8.96 42.667 42.667 0 0 0-32.426 0 42.667 42.667 0 0 0-14.08 8.96L311.04 439.04a42.667 42.667 0 1 0 60.587 60.587l97.706-98.134V896a42.667 42.667 0 0 0 85.334 0V401.493l97.706 98.134a42.667 42.667 0 0 0 60.587 0 42.667 42.667 0 0 0 0-60.587zm268.374-183.04H213.333a42.667 42.667 0 0 0 0 85.334h597.334a42.667 42.667 0 0 0 0-85.334z"})))})),e.registerIcon("arrow-to-bottom",(function(e){return P.createElement("svg",ea({viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Qt||(Qt=P.createElement("path",{d:"M810.667 853.333H213.333a42.667 42.667 0 0 0 0 85.334h597.334a42.667 42.667 0 0 0 0-85.334zm-328.96-97.706a42.667 42.667 0 0 0 14.08 8.96 40.107 40.107 0 0 0 32.426 0 42.667 42.667 0 0 0 14.08-8.96L712.96 584.96a42.667 42.667 0 0 0-60.587-60.587l-97.706 98.134V128a42.667 42.667 0 0 0-85.334 0v494.507l-97.706-98.134a42.667 42.667 0 1 0-60.587 60.587z"})))})),e.registerIcon("collapse-open",(function(e){return P.createElement("svg",aa({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),ta||(ta=P.createElement("path",{fill:"#83868C",fillRule:"nonzero",d:"M8 11 4 6h8z"})))})),e.registerIcon("harmmer",(function(e){return P.createElement("svg",Sa({className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},e),wa||(wa=P.createElement("path",{d:"m947.9 761.4-264-263.9c-16.3-16.3-43.1-16.3-59.4 0l-19.8 19.8-161-161L708.1 91.9H428L303.6 216.2l-12.3-12.3h-59.4v59.4l12.3 12.3L63.9 456l140 140 180.3-180.3 161.1 161.1-19.8 19.8c-16.3 16.3-16.3 43.1 0 59.4l263.9 263.9c16.3 16.3 43.1 16.3 59.4 0l99-99c16.4-16.4 16.4-43.1.1-59.5z"})))})),e.registerIcon("dialog",(function(e){return P.createElement("svg",xa({className:"icon",viewBox:"0 0 1155 1024",xmlns:"http://www.w3.org/2000/svg"},e),Ca||(Ca=P.createElement("path",{d:"M1076.512 315.077H840.204V78.769A78.77 78.77 0 0 0 761.435 0H78.77A78.77 78.77 0 0 0 0 78.77V498.87a78.77 78.77 0 0 0 78.77 78.77h14.939l-9.295 23.368a78.77 78.77 0 0 0 73.124 107.913 76.879 76.879 0 0 0 38.23-9.977l119.309-66.166v181.169a78.77 78.77 0 0 0 78.769 78.769h347.188l218.453 121.305a76.879 76.879 0 0 0 38.256 9.977 78.77 78.77 0 0 0 73.15-107.914l-9.295-23.368h14.914a78.77 78.77 0 0 0 78.769-78.77V393.847a78.77 78.77 0 0 0-78.77-78.77zm-761.435 78.769v148.873l-157.539 87.434 52.513-131.282H78.77V78.77h682.666v236.308h-367.59a78.77 78.77 0 0 0-78.768 78.769zm761.435 420.102H945.23l52.513 131.282-236.308-131.282h-367.59V393.846h682.667v420.102zm-577.64-262.564h472.614a39.385 39.385 0 0 0 0-78.77H498.871a39.385 39.385 0 0 0 0 78.77zm0 157.538h472.614a39.385 39.385 0 0 0 0-78.769H498.871a39.385 39.385 0 0 0 0 78.77z"})))})),e.registerIcon("setting",(function(e){return P.createElement("svg",Ra({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ia||(Ia=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h16v16H0z"}),P.createElement("path",{d:"M11.5 2 15 8.063l-3.5 6.062h-7L1 8.063 4.5 2h7Zm-.578 1H5.077L2.155 8.064l2.922 5.06h5.845l2.924-5.06L10.922 3ZM8 6.064a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm0 1a1.001 1.001 0 0 0 0 2 1.001 1.001 0 0 0 0-2Z",fill:"#84868C",fillRule:"nonzero"}))))})),e.registerIcon("picker-icon",(function(e){return P.createElement("svg",Na({xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Oa||(Oa=P.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},P.createElement("path",{d:"M14.5 14.5h-13v-13h13v1.998"}),P.createElement("path",{d:"m12.775 4.943 1.768 1.768-1.766 1.765M13.85 6.71H8m1.694 2.525-1.768 1.768 1.766 1.766m-1.074-1.767 5.882-.001"}))))})),e.registerIcon("edit-full-btn",(function(e){return P.createElement("svg",on({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),rn||(rn=P.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinejoin:"round"},P.createElement("path",{d:"m11.536 3.05 1.414 1.414-7.778 7.779-1.395.019-.02-1.434zM9.414 4.464l2.122 2.122M1.5 14h13"}))))})),e.registerIcon("event-setting",(function(e){return P.createElement("svg",_n({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),yn||(yn=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h16v16H0z"}),P.createElement("path",{d:"M7.356 14H2.333c-.552 0-1-.504-1-1.125v-9.75c0-.621.448-1.125 1-1.125h11.334c.552 0 1 .504 1 1.125v4.522",stroke:"#151B26",strokeLinecap:"round",strokeLinejoin:"round"}),P.createElement("path",{d:"M1.333 3a1 1 0 0 1 1-1h11.334a1 1 0 0 1 1 1v3H1.333V3Z",stroke:"#151B26"}),P.createElement("path",{d:"M3.333 3.333a.667.667 0 1 1 0 1.334.667.667 0 0 1 0-1.334Zm2 0a.667.667 0 1 1 0 1.334.667.667 0 0 1 0-1.334Z",fill:"#151B26",fillRule:"nonzero"}),P.createElement("g",{stroke:"#151B26",strokeLinejoin:"round"},P.createElement("path",{d:"m13.192 14.017 1.5-2.5-1.5-2.5h-3l-1.5 2.5 1.5 2.5z"}),P.createElement("path",{d:"M11.692 12.42a.912.912 0 0 0 .92-.903.912.912 0 0 0-.92-.903.912.912 0 0 0-.921.903c0 .498.412.903.92.903Z"})))))})),e.registerIcon("add-btn",(function(e){return P.createElement("svg",dn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),sn||(sn=P.createElement("path",{d:"M8.5 2v5.5H14v1H8.5V14h-1V8.5H2v-1h5.5V2h1Z",fill:"currentColor",fillRule:"evenodd"})))})),e.registerIcon("close-btn",(function(e){return P.createElement("svg",cn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),ln||(ln=P.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",d:"M13.664 10.507 8.007 4.85 2.35 10.507",fill:"none",fillRule:"evenodd"})))})),e.registerIcon("open-btn-r",(function(e){return P.createElement("svg",pn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),un||(un=P.createElement("path",{stroke:"currentColor",strokeLinejoin:"round",d:"m2.35 5.497 5.657 5.657 5.657-5.657",fill:"none",fillRule:"evenodd"})))})),e.registerIcon("delete-easy-btn",(function(e){return P.createElement("svg",hn({viewBox:"0 0 17 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),fn||(fn=P.createElement("path",{d:"M14.333 3.499V4.5H12.83l.001 10h-9v-10H2.332V3.499h12ZM11.831 4.5h-7v9h7v-9Zm-4.5 2.999v4h-1v-4h1Zm3 0v4h-1v-4h1Zm.001-5.999v.999h-4V1.5h4Z",fill:"currentColor",fillRule:"evenodd"})))})),e.registerIcon("delete-bold-btn",(function(e){return P.createElement("svg",gn({viewBox:"0 0 13 14",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),mn||(mn=P.createElement("path",{d:"M12.833 2.499V3.5H11.33l.001 10h-9v-10H.832V2.499h12ZM10.331 3.5h-7v9h7v-9Zm-4.5 2.999v4h-1v-4h1Zm3 0v4h-1v-4h1ZM8.832.5v.999h-4V.5h4Z",fill:"currentColor",fillRule:"evenodd"})))})),e.registerIcon("drag-six-circle-btn",(function(e){return P.createElement("svg",bn({viewBox:"0 0 7 12",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),vn||(vn=P.createElement("path",{d:"M5.167 10a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm-4 10a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z",fill:"#84868C",fillRule:"evenodd"})))})),e.registerIcon("drag-btn",(function(e){return P.createElement("svg",Ta({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ba||(Ba=P.createElement("g",{fill:"#FFF",fillRule:"nonzero"},P.createElement("path",{d:"m10.263 4.52-.283.283a.2.2 0 0 1-.283 0L8 3.105 6.303 4.803a.2.2 0 0 1-.283 0l-.283-.283a.2.2 0 0 1 0-.283l1.98-1.98a.4.4 0 0 1 .503-.051l.063.051 1.98 1.98a.2.2 0 0 1 0 .283ZM5.737 11.473l.283-.283a.2.2 0 0 1 .283 0L8 12.888l1.697-1.698a.2.2 0 0 1 .283 0l.283.283a.2.2 0 0 1 0 .283l-1.98 1.98a.4.4 0 0 1-.503.05l-.063-.05-1.98-1.98a.2.2 0 0 1 0-.283ZM11.48 10.263l-.283-.283a.2.2 0 0 1 0-.283L12.895 8l-1.698-1.697a.2.2 0 0 1 0-.283l.283-.283a.2.2 0 0 1 .283 0l1.98 1.98a.4.4 0 0 1 .051.503l-.051.063-1.98 1.98a.2.2 0 0 1-.283 0ZM4.546 5.737l.282.283a.2.2 0 0 1 0 .283L3.131 8l1.697 1.697a.2.2 0 0 1 0 .283l-.282.283a.2.2 0 0 1-.283 0l-1.98-1.98a.4.4 0 0 1-.051-.503l.05-.063 1.98-1.98a.2.2 0 0 1 .284 0Z"}),P.createElement("path",{d:"M8.4 3v4.7h4.7v.8H8.4V13h-.8V8.5H3.1v-.8l4.5-.001V3h.8Z"}))))})),e.registerIcon("more-btn",(function(e){return P.createElement("svg",Da({viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ma||(Ma=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h14v14H0z"}),P.createElement("circle",{fill:"#FFF",cx:2.8,cy:7,r:1}),P.createElement("circle",{fill:"#FFF",cx:11.2,cy:7,r:1}),P.createElement("circle",{fill:"#FFF",cx:7,cy:7,r:1}))))})),e.registerIcon("copy-btn",(function(e){return P.createElement("svg",Aa({viewBox:"0 0 15 15",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),ka||(ka=P.createElement("path",{d:"M11 1.6a2.4 2.4 0 0 1 2.394 2.236L13.4 4v5a2.4 2.4 0 0 1-2.236 2.394L11 11.4l-.633.001A2.4 2.4 0 0 1 8 13.4H4A2.4 2.4 0 0 1 1.6 11V6A2.4 2.4 0 0 1 4 3.6h.632a2.392 2.392 0 0 1 2.195-1.994L6.99 1.6H11ZM8 4.4H4A1.6 1.6 0 0 0 2.4 6v5A1.6 1.6 0 0 0 4 12.6h4A1.6 1.6 0 0 0 9.6 11V6A1.6 1.6 0 0 0 8 4.4Zm-2.2 5.7c.11 0 .2.09.2.2v.4a.2.2 0 0 1-.2.2H3.717a.2.2 0 0 1-.2-.2v-.4c0-.11.09-.2.2-.2H5.8ZM11 2.4H6.99c-.743 0-1.368.51-1.542 1.2H8A2.4 2.4 0 0 1 10.4 6l-.001 4.6H11a1.6 1.6 0 0 0 1.593-1.454L12.6 9V4a1.6 1.6 0 0 0-1.454-1.593L11 2.4ZM8.3 8.1c.11 0 .2.09.2.2v.4a.2.2 0 0 1-.2.2H3.717a.2.2 0 0 1-.2-.2v-.4c0-.11.09-.2.2-.2H8.3Zm0-2c.11 0 .2.09.2.2v.4a.2.2 0 0 1-.2.2H3.717a.2.2 0 0 1-.2-.2v-.4c0-.11.09-.2.2-.2H8.3Z",fill:"#FFF",fillRule:"nonzero"})))})),e.registerIcon("delete-btn",(function(e){return P.createElement("svg",Pa({viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Fa||(Fa=P.createElement("path",{d:"M9.25 1.1a.4.4 0 0 1 .392.32l.008.08v1.153h3.15c.11 0 .2.09.2.2v.4a.2.2 0 0 1-.2.2h-1.65v7.044a2.4 2.4 0 0 1-2.236 2.395l-.164.005h-3.5a2.4 2.4 0 0 1-2.394-2.235l-.006-.165-.001-7.044H1.2a.2.2 0 0 1-.2-.2v-.4c0-.11.09-.2.2-.2h3.149L4.35 1.5a.4.4 0 0 1 .32-.392l.08-.008h4.5Zm1.1 2.353H3.649l.001 7.044a1.6 1.6 0 0 0 1.454 1.594l.146.006h3.5a1.6 1.6 0 0 0 1.593-1.454l.007-.146V3.453ZM4.816 4.997l.4.006a.2.2 0 0 1 .198.202l-.065 5.1a.2.2 0 0 1-.202.198l-.4-.006a.2.2 0 0 1-.198-.202l.065-5.1a.2.2 0 0 1 .202-.198Zm2 0 .4.006a.2.2 0 0 1 .198.202l-.065 5.1a.2.2 0 0 1-.202.198l-.4-.006a.2.2 0 0 1-.198-.202l.065-5.1a.2.2 0 0 1 .202-.198Zm2 0 .4.006a.2.2 0 0 1 .198.202l-.065 5.1a.2.2 0 0 1-.202.198l-.4-.006a.2.2 0 0 1-.198-.202l.065-5.1a.2.2 0 0 1 .202-.198ZM8.85 1.9h-3.7v.753h3.7V1.9Z"})))})),e.registerIcon("up-btn",(function(e){return P.createElement("svg",za({viewBox:"0 0 28 29",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"icon"},e),ja||(ja=P.createElement("defs",null,P.createElement("radialGradient",{cx:"69.986%",cy:"19.319%",fx:"69.986%",fy:"19.319%",r:"49.554%",gradientTransform:"scale(-1 -.71033) rotate(-39.868 -.641 1.89)",id:"up-btn_svg__e"},P.createElement("stop",{stopColor:"#FFF",offset:"0%"}),P.createElement("stop",{stopColor:"#FFF",stopOpacity:0,offset:"100%"})),P.createElement("radialGradient",{cx:"77.918%",cy:"13.589%",fx:"77.918%",fy:"13.589%",r:"45.882%",id:"up-btn_svg__j"},P.createElement("stop",{stopColor:"#FFF",offset:"0%"}),P.createElement("stop",{stopColor:"#FFF",stopOpacity:0,offset:"100%"})),P.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"up-btn_svg__a"},P.createElement("stop",{stopColor:"#0752E9",offset:"0%"}),P.createElement("stop",{stopColor:"#2468F2",offset:"100%"})),P.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"100%",id:"up-btn_svg__g"},P.createElement("stop",{stopColor:"#0752E9",offset:"0%"}),P.createElement("stop",{stopColor:"#2468F2",offset:"100%"})),P.createElement("filter",{x:"-75%",y:"-75%",width:"250%",height:"250%",filterUnits:"objectBoundingBox",id:"up-btn_svg__c"},P.createElement("feGaussianBlur",{stdDeviation:7,in:"SourceGraphic"})),P.createElement("filter",{x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"objectBoundingBox",id:"up-btn_svg__h"},P.createElement("feGaussianBlur",{stdDeviation:2,in:"SourceGraphic"})),P.createElement("circle",{id:"up-btn_svg__f",cx:3,cy:2.5,r:2.5}),P.createElement("path",{d:"m8 0 .335.276a13.981 13.981 0 0 1 5.075 11.687c1.592 1.198 2.59 3.019 2.59 5.35 0 1.991-.727 3.812-1.93 5.212l-.72-2.16a3 3 0 0 0-2.846-2.051H5.496a3 3 0 0 0-2.846 2.051l-.72 2.16A7.969 7.969 0 0 1 0 17.314c0-2.332.998-4.153 2.59-5.352A13.977 13.977 0 0 1 7.665.276L8 0Z",id:"up-btn_svg__b"}))),La||(La=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M14 5c7.732 0 14 6.268 14 14 0 3.728-1.457 7.116-3.834 9.625A6.967 6.967 0 0 1 20 30a6.976 6.976 0 0 1-2.799-.582 10.339 10.339 0 0 1-2.974 3.889l-.113.09-.114.088a10.34 10.34 0 0 1-3.201-4.068A6.963 6.963 0 0 1 8 30c-1.56 0-3.002-.51-4.166-1.374A13.954 13.954 0 0 1 0 19C0 11.268 6.268 5 14 5Z",fill:"url(#up-btn_svg__a)",transform:"translate(0 -5)"}),P.createElement("g",{transform:"translate(6 1.5)"},P.createElement("mask",{id:"up-btn_svg__d",fill:"#fff"},P.createElement("use",{xlinkHref:"#up-btn_svg__b"})),P.createElement("use",{fill:"#F2F2FF",xlinkHref:"#up-btn_svg__b"}),P.createElement("circle",{fill:"#2468F2",filter:"url(#up-btn_svg__c)",mask:"url(#up-btn_svg__d)",cx:19,cy:-2,r:14}),P.createElement("path",{d:"m8 0 .335.276a13.981 13.981 0 0 1 5.075 11.687c1.592 1.198 2.59 3.019 2.59 5.35 0 1.991-.727 3.812-1.93 5.212l-.72-2.16a3 3 0 0 0-2.662-2.046l-.184-.005H5.496a3 3 0 0 0-2.783 1.879l-.063.172-.72 2.16A7.969 7.969 0 0 1 0 17.314c0-2.332.998-4.153 2.59-5.352A13.977 13.977 0 0 1 7.497.416L8 0Zm0 .647-.179.15a13.472 13.472 0 0 0-4.75 10.762l.018.372.017.268-.215.162C1.354 13.52.5 15.226.5 17.314c0 1.39.38 2.72 1.077 3.874l.178.28.425-1.275.069-.187a3.5 3.5 0 0 1 3.043-2.186l.204-.006h5.024l.198.006a3.5 3.5 0 0 1 3.04 2.205l.067.182.42 1.261.012-.017a7.459 7.459 0 0 0 1.236-3.818l.007-.32c0-1.992-.778-3.638-2.185-4.79l-.205-.16-.215-.163.016-.268A13.478 13.478 0 0 0 8.303.904L8 .647Z",fillOpacity:.7,fill:"url(#up-btn_svg__e)",mask:"url(#up-btn_svg__d)"})),P.createElement("g",{transform:"translate(11 6.814)"},P.createElement("mask",{id:"up-btn_svg__i",fill:"#fff"},P.createElement("use",{xlinkHref:"#up-btn_svg__f"})),P.createElement("use",{fill:"url(#up-btn_svg__g)",xlinkHref:"#up-btn_svg__f"}),P.createElement("path",{fill:"#2468F2",filter:"url(#up-btn_svg__h)",mask:"url(#up-btn_svg__i)",d:"M3-3h6v6H3z"})),P.createElement("path",{d:"M8 11.314a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Zm0 .5a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z",fillOpacity:.7,fill:"url(#up-btn_svg__j)",transform:"translate(6 -4.5)"}))))})),e.registerIcon("clear-btn",(function(e){return P.createElement("svg",Va({className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},e),Ha||(Ha=P.createElement("path",{d:"M452.225 146.9 111.637 487.488a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132L405.093 99.768a33.223 33.223 0 0 1 47.132 0 33.223 33.223 0 0 1 0 47.132zM924.232 618.735 583.644 959.323a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.06 0-47.132L877.1 571.603a33.223 33.223 0 0 1 47.132 0c13.073 13.073 12.9 34.23 0 47.132zM451.193 620.799 348.157 723.835a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.058 0-47.131L404.06 573.667a33.223 33.223 0 0 1 47.132 0c13.073 13.073 13.073 34.23 0 47.132zM298.444 524.987l-74.654 74.654a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132l74.655-74.654a33.223 33.223 0 0 1 47.131 0c12.902 13.073 12.902 34.231 0 47.132zM545.285 772l-74.654 74.653a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.058 0-47.131l74.654-74.655a33.223 33.223 0 0 1 47.132 0 33.223 33.223 0 0 1 0 47.132z"})),$a||($a=P.createElement("path",{d:"M536.34 959.323 64.505 487.66a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.9 47.132 0l471.835 471.835a33.223 33.223 0 0 1 0 47.132c-13.073 12.9-34.059 12.9-47.132-.172zM732.264 763.57 260.43 291.737a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.901 47.132 0L779.224 716.44a33.223 33.223 0 0 1 0 47.132c-12.901 13.073-34.059 12.9-46.96 0zM912.363 219.49 804.682 111.637a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.059-12.9 47.132 0l107.68 107.853a33.223 33.223 0 0 1 0 47.132c-13.072 13.073-34.23 13.073-47.131 0zM587.256 328.719 405.437 146.9a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.9 47.132 0L634.56 281.76a33.223 33.223 0 0 1 0 47.132c-13.073 12.901-34.23 12.901-47.304-.172zM877.1 618.563l-181.819-181.82a33.223 33.223 0 0 1 0-47.131c13.073-13.073 34.059-12.901 47.132 0l181.99 181.99a33.223 33.223 0 0 1 0 47.133c-13.072 12.9-34.23 12.9-47.303-.172z"})),Ka||(Ka=P.createElement("path",{d:"M959.323 219.49 742.24 436.572a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.059 0-47.132l217.082-217.082a33.223 33.223 0 0 1 47.132 0c13.073 12.901 13.073 34.059 0 47.132zM851.642 111.637 634.388 328.72a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132L804.51 64.505a33.223 33.223 0 0 1 47.132 0c13.073 13.073 12.9 34.06 0 47.132z"})))})),e.registerIcon("open-btn",Rn),e.registerIcon("merge-icon",(function(e){return P.createElement("svg",Wa({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ua||(Ua=P.createElement("g",{fillRule:"evenodd"},P.createElement("rect",{x:1,y:1,width:22,height:3,rx:1.5}),P.createElement("rect",{x:1,y:7,width:22,height:3,rx:1.5}),P.createElement("rect",{x:1,y:20,width:22,height:3,rx:1.5}),P.createElement("path",{d:"m12.376 17.07 2.398-2.74a.5.5 0 0 0-.376-.83H9.602a.5.5 0 0 0-.376.83l2.398 2.74a.5.5 0 0 0 .752 0Z"}))))})),e.registerIcon("cancel-icon",(function(e){return P.createElement("svg",Za({viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),qa||(qa=P.createElement("g",{fillRule:"evenodd"},P.createElement("path",{d:"M9 10.333v-3h12V4H9V1h13a2 2 0 0 1 2 2v5.333a2 2 0 0 1-1.85 1.995l-.15.005H9ZM2 1h7v3H0V3a2 2 0 0 1 2-2Z"}),P.createElement("path",{d:"M2 1h1v9.333H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2ZM2 13.667h1V23H2a2 2 0 0 1-2-2v-5.333a2 2 0 0 1 2-2ZM6 1h3v9.333H6zM6 13.667h3V23H6zM21 13.667h1a2 2 0 0 1 2 2V21a2 2 0 0 1-2 2h-1v-9.333Z"}),P.createElement("path",{d:"M0 7.333h9v3H2a2 2 0 0 1-2-2v-1ZM9 13.667h13a2 2 0 0 1 2 2v1H9v-3ZM2 13.667h7v3H0v-1a2 2 0 0 1 2-2ZM9 20h15v1a2 2 0 0 1-2 2H9v-3ZM0 20h9v3H2a2 2 0 0 1-2-2v-1Z"}))))})),e.registerIcon("copy-icon",(function(e){return P.createElement("svg",Ya({viewBox:"0 0 24 23",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ja||(Ja=P.createElement("g",{fillRule:"evenodd"},P.createElement("rect",{x:1.5,y:7.5,width:15,height:14,rx:2}),P.createElement("path",{d:"M6 2a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4v-2.6h3v-12H9V6H6V2Z",fillRule:"nonzero"}))))})),e.registerIcon("delete-icon",(function(e){return P.createElement("svg",Xa({viewBox:"0 0 24 23",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ga||(Ga=P.createElement("g",{fillRule:"evenodd"},P.createElement("path",{opacity:.66,d:"M11 9.5v9H8v-9zM16 9.5v9h-3v-9z"}),P.createElement("path",{d:"M16 0a2 2 0 0 1 2 2v3h4.5a1.5 1.5 0 0 1 0 3H21v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8H1.5a1.5 1.5 0 0 1 0-3H6V2a2 2 0 0 1 2-2h8Zm2 8H6v12h12V8Zm-3-5H9v2h6V3Z",fillRule:"nonzero",opacity:.6}))))})),e.registerIcon("fixed-icon",(function(e){return P.createElement("svg",en({fill:"currentColor",viewBox:"0 0 1024 1024","data-spm-anchor-id":"a1z1go8z.25060599.0.i11.71e369e4cItcn5",className:"icon"},e),Qa||(Qa=P.createElement("path",{d:"m750.848 28.928 245.248 242.944a66.048 66.048 0 1 1-93.184 93.184l-25.6-19.456-249.6 353.792 78.336 78.336a66.048 66.048 0 0 1-93.184 92.672l-460.8-464.64a66.048 66.048 0 0 1 93.184-93.184l76.8 78.336 354.048-249.856-18.176-18.944a66.048 66.048 0 1 1 93.184-93.184zM380.672 732.416l-91.904-90.88c-74.24 89.6-191.488 219.904-212.736 247.04a419.84 419.84 0 0 0-70.656 128 419.84 419.84 0 0 0 128-70.144c27.136-21.248 157.44-138.496 246.528-214.016z","data-spm-anchor-id":"a1z1go8z.25060599.0.i9.71e369e4cItcn5"})))})),e.registerIcon("no-fixed-icon",(function(e){return P.createElement("svg",nn({fill:"currentColor",viewBox:"0 0 1024 1024","data-spm-anchor-id":"a1z1go8z.25060599.0.i10.71e369e4cItcn5",className:"icon"},e),tn||(tn=P.createElement("path",{d:"M160.256 816.64C116.224 872.448 102.4 921.6 102.4 921.6s49.152-13.824 104.96-57.856c22.016-17.408 128-112.64 200.704-174.08l-73.728-73.728c-61.44 72.704-157.184 178.688-174.08 200.704zm488.448-607.232-206.336 145.92 226.304 226.304 145.92-206.336 15.872 15.872c20.992 20.992 54.784 20.992 75.776 0s20.992-54.784 0-75.776l-197.12-197.12c-20.992-20.992-54.784-20.992-75.776 0-20.992 20.992-20.992 54.784 0 75.776l15.36 15.36zm-400.896 125.44c-9.728 2.048-18.944 6.656-26.624 14.336-20.992 20.992-20.992 54.784 0 75.776L599.04 802.816c20.992 20.992 54.784 20.992 75.776 0 7.68-7.68 12.288-16.896 14.336-26.624L247.808 334.848z","data-spm-anchor-id":"a1z1go8z.25060599.0.i12.71e369e4cItcn5"})),an||(an=P.createElement("path",{d:"M840.704 879.104c-9.728 0-19.456-3.584-27.136-11.264l-657.92-657.408c-14.848-14.848-14.848-39.424 0-54.272 14.848-14.848 39.424-14.848 54.272 0l657.92 657.92c14.848 14.848 14.848 39.424 0 54.272-7.168 7.168-16.896 10.752-27.136 10.752z","data-spm-anchor-id":"a1z1go8z.25060599.0.i13.71e369e4cItcn5"})))})),e.registerIcon("editor-shortcut",(function(e){return P.createElement("svg",Zn({className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},e),qn||(qn=P.createElement("path",{d:"M32 160h960v704H32V160zm64 64v576h832V224H96zm64 160h96v64h-96v-64zm0-96h64v64h-64v-64zm128 96h64v64h-64v-64zm-32-96h64v64h-64v-64zm128 96h64v64h-64v-64zm-32-96h64v64h-64v-64zm128 96h64v64h-64v-64zm-32-96h64v64h-64v-64zm128 96h64v64h-64v-64zm-32-96h64v64h-64v-64zm128 96h64v64h-64v-64zm96 0h96v64h-96v-64zm-128-96h64v64h-64v-64zm96 0h128v64H736v-64zM160 480h128v64H160v-64zm160 0h64v64h-64v-64zm96 0h64v64h-64v-64zm96 0h64v64h-64v-64zm96 0h64v64h-64v-64zm96 0h160v64H704v-64zm-544 96h160v64H160v-64zm192 0h64v64h-64v-64zm96 0h64v64h-64v-64zm96 0h64v64h-64v-64zm96 0h224v64H640v-64zm-480 96h128v64H160v-64zm576 0h128v64H736v-64zm-416 0h384v64H320v-64z",fill:"currentColor"})))})),e.registerIcon("display-inline",(function(e){return P.createElement("svg",ra({viewBox:"0 0 20 8",className:"icon"},e),na||(na=P.createElement("path",{d:"M14.814 6.25c.258.248.567.435.927.56s.76.19 1.18.19c.29 0 .51-.014.68-.042.167-.028.34-.07.53-.123.143-.04.28-.09.41-.146l.41-.19V5.13h-.153c-.07.06-.157.134-.265.22a3.337 3.337 0 0 1-.35.237 2.11 2.11 0 0 1-.484.22 1.798 1.798 0 0 1-1.1-.01 1.403 1.403 0 0 1-.523-.3 1.566 1.566 0 0 1-.38-.57c-.1-.24-.152-.54-.152-.9 0-.346.048-.638.14-.878s.217-.437.368-.58c.16-.155.33-.26.52-.33a1.786 1.786 0 0 1 1.117-.013c.165.055.317.124.458.205a4.385 4.385 0 0 1 .643.47h.17V1.52c-.107-.05-.23-.107-.37-.168a3.613 3.613 0 0 0-1.003-.27 4.736 4.736 0 0 0-.65-.04c-.436 0-.837.07-1.205.207s-.674.33-.923.59c-.26.26-.458.58-.59.95S14 3.57 14 4.02c0 .488.07.918.213 1.29s.343.683.6.933zm-3.264.608c.272-.075.52-.2.75-.377a1.5 1.5 0 0 0 .46-.56 1.72 1.72 0 0 0 .17-.77c0-.4-.11-.72-.332-.96-.22-.244-.52-.404-.896-.48v-.04a1.46 1.46 0 0 0 .623-.516c.147-.22.22-.474.22-.763 0-.25-.052-.47-.16-.66a1.152 1.152 0 0 0-.49-.46 2.06 2.06 0 0 0-.64-.212A7.67 7.67 0 0 0 10.237 1H8v5.97h2.515c.418 0 .763-.037 1.035-.112zM9.478 2.095h.14c.29 0 .517.002.678.006.162.01.296.03.404.07a.46.46 0 0 1 .253.23.69.69 0 0 1 .072.298.85.85 0 0 1-.062.34.492.492 0 0 1-.263.24 1.052 1.052 0 0 1-.39.08c-.166.006-.366.01-.6.01h-.232v-1.27zm.108 3.78h-.108V4.388h.324c.222 0 .434 0 .638.004a1.8 1.8 0 0 1 .48.056c.17.05.29.127.36.23.07.104.106.25.106.44 0 .144-.03.272-.087.383s-.17.2-.32.27-.32.1-.5.11c-.18.004-.48.004-.9.004zm-6.64-.106h2.187l.41 1.2h1.574L4.935 1.03H3.182L1 6.97h1.535l.412-1.2zM4.04 2.55l.727 2.13H3.313l.727-2.13z"})))})),e.registerIcon("display-block",(function(e){return P.createElement("svg",da({viewBox:"0 0 22 14",className:"icon"},e),oa||(oa=P.createElement("path",{opacity:.15,d:"M19 3v8H3V3h16m1-1H2v10h18V2z"})),ia||(ia=P.createElement("path",{d:"M19.8 1H2.2A1.2 1.2 0 0 0 1 2.2v9.6A1.2 1.2 0 0 0 2.2 13h17.6a1.2 1.2 0 0 0 1.2-1.2V2.2A1.2 1.2 0 0 0 19.8 1zm.2 11H2V2h18v10z"})),sa||(sa=P.createElement("path",{opacity:.35,d:"M3 3h16v8H3z"})))})),e.registerIcon("display-inline-block",(function(e){return P.createElement("svg",pa({viewBox:"0 0 28 14",className:"icon"},e),la||(la=P.createElement("path",{d:"M25 3v8H3V3h22m1-1H2v10h24V2z",opacity:.15})),ca||(ca=P.createElement("path",{opacity:.35,d:"M8.418 9.8H7.66L7.25 11h1.58l-.232-.676-.18-.525zM3 11h.567l2.916-7.94h3.15L11 6.78V3H3v8zm15.12-1.002a3.302 3.302 0 0 1-.48-.586c-.173.343-.42.653-.73.888.002 0 .004-.002.005-.003l-.008.006.003-.003a3.145 3.145 0 0 1-1.092.55c-.4.11-.825.15-1.303.15h6.017a4.416 4.416 0 0 1-1.12-.215 3.51 3.51 0 0 1-1.292-.787zM14.237 3c.49 0 .853.014 1.167.06.335.05.656.16.953.314h.003l.004.003c.365.19.694.492.898.866.13.234.197.49.24.747.16-.298.343-.58.578-.82v-.002c.358-.366.8-.643 1.287-.826a4.373 4.373 0 0 1 1.557-.272 5.67 5.67 0 0 1 1.442.18l.01.002.01.003c.205.06.4.126.59.208.15.064.283.125.407.185l.562.274v3.016h-1.54l-.28-.24a7.018 7.018 0 0 0-.233-.188 2.703 2.703 0 0 0-.26-.175 1.594 1.594 0 0 0-.277-.125h-.006l-.2-.03a.772.772 0 0 0-.26.042l-.16.102a.63.63 0 0 0-.13.22 1.486 1.486 0 0 0-.075.516c0 .266.04.436.074.513a.59.59 0 0 0 .13.212l.15.09h.003a.868.868 0 0 0 .265.045l.236-.037h.008a1.04 1.04 0 0 0 .25-.113l.007-.004.01-.005.24-.16a6.41 6.41 0 0 0 .216-.17l.285-.254h1.536v3.017l-.59.266c-.15.066-.292.13-.422.184a4.19 4.19 0 0 1-.53.19 5.918 5.918 0 0 1-.636.15c-.076.012-.16.02-.24.026H25V3H14.237z"})),ua||(ua=P.createElement("path",{d:"M25.8 1H2.2A1.2 1.2 0 0 0 1 2.2v9.6A1.2 1.2 0 0 0 2.2 13h23.6a1.2 1.2 0 0 0 1.2-1.2V2.2A1.2 1.2 0 0 0 25.8 1zm.2 11H2V2h24v10zm-7.186-2.72c.258.248.567.435.927.56s.76.19 1.18.19c.29 0 .51-.014.68-.042.167-.028.34-.07.53-.123.143-.04.28-.09.41-.146l.412-.19V8.16h-.154c-.07.06-.157.134-.265.22a3.337 3.337 0 0 1-.35.237 2.11 2.11 0 0 1-.485.22 1.798 1.798 0 0 1-1.1-.01 1.403 1.403 0 0 1-.523-.3c-.15-.14-.28-.33-.38-.57a2.36 2.36 0 0 1-.152-.9c0-.347.047-.64.14-.88s.216-.433.367-.58c.157-.15.33-.26.517-.325a1.786 1.786 0 0 1 1.116-.014c.164.056.316.125.457.206a4.868 4.868 0 0 1 .644.466h.17V4.54a13.03 13.03 0 0 0-.367-.168 3.667 3.667 0 0 0-1.005-.27 4.736 4.736 0 0 0-.65-.04c-.436 0-.837.07-1.205.207s-.675.333-.924.59c-.26.262-.457.58-.59.95S18 6.6 18 7.055c0 .488.07.918.213 1.29s.343.683.6.933zm-3.264.607c.272-.076.52-.2.75-.38.195-.15.35-.338.46-.567.113-.23.17-.488.17-.778 0-.4-.11-.722-.332-.967-.22-.245-.52-.406-.896-.484v-.03a1.46 1.46 0 0 0 .623-.51 1.36 1.36 0 0 0 .22-.77c0-.25-.052-.47-.16-.665a1.15 1.15 0 0 0-.49-.465 2.065 2.065 0 0 0-.64-.215A7.67 7.67 0 0 0 14.237 4H12v6h2.515c.418 0 .763-.037 1.035-.113zM13.478 5.1h.14c.29 0 .517.002.678.006s.296.027.404.07c.12.05.206.123.253.223a.69.69 0 0 1 .072.29.86.86 0 0 1-.062.34c-.042.1-.13.18-.263.24a1.05 1.05 0 0 1-.39.08c-.166.007-.366.01-.6.01h-.233V5.1zm.108 3.8h-.108V7.405h.324c.222 0 .434 0 .638.004.203 0 .363.02.48.05.17.05.29.13.36.23s.106.25.106.44c0 .144-.03.272-.087.384s-.17.2-.32.27a1.257 1.257 0 0 1-.5.104c-.18.003-.48.004-.9.004zm-6.64-.1h2.187l.41 1.2h1.574L8.935 4.06H7.182L5 10h1.535l.412-1.2zM8.04 5.58l.727 2.13H7.313l.727-2.13z"})))})),e.registerIcon("display-flex",(function(e){return P.createElement("svg",Ea({viewBox:"0 0 23 14",className:"icon"},e),fa||(fa=P.createElement("path",{d:"M21 2v10H2V2h19zm1-1H1v12h21V1z",opacity:.15})),ha||(ha=P.createElement("path",{d:"M1.2 0A1.2 1.2 0 0 0 0 1.2v11.6A1.2 1.2 0 0 0 1.2 14h20.6a1.2 1.2 0 0 0 1.2-1.2V1.2A1.2 1.2 0 0 0 21.8 0H1.2zM22 13H1V1h21v12z"})),ma||(ma=P.createElement("path",{opacity:.4,d:"M3 3h5v8H3z"})),ga||(ga=P.createElement("path",{d:"M4 4v6h3V4H4zm4-1v8H3V3h5z"})),va||(va=P.createElement("path",{opacity:.4,d:"M9 3h5v8H9z"})),ba||(ba=P.createElement("path",{d:"M10 4v6h3V4h-3zm4-1v8H9V3h5z"})),ya||(ya=P.createElement("path",{opacity:.4,d:"M15 3h5v8h-5z"})),_a||(_a=P.createElement("path",{d:"M16 4v6h3V4h-3zm4-1v8h-5V3h5z"})))})),e.registerIcon("back-up",(function(e){return P.createElement("svg",Sn({viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",className:"icon"},e),En||(En=P.createElement("defs",null,P.createElement("linearGradient",{x1:"100%",y1:"101.089%",x2:"0%",y2:"-14.125%",id:"back-up_svg__c"},P.createElement("stop",{stopColor:"#FFF",offset:"0%"}),P.createElement("stop",{stopColor:"#FFF8F8",offset:"46.533%"}),P.createElement("stop",{stopColor:"#DDFEEB",offset:"100%"})),P.createElement("linearGradient",{x1:"100%",y1:"51.269%",x2:"0%",y2:"48.407%",id:"back-up_svg__f"},P.createElement("stop",{stopColor:"#FFF",offset:"0%"}),P.createElement("stop",{stopColor:"#FFF8F8",offset:"46.533%"}),P.createElement("stop",{stopColor:"#DDFEEB",offset:"100%"})),P.createElement("filter",{x:"-24.3%",y:"-19.2%",width:"148.6%",height:"153.6%",filterUnits:"objectBoundingBox",id:"back-up_svg__a"},P.createElement("feOffset",{dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),P.createElement("feGaussianBlur",{stdDeviation:1,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),P.createElement("feColorMatrix",{values:"0 0 0 0 0.179423161 0 0 0 0 0.342133642 0 0 0 0 0.637515745 0 0 0 0.650991587 0",in:"shadowBlurOuter1"})),P.createElement("filter",{x:"-25%",y:"-125%",width:"150%",height:"450%",filterUnits:"objectBoundingBox",id:"back-up_svg__d"},P.createElement("feOffset",{dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),P.createElement("feGaussianBlur",{stdDeviation:1,in:"shadowOffsetOuter1",result:"shadowBlurOuter1"}),P.createElement("feColorMatrix",{values:"0 0 0 0 0.179423161 0 0 0 0 0.342133642 0 0 0 0 0.637515745 0 0 0 0.650991587 0",in:"shadowBlurOuter1"})),P.createElement("rect",{id:"back-up_svg__e",x:0,y:0,width:14,height:2,rx:1}),P.createElement("path",{d:"M15.962 12.004c.157.01.312.056.452.139l.101.07.095.082L23 18.322a1 1 0 0 1-1.32 1.498l-.094-.083-4.61-4.315.001 8.788c0 .466-.447.843-1 .843-.512 0-.935-.325-.993-.745l-.007-.098v-8.866l-4.372 4.393a1 1 0 0 1-1.497-1.32l.083-.095 6.004-6.027a.996.996 0 0 1 .648-.29h.119Z",id:"back-up_svg__b"}))),wn||(wn=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("rect",{fill:"#2468F2",width:32,height:32,rx:16}),P.createElement("g",{fillRule:"nonzero"},P.createElement("use",{fill:"#000",filter:"url(#back-up_svg__a)",xlinkHref:"#back-up_svg__b"}),P.createElement("use",{fill:"url(#back-up_svg__c)",xlinkHref:"#back-up_svg__b"})),P.createElement("g",{transform:"translate(9 7.702)",fillRule:"nonzero"},P.createElement("use",{fill:"#000",filter:"url(#back-up_svg__d)",xlinkHref:"#back-up_svg__e"}),P.createElement("use",{fill:"url(#back-up_svg__f)",xlinkHref:"#back-up_svg__e"})))))})),e.registerIcon("down-arrow",Rn),e.registerIcon("editor-search",(function(e){return P.createElement("svg",On({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),In||(In=P.createElement("path",{d:"M7.5 12A4.505 4.505 0 0 1 3 7.5C3 5.019 5.019 3 7.5 3S12 5.019 12 7.5 9.981 12 7.5 12Zm6.294 1.089-2.071-2.07A5.482 5.482 0 0 0 13 7.5C13 4.468 10.533 2 7.5 2A5.506 5.506 0 0 0 2 7.5C2 10.532 4.467 13 7.5 13a5.475 5.475 0 0 0 3.516-1.274l2.071 2.071.707-.708Z",fill:"currentColor",fillRule:"evenodd"})))})),e.registerIcon("editor-help",(function(e){return P.createElement("svg",kn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Nn||(Nn=P.createElement("path",{d:"m7.976 1 .241.003A7 7 0 1 1 7.977 1Zm.004 1-.225.005A6 6 0 1 0 7.98 2Zm.03 8.8a.6.6 0 1 1 .004 1.2.6.6 0 0 1-.005-1.2Zm-.024-6.787c1.3-.004 2.368 1.003 2.455 2.258l.007.18c.01.33-.07.742-.325 1.15-.258.414-.656.734-1.2.922l-.272.085c-.12.049-.144.159-.146.744v.407l-1 .003v-.296c.007-1.197.136-1.59.83-1.81l.12-.034c.406-.11.663-.3.82-.55.111-.18.16-.366.171-.51l.002-.102a1.453 1.453 0 0 0-2.9-.13l-.007.14-1 .002a2.453 2.453 0 0 1 2.445-2.46Z"})))})),e.registerIcon("editor-fixed",(function(e){return P.createElement("svg",Mn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),An||(An=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h16v16H0z"}),P.createElement("path",{d:"m14.333 5.928-4.26-4.26a.572.572 0 0 0-.813 0L6.475 4.455A5.698 5.698 0 0 0 2.27 5.67a.574.574 0 0 0-.047.854l3.142 3.142-3.724 3.72a.273.273 0 0 0-.08.17l-.059.643c-.015.163.114.301.275.301.009 0 .017 0 .026-.002l.643-.059a.273.273 0 0 0 .17-.079l3.724-3.724 3.14 3.141a.572.572 0 0 0 .855-.046 5.711 5.711 0 0 0 1.214-4.209l2.785-2.785a.573.573 0 0 0 0-.81Zm-3.667 2.718-.424.423.066.595a4.494 4.494 0 0 1-.526 2.661L3.678 6.217a4.471 4.471 0 0 1 2.66-.526l.595.066.424-.424 2.311-2.312 3.311 3.311-2.313 2.314Zm0 0-.424.423.066.595a4.494 4.494 0 0 1-.526 2.661L3.678 6.217a4.471 4.471 0 0 1 2.66-.526l.595.066.424-.424 2.311-2.312 3.311 3.311-2.313 2.314Z",fill:"currentColor",fillRule:"nonzero"}))))})),e.registerIcon("editor-no-fixed",(function(e){return P.createElement("svg",Fn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Dn||(Dn=P.createElement("g",{fillRule:"nonzero",fill:"none"},P.createElement("path",{d:"M0 0h16v16H0z"}),P.createElement("path",{d:"m14.333 5.928-4.26-4.26a.572.572 0 0 0-.813 0L6.475 4.455A5.698 5.698 0 0 0 2.27 5.67a.574.574 0 0 0-.047.854l3.142 3.142-3.724 3.72a.273.273 0 0 0-.08.17l-.059.643c-.015.163.114.301.275.301.009 0 .017 0 .026-.002l.643-.059a.273.273 0 0 0 .17-.079l3.724-3.724 3.14 3.141a.572.572 0 0 0 .855-.046 5.711 5.711 0 0 0 1.214-4.209l2.785-2.785a.573.573 0 0 0 0-.81Zm-3.667 2.718-.424.423.066.595a4.494 4.494 0 0 1-.526 2.661L3.678 6.217a4.471 4.471 0 0 1 2.66-.526l.595.066.424-.424 2.311-2.312 3.311 3.311-2.313 2.314Z",fill:"currentColor"}))))})),e.registerIcon("editor-renderer",(function(e){return P.createElement("svg",Bn({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Pn||(Pn=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h48v48H0z"}),P.createElement("g",{strokeWidth:1.25,stroke:"currentColor",strokeLinejoin:"round"},P.createElement("path",{d:"M16.701 16.702h5.848v5.848h-5.848zM25.456 16.702h5.848v5.848h-5.848zM16.701 25.451h5.848v5.848h-5.848zM25.456 25.451h5.848v5.848h-5.848z"})))))})),e.registerIcon("editor-outline",(function(e){return P.createElement("svg",jn({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Tn||(Tn=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h48v48H0z"}),P.createElement("g",{transform:"translate(14 14)"},P.createElement("path",{d:"M0 0h20v20H0z"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",d:"M3.121 5.625v11.25M3.121 10.625h2.5M3.121 16.875h2.5"}),P.createElement("circle",{fill:"currentColor",cx:3.125,cy:4.375,r:1.875}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinejoin:"round",d:"M8.747 3.125h8.728v2.5H8.747zM8.747 8.75h8.728v2.5H8.747zM8.747 14.375h8.728v2.5H8.747z"})))))})),e.registerIcon("editor-code",(function(e){return P.createElement("svg",zn({viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Ln||(Ln=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h48v48H0z"}),P.createElement("path",{d:"M14 14h20v20H14z"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinejoin:"round",d:"M16.5 17.75h15v12.5h-15z"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",d:"m25.709 20.841-3.362 6.284"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",strokeLinejoin:"round",d:"m27.643 22.233 1.768 1.768-1.766 1.766M20.582 22.233l-1.768 1.768 1.766 1.766"}))))})),e.registerIcon("editor-common-config",(function(e){return P.createElement("svg",$n({viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Hn||(Hn=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M0 0h20v20H0z"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinejoin:"round",d:"m10 1.25 7.578 4.375v8.75L10 18.75l-7.578-4.375v-8.75z"}),P.createElement("path",{stroke:"currentColor",strokeWidth:1.25,strokeLinecap:"round",d:"m5.824 7.826 3.955 2.418M14.054 7.826l-4.275 2.418M9.779 14.845v-4.601"}))))})),e.registerIcon("editor-double-arrow",(function(e){return P.createElement("svg",Vn({viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Kn||(Kn=P.createElement("path",{d:"m3.713 3.001 4.95 4.95-.003.003.003.003-4.95 4.95L3 12.194l4.24-4.24L3 3.714l.713-.713Zm3.997 0 4.95 4.948-.004.004.004.003-4.95 4.95-.713-.714 4.24-4.239-4.24-4.24L7.71 3Z",fill:"currentColor",fillRule:"evenodd"})))})),e.registerIcon("search-clear",(function(e){return P.createElement("svg",Wn({viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),Un||(Un=P.createElement("g",{fill:"none",fillRule:"evenodd"},P.createElement("path",{d:"M6 12A6 6 0 1 1 6 0a6 6 0 0 1 0 12Z",fill:"currentColor"}),P.createElement("path",{fill:"#FFF",d:"M8.475 4.232 6.707 6l1.768 1.768-.707.707L6 6.707 4.232 8.475l-.707-.707L5.293 6 3.525 4.232l.707-.707L6 5.293l1.768-1.768z"}))))}));var Jn=function(n){function r(e){var t=n.call(this,e)||this;t.ref=F.default.createRef(),t.localStorageKey="amis-editor-search-panel",t.curTagFolded={},e.searchPanelUUID&&(t.localStorageKey=e.searchPanelUUID);var a=[],r={};if(e.allResult&&e.allResult.length>0){var o=t.getResultTags(e.allResult);a=o.curResultTags,r=o.curResultByTag}return t.state={resultTags:a,resultByTag:r,curKeyword:e.externalKeyword||"",searchResult:[],searchResultByTag:{},visible:!1,curKeywordSearchHistory:t.getSearchHistory(),toggleTagFolderStatus:!0},t}return a.__extends(r,n),r.prototype.componentDidMount=function(){var e,t;(null===(t=null===(e=this.ref.current)||void 0===e?void 0:e.childNodes[0])||void 0===t?void 0:t.childNodes[0])&&(this.curInputBox=this.ref.current.childNodes[0].childNodes[0],this.curInputBox.addEventListener("keyup",this.bindEnterEvent))},r.prototype.componentWillUnmount=function(){this.curInputBox&&this.curInputBox.removeEventListener("keyup",this.bindEnterEvent)},r.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=this,a=e.externalKeyword,n=e.allResult;if(a!==this.state.curKeyword&&this.setState({curKeyword:a},(function(){t.groupedResultByKeyword(a)})),n!==this.props.allResult){var r=[],o={};if(n&&n.length>0){var i=this.getResultTags(n);r=i.curResultTags,o=i.curResultByTag}this.setState({resultTags:r,resultByTag:o})}},r.prototype.getSearchHistory=function(){var e=[];if(window.localStorage){var t=window.localStorage.getItem(this.localStorageKey);if(t){var a=JSON.parse(t);a&&Array.isArray(a)&&(e=a)}}return e},r.prototype.getResultTags=function(e){var a=[],n={},r=this.props.tagKey||"tags";return e.forEach((function(e){!Q.default(e)&&e[r]&&(Array.isArray(e[r])?e[r].concat():e[r]?[e[r]]:[t.i18n("0d98c74797e49d00bcc4c17c9d557a2b")]).forEach((function(t){a.indexOf(t)<0&&a.push(t),n[t]||(n[t]=[]),n[t].push(e)}))})),{curResultTags:a,curResultByTag:n}},r.prototype.groupedResultByKeyword=function(e){var a=this.props.allResult,n=[],r={},o=e||this.state.curKeyword,i=this.props.tagKey||"tags",s={},d=o?new RegExp(it(o),"i"):null;a.forEach((function(a){if(Q.default(a)&&d&&d.test(a))n.push(a);else if(!e||["name","description","scaffold.type"].some((function(e){return a[e]&&d&&d.test(a[e])}))){if(a[i])(Array.isArray(a[i])?a[i].concat():a[i]?[a[i]]:[t.i18n("0d98c74797e49d00bcc4c17c9d557a2b")]).forEach((function(e){r[e]=s[e]||[],r[e].push(a)}));else n.push(a)}})),this.setState({searchResult:n,searchResultByTag:r})},r.prototype.bindFocusEvent=function(){this.setState({visible:!0})},r.prototype.bindBlurEvent=function(){var e=this,t=this.state.curKeyword;this.setState({visible:!1},(function(){t&&e.addSearchHistory(t),e.props.onChange(t)}))},r.prototype.updateCurKeyword=function(e){var t=this,a=e;a=a?a.trim():a,this.setState({curKeyword:a},(function(){t.groupedResultByKeyword(a),t.props.immediateChange&&t.props.onChange(a)}))},r.prototype.changeTagFoldStatus=function(e,t){t.preventDefault(),t.stopPropagation(),this.curInputBox.focus(),this.curTagFolded[e]=!this.curTagFolded[e],this.setState({toggleTagFolderStatus:!this.state.toggleTagFolderStatus})},r.prototype.bindEnterEvent=function(e){var t=this;e.preventDefault();var a=this.state.curKeyword;13===(null==e?void 0:e.keyCode)&&this.setState({visible:!1},(function(){t.addSearchHistory(a),t.props.onChange(a)}))},r.prototype.bindClearActionEvent=function(){var e=this;this.setState({curKeyword:"",searchResult:[],searchResultByTag:{}},(function(){e.props.onChange("")}))},r.prototype.bindTagClickEvent=function(e){var t,a=this,n=this.state.resultByTag[e];this.setState({visible:!1,curKeyword:e,searchResult:n,searchResultByTag:(t={},t[e]=n,t)},(function(){a.props.onTagChange&&a.props.onTagChange(e)}))},r.prototype.addSearchHistory=function(e){var t=this.state.curKeywordSearchHistory;t.indexOf(e)>-1||(10===t.length?(t.shift(),t.push(e)):t.push(e),this.updateSearchHistory())},r.prototype.clickKeywordEvent=function(e){var t=this;this.setState({visible:!1,curKeyword:e},(function(){t.groupedResultByKeyword(e),t.props.onChange(e)}))},r.prototype.deleteSearchHistory=function(e,t){e.preventDefault(),e.stopPropagation(),this.curInputBox.focus();var a=this.state.curKeywordSearchHistory,n=a.indexOf(t);a.splice(n,1),this.updateSearchHistory()},r.prototype.clearSearchHistory=function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.curInputBox.focus();var a=this.state.curKeywordSearchHistory;a&&a.length>0&&this.setState({curKeywordSearchHistory:[]},(function(){t.updateSearchHistory()}))},r.prototype.updateSearchHistory=function(){if(window.localStorage){var e=this.state.curKeywordSearchHistory;window.localStorage.setItem(this.localStorageKey,JSON.stringify(e))}},r.prototype.renderNameByKeyword=function(e,t){if(t&&~e.indexOf(t)){var a=e.indexOf(t),n=a+t.length;return F.default.createElement("span",null,e.substring(0,a),F.default.createElement("span",{className:"is-keyword"},t),e.substring(n))}return e},r.prototype.resultIsHasScroll=function(e,t){var a=this,n=0;return(e?Object.keys(e):[]).map((function(t){a.curTagFolded[t]?n+=1:n+=e[t].length+1})),n>t},r.prototype.render=function(){var n=this,r=this.props,o=r.allResult,i=r.closeAutoComplete,s=r.immediateChange,d=this.state,l=d.resultTags,c=d.curKeyword,u=d.searchResult,p=d.searchResultByTag,f=d.visible,h=p?Object.keys(p):[],m=a.__spreadArray([],a.__read(this.state.curKeywordSearchHistory),!1).reverse(),g=!1;return f&&o&&o.length>0&&(g=!0),i&&c&&(g=!1),i&&(!l||l&&0===l.length)&&(!m||m&&0===m.length)&&(g=!1),F.default.createElement("div",{className:"editor-InputSearch-panel",ref:this.ref},F.default.createElement(e.InputBox,{className:"editor-InputSearch",value:c,onChange:this.updateCurKeyword,placeholder:t.i18n("2168c5735883bd040eaf09909d0911b8"),clearable:!1,onFocus:this.bindFocusEvent,onBlur:this.bindBlurEvent},F.default.createElement(F.default.Fragment,null,s&&(c?F.default.createElement(e.Icon,{icon:"search-clear",className:"icon delete-btn-icon",onClick:this.bindClearActionEvent}):F.default.createElement(e.Icon,{icon:"editor-search",className:"icon",onClick:this.bindBlurEvent})),!s&&F.default.createElement(F.default.Fragment,null,c&&F.default.createElement(e.Icon,{icon:"search-clear",className:"icon delete-btn-icon margin-right",onClick:this.bindClearActionEvent}),F.default.createElement(e.Icon,{icon:"editor-search",className:"icon",onClick:this.bindBlurEvent})))),F.default.createElement("div",{className:"editor-InputSearch-content ".concat(g?"":"hidden-status")},!c&&m&&m.length>0&&F.default.createElement("div",{className:"search-history ".concat(l&&l.length>0?"has-border-bottom":"")},F.default.createElement("div",{className:"header"},F.default.createElement("div",{className:"header-title"},"搜索历史"),F.default.createElement("div",{className:"header-clear-icon",onClick:function(e){return n.clearSearchHistory(e)}},"清空")),F.default.createElement("div",{className:"history-cont ".concat(m.length>6?"hasScrollBtn":"")},m.map((function(t,a){return F.default.createElement("div",{className:"history-item",key:"".concat(t,"-").concat(a),onClick:function(){return n.clickKeywordEvent(t)}},F.default.createElement("div",{className:"history-keyword"},t),F.default.createElement("div",{className:"delete-icon",title:"点击删除这条搜索记录"},F.default.createElement(e.Icon,{icon:"close",onClick:function(e){return n.deleteSearchHistory(e,t)}})))})))),c&&0===u.length&&0===h.length&&F.default.createElement("div",{className:"search-result-list"},F.default.createElement("div",{className:"search-result-placeholder"},"搜索结果为空，您可以换个关键字继续查找。")),c&&u.length>0&&F.default.createElement("div",{className:"search-result-list ".concat(u.length>6?"hasScrollBtn":"")},u.length>1&&F.default.createElement("div",{className:"subRenderers-list only-one-tag"},u.map((function(e,t){return F.default.createElement("div",{className:"subRenderers-item",key:"subRenderers-only-one-tag-".concat(t),onClick:function(){return n.clickKeywordEvent(e.name)}},e.name||e.type)})))),c&&h.length>0&&F.default.createElement("div",{className:"search-result-list ".concat(this.resultIsHasScroll(p,6)?"hasScrollBtn":"")},h.length>1&&h.map((function(a,r){return F.default.createElement("div",{className:"multiple-subRenderers-list",key:"".concat(a,"-subRenderers-list")},F.default.createElement("div",{className:B.default("subRenderers-header",{"is-folded":!!n.curTagFolded[a]}),title:n.curTagFolded[a]?t.i18n("e4cefe7df36e92da1d7e875b92655507"):t.i18n("7ae451de83aa6f5f140e941904377391"),onClick:function(e){n.changeTagFoldStatus(a,e)}},a,F.default.createElement(e.Icon,{icon:"right-arrow-bold"})),F.default.createElement("div",{className:B.default("subRenderers-list",{"is-folded":!!n.curTagFolded[a]})},p[a]&&p[a].map((function(e,t){return F.default.createElement("div",{className:"subRenderers-item",key:t,onClick:function(){return n.clickKeywordEvent(e.name)}},n.renderNameByKeyword(e.name,c))}))))})),1===h.length&&h.map((function(e,t){return F.default.createElement("div",{className:"subRenderers-list only-one-tag",key:"subRenderers-tag-".concat(e)},p[e]&&p[e].map((function(e,t){return F.default.createElement("div",{className:"subRenderers-item",key:"subRenderers-only-one-tag-".concat(t),onClick:function(){return n.clickKeywordEvent(e.name)}},e.name||e.type)})))}))),!c&&l&&l.length>0&&F.default.createElement("div",{className:"tag-list"},F.default.createElement("div",{className:"header"},"组件分类"),F.default.createElement("div",{className:"tag-list-cont"},l.length?l.map((function(e,t){return F.default.createElement("div",{className:"tag-item",key:"".concat(e,"-").concat(t),onClick:function(){return n.bindTagClickEvent(e)}},e)})):null))))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"getSearchHistory",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"bindFocusEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"bindBlurEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"updateCurKeyword",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,Object]),a.__metadata("design:returntype",void 0)],r.prototype,"changeTagFoldStatus",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"bindEnterEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"bindClearActionEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"bindTagClickEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"addSearchHistory",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"clickKeywordEvent",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,String]),a.__metadata("design:returntype",void 0)],r.prototype,"deleteSearchHistory",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"clearSearchHistory",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"updateSearchHistory",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,String]),a.__metadata("design:returntype",void 0)],r.prototype,"renderNameByKeyword",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,Number]),a.__metadata("design:returntype",void 0)],r.prototype,"resultIsHasScroll",null),r=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],r)}(F.default.Component),Yn=function(e){function t(t){var a=e.call(this,t)||this;a.localStorageKey="amis-editor-renderer-search-history";var n=t.store.subRenderersByOrder;n=n.filter((function(e){return!e.disabledRendererPlugin}));var r=t.store,o=r.subRenderersKeywords,i=r.subRenderersTag;return a.state={subRenderersByOrder:n,defaultKeyword:o||i||""},a.lastSubRenderersTag=t.store.subRenderersTag,a.changeSubRenderersTag=a.changeSubRenderersTag.bind(a),a}return a.__extends(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function(e){var t=e.store.subRenderersTag,a=e.store.subRenderersKeywords;t===this.lastSubRenderersTag||a||(this.lastSubRenderersTag=t,this.setState({defaultKeyword:t}))},t.prototype.changeSubRenderersTag=function(e){this.lastSubRenderersTag=e,this.props.store.changeSubRenderersTag(e)},t.prototype.render=function(){var e=this.state,t=e.subRenderersByOrder,a=e.defaultKeyword,n=this.props.store.changeSubRenderersKeywords;return F.default.createElement(Jn,{allResult:t,externalKeyword:a,searchPanelUUID:this.localStorageKey,onChange:n,onTagChange:this.changeSubRenderersTag,immediateChange:!0,closeAutoComplete:!0})},t=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],t)}(F.default.Component),Gn=function(e){function t(t){var a=e.call(this,t)||this;a.localStorageKey="amis-editor-custom-renderer-search-history";var n=t.store.customRenderersByOrder;n=n.filter((function(e){return!e.disabledRendererPlugin}));var r=t.store,o=r.customRenderersKeywords,i=r.customRenderersTag;return a.state={customRenderersByOrder:n,defaultKeyword:o||i||""},a}return a.__extends(t,e),t.prototype.render=function(){var e=this.state,t=e.customRenderersByOrder,a=e.defaultKeyword,n=this.props.store,r=n.changeCustomRenderersKeywords,o=n.changeCustomRenderersTag;return t&&t.length>0?F.default.createElement(Jn,{allResult:t,externalKeyword:a,searchPanelUUID:this.localStorageKey,onChange:r,onTagChange:o}):null},t=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],t)}(F.default.Component),Xn=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.state={toggleCollapseFolderStatus:!1},e.curCollapseFolded={},e}return a.__extends(r,n),r.prototype.handleRegionFilterClick=function(e){var t=e.currentTarget.getAttribute("data-value"),a=this.props,n=a.store,r=a.manager;t=t===n.subRendererRegion?"":t,r.switchToRegion(t)},r.prototype.handleDragStart=function(e,t){var a=e.currentTarget.getAttribute("data-id");e.dataTransfer.setData('dnd-dom/[data-id="'.concat(a,'"]'),"")},r.prototype.handleClick=function(e){var t=e.currentTarget.getAttribute("data-dnd-id");this.props.manager.addElem(t)},r.prototype.changeCollapseFoldStatus=function(e,t){this.curCollapseFolded[e]=!this.curCollapseFolded[e],this.setState({toggleCollapseFolderStatus:!this.state.toggleCollapseFolderStatus}),t.preventDefault(),t.stopPropagation()},r.prototype.renderThumb=function(t){var a=this.props.manager;return t?e.render(t,{onAction:se},a.env):F.default.createElement("p",null,"没有预览图")},r.prototype.render=function(){var a=this,n=this.props,r=n.store,o=n.searchRendererType,i=n.className,s=this.props.groupedRenderers||{},d=Object.keys(s);return F.default.createElement("div",{className:B.default("ae-RendererList",i)},"renderer"===o&&F.default.createElement(Yn,{store:r}),"custom-renderer"===o&&F.default.createElement(Gn,{store:r}),F.default.createElement("hr",{className:"margin-top"}),F.default.createElement("div",{className:"ae-RendererList-groupWrap hoverShowScrollBar"},d.length?d.map((function(n,o){var i=s[n];return i&&i.length?F.default.createElement(F.default.Fragment,{key:n},F.default.createElement("div",{key:"".concat(n,"-head"),className:"ae-RendererList-head collapse-header",onClick:function(e){a.changeCollapseFoldStatus(n,e)}},n,F.default.createElement("div",{className:B.default("expander-icon",{"is-folded":!!a.curCollapseFolded[n]}),title:a.curCollapseFolded[n]?t.i18n("e4cefe7df36e92da1d7e875b92655507"):t.i18n("7ae451de83aa6f5f140e941904377391")},F.default.createElement(e.Icon,{icon:"right-arrow-bold"}))),F.default.createElement("div",{key:"".concat(n,"-content"),className:B.default("ae-RendererList-group collapse-content",{"is-folded":!!a.curCollapseFolded[n]})},i.map((function(t){var n="".concat(o,"_").concat(t.id),i=nt(t);return F.default.createElement("div",{key:n,className:"ae-RendererList-item",draggable:!0,"data-id":n,"data-dnd-type":"subrenderer","data-dnd-id":t.id,"data-dnd-data":JSON.stringify(t.scaffold||{type:t.type}),onDragStart:function(e){return a.handleDragStart(e,t.name)}},F.default.createElement("div",{className:"icon-box","data-dnd-id":t.id,title:"点击添加「".concat(t.name,"」"),onClick:a.handleClick},i&&F.default.createElement(e.Icon,{icon:t.pluginIcon}),!i&&F.default.createElement("i",{className:B.default("fa-fw",t.icon||"fa fa-circle-thin")})),F.default.createElement("div",{className:"ae-RendererInfo","data-dnd-id":t.id,onClick:a.handleClick},t.name),F.default.createElement(e.TooltipWrapper,{tooltipClassName:"ae-RendererThumb",trigger:"hover",rootClose:!0,placement:"right",tooltip:{offset:[10,0],children:function(){return F.default.createElement("div",null,F.default.createElement("div",{className:"ae-Renderer-title"},t.name),t.description||t.docLink?F.default.createElement("div",{className:"ae-Renderer-info"},F.default.createElement(e.Html,{html:t.description?t.description:""}),t.docLink&&F.default.createElement("a",{target:"_blank",href:r.amisDocHost+t.docLink},"详情")):null,F.default.createElement("div",{className:"ae-Renderer-preview"},a.renderThumb(t.previewSchema)))}}},F.default.createElement("div",{className:"ae-RendererIcon"},F.default.createElement(e.Icon,{icon:"editor-help",className:"icon"}))))})))):null})):F.default.createElement("span",null,"没有找到可用组件，您可以换个关键字继续查找。")))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleRegionFilterClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object,String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragStart",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,Object]),a.__metadata("design:returntype",void 0)],r.prototype,"changeCollapseFoldStatus",null),r=a.__decorate([u.observer],r)}(F.default.Component),Qn=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return a.__extends(r,n),r.prototype.handleSelect=function(e){e&&this.props.store.changeRenderersTabsKey(e)},r.prototype.render=function(){var a=this.props,n=a.store,r=a.manager,o=n.renderersTabsKey||"base-renderers",i=n.theme,s=n.customRenderersByOrder||[],d=n.groupedSubRenderers||{},l=n.groupedCustomRenderers||{};return F.default.createElement("div",{className:"ae-RendererPanel"},F.default.createElement("div",{className:"panel-header"},"组件"),F.default.createElement("div",{className:"ae-RendererPanel-content"},n.showCustomRenderersPanel&&s.length>0&&F.default.createElement(e.Tabs,{theme:i,tabsMode:"line",className:"ae-RendererList-tabs",linksClassName:"ae-RendererList-tabs-header",contentClassName:"ae-RendererList-tabs-content",activeKey:o,onSelect:this.handleSelect},F.default.createElement(e.Tab,{key:"base-renderers",eventKey:"base-renderers",title:t.i18n("5cb297585d4c81bb8fdbd31210a30d6f"),className:"ae-RendererList-tabs-panel base-renderers",mountOnEnter:!0,unmountOnExit:!1},F.default.createElement(Xn,{groupedRenderers:d,store:n,manager:r,searchRendererType:"renderer"})),F.default.createElement(e.Tab,{key:"custom-renderers",eventKey:"custom-renderers",title:t.i18n("6fce1c9aa3654ae2f0eedcc068a7e189"),className:"ae-RendererList-tabs-panel custom-renderers",mountOnEnter:!0,unmountOnExit:!1},F.default.createElement(Xn,{groupedRenderers:l,store:n,manager:r,searchRendererType:"custom-renderer"}))),(!n.showCustomRenderersPanel||Object.keys(l).length<1)&&F.default.createElement(Xn,{className:"only-base-component",groupedRenderers:d,store:n,manager:r,searchRendererType:"renderer"})))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleSelect",null),r=a.__decorate([u.observer],r)}(F.default.Component),er=f.types.model("EditorRoot",{isMobile:!1,isSubEditor:!1,amisDocHost:f.types.optional(f.types.string,"https://baidu.gitee.io"),root:f.types.optional(_t,{id:"root",label:"Root"}),theme:"cxd",hoverId:"",hoverRegion:"",activeId:"",activeRegion:"",mouseMoveRegion:"",selections:f.types.optional(f.types.frozen(),[]),contextId:"",dragMode:"move",dragId:"",dragType:"",dragSchema:f.types.frozen(),dropId:"",dropRegion:"",planDropId:"",planDropRegion:"",insertId:"",insertRegion:"",insertRenderers:f.types.optional(f.types.frozen(),[]),insertRenderersKeywords:"",insertTag:t.i18n("a8b0c20416853bda54120bf19477ad11"),insertSelected:"",insertMode:"insert",insertOrigId:"",insertBeforeId:"",showInsertRenderer:!1,schema:f.types.frozen(),versionId:0,schemaHistory:f.types.optional(f.types.array(f.types.frozen()),[]),toolbars:f.types.optional(f.types.frozen(),[]),panels:f.types.optional(f.types.frozen(),[]),showCustomRenderersPanel:!1,renderersTabsKey:"base-renderers",subRenderers:f.types.optional(f.types.frozen(),[]),subRenderersKeywords:"",subRenderersTag:"",subRendererRegion:"",customRenderersKeywords:"",customRenderersTag:"",panelKey:"",leftPanelKey:"",leftPanelOpenStatus:!0,jsonSchemaUri:"",scaffoldForm:f.types.maybe(f.types.frozen()),scaffoldFormBuzy:!1,scaffoldError:"",popOverForm:f.types.maybe(f.types.frozen()),subEditorContext:f.types.maybe(f.types.frozen()),superEditorData:f.types.maybe(f.types.frozen()),calculateStarted:!1,targetNames:f.types.optional(f.types.array(f.types.frozen()),[]),ctx:f.types.frozen(),i18nEnabled:f.types.optional(f.types.boolean,!1),appLocale:f.types.optional(f.types.string,"zh-CN"),appCorpusData:f.types.optional(f.types.frozen(),{}),appLocaleState:f.types.optional(f.types.number,0)}).views((function(n){return{get filteredSchema(){var e,t,a;return Be(null!==(a=null===(t=(e=f.getEnv(n)).schemaFilter)||void 0===t?void 0:t.call(e,n.schema))&&void 0!==a?a:n.schema)},get filteredSchemaForPreview(){var e,t,a,r=ge(n.schema);return null!==(a=null===(t=(e=f.getEnv(n)).schemaFilter)||void 0===t?void 0:t.call(e,r))&&void 0!==a?a:r},isRootSchema:function(e){var t=this.getSchema();return!(!t||t.$$id!==e)},getRootId:function(){var e=this.getSchema();return null==e?void 0:e.$$id},isHoved:function(e){return e&&n.hoverId===e},isActive:function(e){return e&&!this.dragging&&!n.insertOrigId&&n.insertBeforeId!==e&&n.activeId===e},isContextOn:function(e){return e&&n.contextId===e},get activeContainerId(){var e;if(!n.activeId)return"";for(var t=this.getNodeById(n.activeId);t;){if(t.childRegions.length||(null===(e=t.info)||void 0===e?void 0:e.regions))return t.id;t=t.host}return""},isRegionHighlighted:function(e,t){return!n.insertOrigId&&e===n.hoverId&&t===n.hoverRegion||e===n.activeId&&n.activeRegion===t||e===n.dropId&&n.dropRegion===t||!n.insertOrigId&&e===n.insertId&&n.insertRegion===t},isRegionHighlightHover:function(e,t){return e===n.hoverId&&t===n.mouseMoveRegion},isRegionActive:function(e,t){return this.isActive(e)||e===n.dropId||this.isRegionHighlighted(e,t)||this.isRegionHighlightHover(e,t)},isRegionDragEnter:function(e,t){return this.isRegionActive(e,t)&&t===n.dropRegion},get highlightNodes(){var e=this,t=[];!n.hoverId||n.dragId||n.contextId||n.activeId===n.hoverId&&!n.hoverRegion||n.selections.includes(n.hoverId)||t.push(n.hoverId),n.contextId&&t.push(n.contextId),!n.activeId&&!n.selections.length||n.dragId&&!this.draggableContainer(n.dragId)||n.insertOrigId||n.insertId||n.hoverId&&n.hoverRegion||(n.activeId?t.push(n.activeId):t.push.apply(t,n.selections));var a=this.parentIsFreeContainer(n.activeId);return a&&t.push(a),"insert"===n.insertMode&&n.insertId&&t.push(n.insertId),n.insertOrigId&&t.push(n.insertOrigId),n.dropId&&t.push(n.dropId),n.insertBeforeId&&t.push(n.insertBeforeId),t.filter((function(e,t,a){return e&&t===a.indexOf(e)})).map((function(t){return e.getNodeById(t)})).filter((function(e){return e}))},getNodeById:function(e,t){for(var a=n.root.children.concat();a.length;){var r=a.shift();if(r.id===e&&(!t||r.region===t||r.type===t))return r;r.children.length&&a.push.apply(a,r.children)}},get activeNodeInfo(){var e;return null===(e=this.getNodeById(n.activeId))||void 0===e?void 0:e.info},getSchema:function(e,t){return e?_e(n.schema,e,t):n.schema},getSchemaParentById:function(e,t){return void 0===t&&(t=!1),Ee(n.schema,e,t)},getSchemaPath:function(e){var t=ye(n.schema,e);return Array.isArray(t)?t.join("/"):""},getSimpleSchema:function(e){var t,a,r,o=ge(e);return null!==(r=null===(a=(t=f.getEnv(n)).schemaFilter)||void 0===a?void 0:a.call(t,o))&&void 0!==r?r:o},getPanelKey:function(){var e,t=n.panelKey;if("none"===t)return t;var a=this.getPanels();return H.default(a,(function(e){return t&&e.key===t}))?t:(null===(e=a[0])||void 0===e?void 0:e.key)||"none"},getLeftPanelKey:function(){var e=n.leftPanelKey;if(this.dragging)return"outline";if("none"===e)return e;var t=this.getLeftPanels();return H.default(t,(function(t){return e&&t.key===e}))?e:"renderers"},get leftPanels(){return n.panels.filter((function(e){return"left"===e.position}))},get rightPanels(){return n.panels.filter((function(e){return"left"!==e.position&&"contextmenu"!==e.key}))},get contextMenuPanel(){return n.panels.find((function(e){return"contextmenu"===e.key}))},getPanels:function(){return[].concat(this.rightPanels||[]).sort((function(e,t){return e.order-t.order}))},getLeftPanels:function(){var e=[].concat(this.leftPanels||[]);return n.insertId&&n.insertRegion&&e.push({key:"insert",icon:"fa fa-bolt",position:"left",title:"replace"===n.insertMode?t.i18n("1dd554cdfc1ddf7dce13453805523c16"):t.i18n("9bdb07e72d3a9a6084201a7398523f5a"),component:qt,order:9999}),e.push({key:"insertRenderer",icon:"fa fa-bolt",position:"left",title:t.i18n("a82240ce09faf0b972a8aa5c9e93d209"),component:Qn,order:9999}),e.sort((function(e,t){return e.order-t.order}))},get sortedToolbars(){return n.toolbars.filter((function(e){return"secondary"!==e.level&&"special"!==e.level})).sort((function(e,t){return e.order-t.order}))},get sortedSecondaryToolbars(){return n.toolbars.filter((function(e){return"secondary"===e.level})).sort((function(e,t){return e.order-t.order}))},get sortedSpecialToolbars(){return n.toolbars.filter((function(e){return"special"===e.level})).sort((function(e,t){return e.order-t.order}))},get value(){if(n.activeId)return this.getValueOf(n.activeId)},getValueOf:function(e){return ge(_e(n.schema,e),!1)},get valueWithoutHiddenProps(){if(n.activeId)return ge(_e(n.schema,n.activeId),f.getEnv(n).isHiddenProps||function(e,t){return"$$"===e.substring(0,2)&&"$$comments"!==e&&"$$commonSchema"!==e||"function"==typeof t||"__"===e.substring(0,2)||"css"===e||"editorState"===e})},get outline(){return n.root.children},get bcn(){var e=[];return n.activeId&&c.findTree(n.root.children,(function(t,a,r,o){return t.id===n.activeId&&(e=o.concat(t),!0)})),e.filter((function(e){return!e.isSecondFactor}))},get activePath(){return this.getNodePathById(n.activeId)},getNodePathById:function(e){var t=[];if(!e)return t;var a=function(n,r){return void 0===r&&(r=[]),n.every((function(n){return n.id===e?(t=r.concat(n),!1):!n.children||!n.children.length||a(n.children,r.concat(n))}))};return a(n.root.children),t},get dragging(){return!this.draggableContainer(n.dragId)&&!(!n.dragId&&!n.dropId)},get needPatch(){var e=function(t){return t.some((function(t){return!t.patched&&!t.isRegion||!!t.children.length&&e(t.children)}))};return e(n.root.children)},get schemaRaw(){return ge(n.schema)},get subRenderersByOrder(){return n.subRenderers.filter((function(e){return!(!e.disabledRendererPlugin&&n.showCustomRenderersPanel)||e.isBaseComponent})).sort((function(e,t){return e.order-t.order}))},get customRenderersByOrder(){return n.subRenderers.filter((function(e){return!e.disabledRendererPlugin&&!e.isBaseComponent})).sort((function(e,t){return e.order-t.order}))},groupedRenderersByKeyword:function(a,n){var r=a,o={},i=n?new RegExp(it(n),"i"):null;return r.forEach((function(a){n&&!["name","description","scaffold.type","searchKeywords"].some((function(t){return e.resolveVariable(t,a)&&i&&i.test(e.resolveVariable(t,a))}))||(Array.isArray(a.tags)?a.tags.concat():a.tags?[a.tags]:[t.i18n("0d98c74797e49d00bcc4c17c9d557a2b")]).forEach((function(e){o[e]=o[e]||[],o[e].push(a)}))})),o},groupedSubRenderersByKeyword:function(e,t){var a=e||this.subRenderersByOrder;return this.groupedRenderersByKeyword(a,t)},get groupedSubRenderers(){if(n.subRenderersTag){var e={},t=this.groupedSubRenderersByKeyword()[n.subRenderersTag];return t&&(e[n.subRenderersTag]=t),e}return this.groupedSubRenderersByKeyword(this.subRenderersByOrder,n.subRenderersKeywords)},groupedCustomRenderersByKeyword:function(e,t){var a=e||this.customRenderersByOrder;return this.groupedRenderersByKeyword(a,t)},get groupedCustomRenderers(){if(n.customRenderersTag){var e={},t=this.groupedCustomRenderersByKeyword()[n.customRenderersTag];return t&&(e[n.customRenderersTag]=t),e}return this.groupedCustomRenderersByKeyword(this.customRenderersByOrder,n.customRenderersKeywords)},getSubRendererById:function(e){return H.default(n.subRenderers||[],(function(t){return t.id===e}))},get groupedInsertRenderers(){var a={"全部":[]},r=n.insertRenderersKeywords,o=new RegExp(it(r),"i");return n.insertRenderers.concat().sort((function(e,t){return e.order-t.order})).forEach((function(n){r&&!["name","description","scaffold.type"].some((function(t){return e.resolveVariable(t,n)&&o.test(e.resolveVariable(t,n))}))||((Array.isArray(n.tags)?n.tags.concat():n.tags?[n.tags]:[t.i18n("0d98c74797e49d00bcc4c17c9d557a2b")]).forEach((function(e){a[e]=a[e]||[],a[e].push(n)})),a[t.i18n("a8b0c20416853bda54120bf19477ad11")].push(n))})),a},get selectedInsertRendererInfo(){return H.default(n.insertRenderers,(function(e){return e.id===n.insertSelected}))},get subEditorSlotPath(){var e,t=null===(e=n.subEditorContext)||void 0===e?void 0:e.slot;if(!t)return"";var a=[],r=function(e,t){return void 0===t&&(t=[]),!(!Array.isArray(e)||!e.some((function(e,a){return r(e,t.concat("".concat(a)))})))||(L.default(e)?Object.keys(e).some((function(a){return r(e[a],t.concat(a))})):"$$"===e&&(a=t.concat(),!0))};return r(t),a.length?a.join("/"):""},get subEditorValue(){if(n.subEditorContext)return n.subEditorContext.slot?a.__assign(a.__assign({},c.mapObject(n.subEditorContext.slot,(function(e){return"$$"===e?n.subEditorContext.value:e}))),{isSlot:!0}):n.subEditorContext.value},get canUndo(){return 0!==n.schemaHistory.findIndex((function(e){return e.versionId===n.versionId}))},get canRedo(){return n.schemaHistory.findIndex((function(e){return e.versionId===n.versionId}))<n.schemaHistory.length-1},isFlexContainer:function(e){var t,a,r=null!=e?e:n.activeId,o=this.getSchema(r);return"flex"===(null===(t=null==o?void 0:o.style)||void 0===t?void 0:t.display)||"inline-flex"===(null===(a=null==o?void 0:o.style)||void 0===a?void 0:a.display)},isFlexItem:function(e){var t,a,r=null!=e?e:n.activeId,o=this.getSchemaParentById(r,!0);return"flex"===(null==o?void 0:o.type)||"flex"===(null===(t=null==o?void 0:o.style)||void 0===t?void 0:t.display)||"inline-flex"===(null===(a=null==o?void 0:o.style)||void 0===a?void 0:a.display)},isFlexColumnItem:function(e){var t,a,r,o,i=null!=e?e:n.activeId,s=this.getSchemaParentById(i,!0),d="flex"===(null==s?void 0:s.type)||"flex"===(null===(t=null==s?void 0:s.style)||void 0===t?void 0:t.display)||"inline-flex"===(null===(a=null==s?void 0:s.style)||void 0===a?void 0:a.display),l="column"===(null==s?void 0:s.direction)||"column-reverse"===(null==s?void 0:s.direction)||"column"===(null===(r=null==s?void 0:s.style)||void 0===r?void 0:r.flexDirection)||"column-reverse"===(null===(o=null==s?void 0:s.style)||void 0===o?void 0:o.flexDirection);return!(!d||!l)},draggableContainer:function(e){var t=e||n.activeId,a=this.getSchema(t),r=(null==a?void 0:a.style)||{};return"fixed"===(null==r?void 0:r.position)||"absolute"===(null==r?void 0:r.position)},parentIsFreeContainer:function(e){var t=null!=e?e:n.activeId,a=this.getNodeById(t),r=null==a?void 0:a.parent;if(!r)return!1;var o=this.getSchema(r.id);return!!(null==o?void 0:o.isFreeContainer)&&r.id},get getSuperEditorData(){return n.superEditorData||{}},getComponentTreeSource:function(){var e;return c.mapTree(null!==(e=n.root.children)&&void 0!==e?e:[],(function(e){var t,a,r,o=e.id?_e(n.schema,e.id):n.schema,i="",s=ct(null==e?void 0:e.label),d=ct(null==o?void 0:o.label),l=ct(null==o?void 0:o.title);if(null==e?void 0:e.region)i=s;else{var c="cell"!==e.type?"<".concat(s,">"):"<列>";i="".concat(c).concat(null!==(t=null!=d?d:l)&&void 0!==t?t:s)}return i=null!=i?i:s,{id:e.id,label:i,value:null!==(a=null==o?void 0:o.id)&&void 0!==a?a:e.id,type:null!==(r=null==o?void 0:o.type)&&void 0!==r?r:e.type,schema:o,disabled:!!e.region,visible:!e.region||!!(null==e?void 0:e.children.length),children:null==e?void 0:e.children}}),1,!0)}}})).actions((function(n){f.getEnv(n);var r=0,o=null,i=void 0,s=document,d=void 0;return{setLayer:function(e){i=e},getLayer:function(){return i},setDoc:function(e){s=e},getDoc:function(){return s},setIframe:function(e){d=e},getIframe:function(){return d},setIsMobile:function(e){n.isMobile=!!e},setCtx:function(e){n.ctx=e},setTheme:function(e){n.theme=e},setIsSubEditor:function(e){n.isSubEditor=e},setShowCustomRenderersPanel:function(e){n.showCustomRenderersPanel=e},setSchema:function(e){var t,r=me(e||{});if(n.schema){var o=Ze(n.schema,r,(function(e,t){return"$$id"===t})),i=Je(n.schema,o);if("A"===(null===(t=null==o?void 0:o[0])||void 0===t?void 0:t.kind)&&("D"===o[0].item.kind||"N"===o[0].item.kind)&&Array.isArray(o[0].path)){var s=o[0].path,d=s.pop(),l=s.reduce((function(e,t){return e[t]}),i);l[d]=l[d].map((function(e){return a.__assign(a.__assign({},e),{$$id:ae()})}))}n.schema=i}else n.schema=r;this.resetHistory(),this.updateTargetName()},insertSchema:function(e){var t,a=e.context.id,r=e.context.region,o=_e(n.schema,a);if(o){var i=me(e.context.data);(null==o?void 0:o.isFreeContainer)&&(i.style={position:"absolute",inset:"10px auto auto 10px"},st(i.type)&&(i.style.width="300px"));var s=Array.isArray(o[r])?o[r].concat():o[r]?[o[r]]:[];if(e.context.beforeId){var d=V.default(s,(function(t){return t.$$id===e.context.beforeId}));~d?s.splice(d,0,i):s.push(i)}else s.push(i);return this.traceableSetSchema(we(n.schema,a,((t={})[r]=s,t))),e.context.data=i,i}},moveSchema:function(e){var a,r=e.context,o=n.schema;if(r.sourceId!==r.beforeId){var i=_e(o,r.sourceId);o=Se(o,r.sourceId,void 0,!0);var s=r.region,d=_e(o,r.id)[s];if(d=Array.isArray(d)?d.concat():d?[d]:[],r.beforeId){var l=V.default(d,(function(e){return e.$$id===r.beforeId}));if(!~l)throw new Error(t.i18n("eadc8c8d4a8776893672330598babca0"));d.splice(l,0,i)}else d.push(i);this.traceableSetSchema(we(o,r.id,((a={})[s]=d,a)))}},setActiveId:function(e,t,a){void 0===t&&(t=""),void 0===a&&(a=[]);var r=e?n.getNodeById(e):void 0;!1===(null==r?void 0:r.clickable)||e&&!r||(n.activeId=e,n.activeRegion=t,n.selections=a)},setSelections:function(e){n.activeId="",n.activeRegion="",n.selections=e?e.concat():[]},clearSelection:function(){n.selections=[]},setHoverId:function(e,t){var a=e?n.getNodeById(e):void 0;!1!==(null==a?void 0:a.clickable)&&(n.hoverId=e,n.hoverRegion=t||"")},setMouseMoveRegion:function(e){n.mouseMoveRegion=e},setInsertId:function(e){n.insertId=e},setContextId:function(e){n.contextId=e},setDragId:function(e,t,a,r){void 0===t&&(t="move"),void 0===a&&(a="schema"),n.dragId=e,n.dragMode=t,n.dragType=a,n.dragSchema=r||(e?n.getSchema(e):null)},setDropId:function(e,t){void 0===t&&(t=""),n.dropId=e,n.dropRegion=t,n.planDropId="",n.planDropRegion=""},setPlanDropId:function(e,t){n.planDropId=e,n.planDropRegion=t},setActiveToolbars:function(e){n.toolbars=e},setPanels:function(e){n.panels=e},setSubRenderers:function(e){n.subRenderers=e},changeSubRenderersKeywords:function(e){n.subRenderersKeywords=e,n.subRenderersTag=""},changeSubRenderersTag:function(e){n.subRenderersKeywords="",n.subRenderersTag=e},resetSubRenderersKeywords:function(){n.subRenderersKeywords="",n.subRenderersTag=""},changeCustomRenderersKeywords:function(e){n.customRenderersKeywords=e,n.customRenderersTag=""},changeCustomRenderersTag:function(e){n.customRenderersKeywords="",n.customRenderersTag=e},resetCustomRenderersKeywords:function(){n.customRenderersKeywords="",n.customRenderersTag=""},changeSubRendererRegion:function(e){n.subRendererRegion=e},changePanelKey:function(e){e!==n.getPanelKey()&&(n.panelKey=e)},changeLeftPanelKey:function(e){"insert"!==e&&"insert"!==n.panelKey&&e!==n.getLeftPanelKey()&&(n.leftPanelKey=e)},changeRenderersTabsKey:function(e){e!==n.renderersTabsKey&&(n.renderersTabsKey=e)},changeLeftPanelOpenStatus:function(e){e!==n.leftPanelOpenStatus&&(n.leftPanelOpenStatus=e)},showRendererPanel:function(a,r){"renderers"!==n.getLeftPanelKey()?n.leftPanelKey="renderers":a!==n.subRenderersTag&&a||e.toast.info(r||t.i18n("f3c057f37fb9a4e7dd44b04919c12578")),n.renderersTabsKey="base-renderers",a&&this.changeSubRenderersTag(a),this.changeLeftPanelOpenStatus(!0)},changeValue:function(e,t){n.activeId&&this.changeValueById(n.activeId,e,t)},changeValueById:function(e,t,a,r,o){var i=_e(n.schema,e);if(i)if(a){var s=Je(i,a);this.traceableSetSchema(we(n.schema,e,ve(me(s)),!0),o)}else this.traceableSetSchema(we(n.schema,e,ve(me(t)),r),o)},updateContainerStyleByDrag:function(e,t,r){var o=e||n.dragId;if(o){var i=n.getSchema(o),s=(null==i?void 0:i.style)||{};if(o&&"fixed"===(null==s?void 0:s.position)||"absolute"===(null==s?void 0:s.position)){var d=(s.inset||"auto").split(" "),l={top:d[0]||"auto",right:d[1]||"auto",bottom:d[2]||d[0]||"auto",left:d[3]||d[1]||"auto"},c="".concat("auto"!==l.top?ot(l.top,r):"auto"," ").concat("auto"!==l.right?ot(l.right,-t):"auto"," ").concat("auto"!==l.bottom?ot(l.bottom,-r):"auto"," ").concat("auto"!==l.left?ot(l.left,t):"auto");this.changeValueById(o,a.__assign(a.__assign({},i),{style:a.__assign(a.__assign({},s),{inset:c})})),this.calculateHighlightBox([o])}}},moveUp:function(e){e&&this.traceableSetSchema(Re(n.schema,e))},moveDown:function(e){e&&this.traceableSetSchema(Ne(n.schema,e))},del:function(e){var t,a;if(e===n.activeId){var r=null===(t=n.getNodeById(e))||void 0===t?void 0:t.host;this.setActiveId(r?r.id:"")}else if(n.activeId){var o=_e(n.schema,e);if(_e(o,n.activeId)){r=null===(a=n.getNodeById(e))||void 0===a?void 0:a.host;this.setActiveId(r?r.id:"")}}this.traceableSetSchema(Se(n.schema,e))},delMulti:function(e){var t=this;(Array.isArray(e)?e:[e]).forEach((function(e){var a,r;if(e===n.activeId){var o=null===(a=n.getNodeById(e))||void 0===a?void 0:a.host;t.setActiveId(o?o.id:"")}else if(n.activeId){var i=_e(n.schema,e);if(_e(i,n.activeId)){o=null===(r=n.getNodeById(e))||void 0===r?void 0:r.host;t.setActiveId(o?o.id:"")}}})),this.traceableSetSchema(e.reduce((function(e,t){return Se(e,t)}),n.schema))},duplicate:function(e){this.traceableSetSchema((Array.isArray(e)?e:[e]).reduce((function(e,t){return ke(e,t)}),n.schema))},emptyRegion:function(e,t){var a;this.traceableSetSchema(we(n.schema,e,((a={})[t]=[],a)))},replaceChild:function(e,t){this.traceableSetSchema(we(n.schema,e,me(t),!0))},setInsertRegion:function(e,a,r,o,i,s){void 0===a&&(a=""),void 0===r&&(r=t.i18n("a8b0c20416853bda54120bf19477ad11")),void 0===o&&(o="insert"),void 0===i&&(i=""),n.insertId=a,n.insertRegion=e,n.insertTag=r,n.insertMode=o,n.insertOrigId=i,n.insertBeforeId=s||""},closeInsertPanel:function(){n.insertOrigId="",n.insertId="",n.insertRegion="",n.insertSelected="",n.insertRenderersKeywords="",n.insertBeforeId=""},showInsertRendererPanel:function(){n.showInsertRenderer=!0},closeInsertRendererPanel:function(){n.showInsertRenderer=!1},setInsertRenderers:function(e){n.insertRenderers=e},changeInsertRenderersKeywords:function(e){n.insertRenderersKeywords=e},resetInsertRenderersKeywords:function(){n.insertRenderersKeywords=""},setInsertTag:function(e){n.insertTag=e},setInsertSelected:function(e){n.insertSelected=e},setJSONSchemaUri:function(e){n.jsonSchemaUri=e},openSubEditor:function(e){n.activeId&&(n.subEditorContext=a.__assign(a.__assign({},e),{data:c.extendObject(e.data,{__curCmptTreeWrap:{label:e.title,disabled:!0},__superCmptTreeSource:n.getComponentTreeSource()})}))},confirmSubEditor:function(e){var t,r=a.__read(e,1)[0],o=n.subEditorContext,i=o.onChange,s=o.slot,d=r.schema,l=(null===(t=r.__pristine)||void 0===t?void 0:t.schema)||d;if(s){var u=n.subEditorSlotPath.replace(/(?:\/)/g,".");d=c.getVariable(d,u),l=c.getVariable(l,u),Array.isArray(d)&&1===d.length&&!Array.isArray(l)&&(d=d[0])}i(d,i.length>1?Ze(l,d):void 0),n.subEditorContext=void 0},closeSubEditor:function(){n.subEditorContext=void 0},subEditorOnChange:function(){o&&(n.subEditorContext=a.__assign(a.__assign({},n.subEditorContext),{canUndo:o.canUndo(),canRedo:o.canRedo()}))},undoSubEditor:function(){o&&o.undo()},redoSubEditor:function(){o&&o.redo()},subEditorRef:function(e){o=e},openScaffoldForm:function(e){n.scaffoldForm=e},closeScaffoldForm:function(){n.scaffoldForm=void 0},setScaffoldBuzy:function(e){n.scaffoldFormBuzy=!!e},setScaffoldError:function(e){void 0===e&&(e=""),n.scaffoldError=e},openPopOverForm:function(e){n.popOverForm=e},closePopOverForm:function(){n.popOverForm=void 0},calculateHighlightBox:function(e){n.calculateStarted=!0,e.forEach((function(e){var t=n.getNodeById(e);null==t||t.calculateHighlightBox(n)}))},resetHighlightBox:function(e){e.forEach((function(e){var t=n.getNodeById(e);null==t||t.resetHighlightBox(n)}))},updateTargetName:function(){var e=[];Ye(n.schema,(function(t,a,n){return"name"===a&&t&&n&&("crud"===n.type||"form"===n.type||"page"===n.type||"service"===n.type||"chart"===n.type||"wizard"===n.type)&&e.push({type:n.type,name:t,editorId:n.$$id}),t})),n.targetNames=f.cast(e)},traceableSetSchema:function(e,t){var a=n.schemaHistory.findIndex((function(e){return e.versionId===n.versionId}));~a&&n.schemaHistory.splice(a+1,n.schemaHistory.length-a-1),t&&n.schemaHistory.pop(),n.schemaHistory.push({versionId:n.versionId=r++,schema:e}),n.schema=e,this.updateTargetName()},undo:function(){var e=n.schemaHistory.findIndex((function(e){return e.versionId===n.versionId}));if(e>0){var t=n.schemaHistory[e-1];n.versionId=t.versionId,n.schema=t.schema,this.updateTargetName(),this.autoSelectRoot()}},redo:function(){var e=n.schemaHistory.findIndex((function(e){return e.versionId===n.versionId}));if(e<n.schemaHistory.length-1){var t=n.schemaHistory[e+1];n.versionId=t.versionId,n.schema=t.schema,this.updateTargetName(),this.autoSelectRoot()}},autoSelectRoot:function(){n.getSchema(n.activeId)||this.setActiveId(n.getRootId())},resetHistory:function(){r=0,n.versionId=r++,n.schemaHistory.replace([{versionId:n.versionId,schema:n.schema}]),this.autoSelectRoot()},applyPatches:function(e){var t=n.schema;e.forEach((function(e){var n,r;if("update"===e.op)t=we(t,e.target,e.value);else if("replace"===e.op)t=we(t,e.target,e.value,!0);else if("delete"===e.op)t=Se(t,e.target);else if("push"===e.op){var o=(i=_e(t,e.target))[e.key];(o=Array.isArray(o)?o.concat():o?[o]:[]).push(e.value),i=a.__assign(a.__assign({},i),((n={})[e.key]=o,n)),t=we(t,e.target,i)}else if("splice"===e.op){var i;o=(i=_e(t,e.target))[e.key];(o=Array.isArray(o)?o.concat():o?[o]:[]).splice.apply(o,a.__spreadArray([],a.__read(e.args),!1)),i=a.__assign(a.__assign({},i),((r={})[e.key]=o,r)),t=we(t,e.target,i)}})),this.traceableSetSchema(t)},updateAppLocaleState:function(){n.appLocaleState+=1},setAppLocale:function(e){e&&(n.appLocale=e,this.updateAppLocaleState())},setAppCorpusData:function(e){void 0===e&&(e={}),n.appCorpusData=e,this.updateAppLocaleState()}}})),tr=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return a.__extends(r,n),r.prototype.afterResolveEditorInfo=function(e){var a,n,r,o,i,s,d=this.props.store,l=e.context;if(null===(a=d.subEditorContext)||void 0===a?void 0:a.slot){var c=d.subEditorSlotPath;!~l.schemaPath.indexOf(c)&&l.data?(l.data.editable=!1,l.data.memberImmutable=!Array.isArray(null===(o=d.subEditorContext)||void 0===o?void 0:o.value),l.data.memberImmutable||(l.data.name=t.i18n("22c799040acdb2601b437ed5449de076"))):l.schemaPath===c&&l.data&&(Array.isArray(null===(i=d.subEditorContext)||void 0===i?void 0:i.value)||(l.data.movable=!1,l.data.removable=!1),l.data.typeMutable=null===(s=d.subEditorContext)||void 0===s?void 0:s.typeMutable)}else l.data&&!l.schemaPath&&(null===(n=d.subEditorContext)||void 0===n?void 0:n.memberImmutable)&&(l.data.memberImmutable=null===(r=d.subEditorContext)||void 0===r?void 0:r.memberImmutable)},r.prototype.handleBuildPanels=function(e){var t,n;if(null===(n=this.props.store.subEditorContext)||void 0===n?void 0:n.slot){var r=e.context;if(r.info.memberImmutable){var o=r.data.concat();r.data.splice(0,r.data.length);var i=o.filter((function(e){return"renderers"!==e.key}));i&&(t=r.data).push.apply(t,a.__spreadArray([],a.__read(i),!1)),r.changeLeftPanelKey="outline"}}},r.prototype.buildSchema=function(){var e,n=this,r=this.props,o=r.store,i=r.manager,s=r.amisEnv,d=o.subEditorContext,l=i.config,u=o.superEditorData;return d&&(u=c.createObject(o.superEditorData,null==d?void 0:d.data)),{size:"full",title:null===(e=o.subEditorContext)||void 0===e?void 0:e.title,onClose:o.closeSubEditor,onConfirm:o.confirmSubEditor,body:o.subEditorContext?{type:"form",mode:"normal",wrapperComponent:"div",onValidate:function(e){return a.__awaiter(n,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,null===(r=null===(n=o.subEditorContext)||void 0===n?void 0:n.validate)||void 0===r?void 0:r.call(n,e)];case 1:return(t=a.sent())?[2,{schema:t}]:[2]}}))}))},onChange:o.subEditorOnChange,body:[{name:"schema",asFormItem:!0,children:function(e){var t,a,r=e.value,d=e.onChange;return F.default.createElement(ur,{autoFocus:!0,value:r,ref:o.subEditorRef,onChange:d,data:null===(t=o.subEditorContext)||void 0===t?void 0:t.data,superEditorData:u,schemaFilter:i.config.schemaFilter,theme:i.env.theme,afterResolveEditorInfo:n.afterResolveEditorInfo,onBuildPanels:n.handleBuildPanels,isMobile:o.isMobile,isSubEditor:!0,iframeUrl:l.iframeUrl,ctx:o.ctx,amisEnv:s||l.amisEnv,appLocale:l.appLocale,i18nEnabled:l.i18nEnabled,plugins:l.plugins,actionOptions:l.actionOptions,showCustomRenderersPanel:null===(a=o.showCustomRenderersPanel)||void 0===a||a,isHiddenProps:l.isHiddenProps,$schemaUrl:l.$schemaUrl})}}]}:{type:"tpl",tpl:"Loading..."},actions:[[{children:d?F.default.createElement("div",{className:"ae-DialogToolbar"},F.default.createElement("button",{type:"button","data-tooltip":"撤销",disabled:!d.canUndo,onClick:o.undoSubEditor},F.default.createElement("i",{className:"fa fa-undo"})),F.default.createElement("button",{type:"button","data-tooltip":"重做",disabled:!d.canRedo,onClick:o.redoSubEditor},F.default.createElement("i",{className:"fa fa-rotate-right"}))):null},{type:"submit",label:t.i18n("e83a256e4f5bb4ff8b3d804b5473217a"),level:"primary"},{type:"button",label:t.i18n("625fb26b4b3340f7872b411f401e754c"),actionType:"close"}]],closeOnEsc:!1,bodyClassName:"ae-dialog subEditor-dialog"}},r.prototype.render=function(){var t=this.props,n=t.store,r=t.theme,o=t.manager;return e.render(a.__assign({type:"dialog"},this.buildSchema()),{show:!!n.subEditorContext,data:{schema:n.subEditorValue}},a.__assign(a.__assign({},y.omit(o.env,"replaceText")),{session:"editor-dialog",theme:r}))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"afterResolveEditorInfo",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleBuildPanels",null),r=a.__decorate([u.observer],r)}(F.default.Component),ar=function(t){function n(e){var a=t.call(this,e)||this;return a.breadcrumbRef=F.default.createRef(),a.bcnContentRef=F.default.createRef(),a.state={showLeftScrollBtn:!1,showRightScrollBtn:!1},a.unReaction=i.reaction((function(){return a.props.store.bcn}),(function(){a.refreshHandleScroll(!0)})),a}return a.__extends(n,t),n.prototype.componentDidMount=function(){var t=this,a=this.getCurBreadcrumb(),n=this.getBreadcrumbContainer();a&&n&&(this.unSensor=e.resizeSensor(n,(function(){t.refreshHandleScroll()})))},n.prototype.componentWillUnmount=function(){this.unReaction(),this.unSensor&&(this.unSensor(),delete this.unSensor)},n.prototype.refreshHandleScroll=function(e){var t=this;setTimeout((function(){t.HandleScroll(e)}),0)},n.prototype.getCurBreadcrumb=function(){return this.bcnContentRef.current},n.prototype.getBreadcrumbContainer=function(){return this.breadcrumbRef.current},n.prototype.getScrollLeft=function(){var e=this.getCurBreadcrumb();return e?e.style.left:"0"},n.prototype.toNumber=function(e){return e?Number.parseInt(e):0},n.prototype.HandleScroll=function(e){var t=this.getCurBreadcrumb(),a=this.getBreadcrumbContainer();if(t&&a){var n=this.toNumber(this.getScrollLeft()),r=t.offsetWidth-a.offsetWidth;e&&(t.style.left="0"),this.setState({showLeftScrollBtn:n<0,showRightScrollBtn:n>-r})}},n.prototype.handleScrollToLeft=function(){var e=this.getCurBreadcrumb();if(e){var t=this.toNumber(this.getScrollLeft());t>=-50&&t<0?(e.style.left="0",this.refreshHandleScroll()):t<-50&&(e.style.left="".concat(t+50,"px"),this.refreshHandleScroll())}},n.prototype.handleScrollToRight=function(){var e=this.getCurBreadcrumb(),t=this.getBreadcrumbContainer();if(e&&t){var a=this.toNumber(this.getScrollLeft()),n=e.offsetWidth-t.offsetWidth;e.style.left=a-50>-n?"".concat(a-50,"px"):"-".concat(n,"px"),this.refreshHandleScroll()}},n.prototype.handleClick=function(e){var t,a=e.currentTarget,n=a.getAttribute("data-node-id"),r=a.getAttribute("data-node-region"),o=this.props.store;this.props.manager;var i=o.getNodeById(n);!1!==(null===(t=null==i?void 0:i.info)||void 0===t?void 0:t.editable)&&(r?o.setActiveId(n,r):o.setActiveId(n))},n.prototype.handleMouseEnter=function(e){var t=e.currentTarget,a=t.getAttribute("data-node-id"),n=t.getAttribute("data-node-region");this.props.store.setHoverId(a,n)},n.prototype.render=function(){var t=this,a=this.props.store,n=this.state,r=n.showLeftScrollBtn,o=n.showRightScrollBtn,i=a.bcn;return F.default.createElement("div",{className:"ae-Breadcrumb",ref:this.breadcrumbRef},r&&F.default.createElement("div",{className:"ae-Breadcrumb-scrollLeft-btn",onClick:this.handleScrollToLeft},F.default.createElement(e.Icon,{icon:"editor-double-arrow",className:"icon"})),F.default.createElement("div",{className:"ae-Breadcrumb-content",ref:this.bcnContentRef},i.length?F.default.createElement("ul",null,i.map((function(e,a){var n,r=null===(n=e.parent)||void 0===n?void 0:n.uniqueChildren;return F.default.createElement("li",{key:a},F.default.createElement("span",{"data-node-id":e.id,"data-node-region":e.region,onClick:t.handleClick,onMouseEnter:t.handleMouseEnter},e.label),(null==r?void 0:r.length)>1?F.default.createElement("ul",{className:"hoverShowScrollBar"},r.map((function(a){return F.default.createElement("li",{key:"".concat(a.id,"-").concat(a.region)},F.default.createElement("span",{"data-node-id":a.id,"data-node-region":a.region,onClick:t.handleClick,onMouseEnter:t.handleMouseEnter,className:a.id===e.id&&a.region===e.region?"is-active":""},a.label))}))):null)}))):null),o&&F.default.createElement("div",{className:"ae-Breadcrumb-scrollRight-btn",onClick:this.handleScrollToRight},F.default.createElement(e.Icon,{icon:"editor-double-arrow",className:"icon"})))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Boolean]),a.__metadata("design:returntype",void 0)],n.prototype,"refreshHandleScroll",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getCurBreadcrumb",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getBreadcrumbContainer",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",String)],n.prototype,"getScrollLeft",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",Number)],n.prototype,"toNumber",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Boolean]),a.__metadata("design:returntype",void 0)],n.prototype,"HandleScroll",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"handleScrollToLeft",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"handleScrollToRight",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleMouseEnter",null),n=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],n)}(F.default.Component),nr=function(t){function n(e){var a=t.call(this,e)||this;return a.state={step:0},a}return a.__extends(n,t),n.prototype.handleConfirm=function(e){var t,n,r,o=a.__read(e,1)[0],i=this.props.store;if(o=a.__assign(a.__assign({},null===(t=i.scaffoldForm)||void 0===t?void 0:t.value),o),null===(n=i.scaffoldForm)||void 0===n?void 0:n.pipeOut){var s=i.scaffoldForm.pipeOut(o);o=a.__assign({},s)}null===(r=i.scaffoldForm)||void 0===r||r.callback(o),i.closeScaffoldForm(),this.setState({step:0})},n.prototype.buildSchema=function(){var e,t,n,r=this.props.store.scaffoldForm,o=null!==(t=r.controls)&&void 0!==t?t:r.body;return r.stepsBody&&(o=a.__spreadArray([{type:"steps",name:"__steps",className:"ae-Steps",steps:o.map((function(e,t){return{title:e.title,value:t,iconClassName:"ae-Steps-Icon"}}))}],a.__read(o.map((function(e,t){return{type:"container",visibleOn:"__step === ".concat(t),body:e.body}}))),!1)),n=et(r.mode)?r.mode:{mode:r.mode||"normal"},a.__assign(a.__assign({type:"form",wrapWithPanel:!1,initApi:r.initApi,api:r.api},n),((e={wrapperComponent:"div",data:{__step:0}})[r.controls?"controls":"body"]=o,e))},n.prototype.scopeRef=function(e){this.amisScope=e},n.prototype.goToNextStep=function(){var e,t=null===(e=this.amisScope)||void 0===e?void 0:e.getComponents()[0].props.store,a=this.state.step+1;t.setValueByName("__step",a),this.setState({step:a})},n.prototype.goToPrevStep=function(){var e,t=null===(e=this.amisScope)||void 0===e?void 0:e.getComponents()[0].props.store,a=this.state.step-1;t.setValueByName("__step",a),this.setState({step:a})},n.prototype.handleConfirmClick=function(){var e;return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(!(t=null===(e=this.amisScope)||void 0===e?void 0:e.getComponents()[0]))return[2];n=this.props.store,a.label=1;case 1:return a.trys.push([1,3,4,5]),n.setScaffoldBuzy(!0),[4,t.doAction({type:"submit"},t.props.data,!0)];case 2:return r=a.sent(),this.handleConfirm([r]),[3,5];case 3:return o=a.sent(),console.log(o.stack),n.setScaffoldError(o.message),[3,5];case 4:return n.setScaffoldBuzy(!1),[7];case 5:return[2]}}))}))},n.prototype.handleCancelClick=function(){this.props.store.closeScaffoldForm(),this.setState({step:0})},n.prototype.render=function(){var t=this.props,n=t.store,r=t.theme,o=t.manager,i=n.scaffoldForm,s=e.getTheme(r||"cxd").classnames,d=!!(null==i?void 0:i.stepsBody),l=d&&this.state.step===i.body.length-1,u=d&&0===this.state.step;return F.default.createElement(e.Modal,{size:(null==i?void 0:i.size)||"md",contentClassName:null==i?void 0:i.className,show:!!i,onHide:n.closeScaffoldForm,closeOnEsc:!n.scaffoldFormBuzy},F.default.createElement("div",{className:s("Modal-header")},n.scaffoldFormBuzy?null:F.default.createElement("a",{"data-position":"left",onClick:n.closeScaffoldForm,className:s("Modal-close")},F.default.createElement(e.Icon,{icon:"close",className:"icon"})),F.default.createElement("div",{className:s("Modal-title")},null==i?void 0:i.title)),F.default.createElement("div",{className:s("Modal-body")},i?e.render(this.buildSchema(),{data:c.createObject(n.ctx,a.__assign(a.__assign({},(null==i?void 0:i.value)||{}),{__step:0})),onValidate:i.validate,scopeRef:this.scopeRef},a.__assign(a.__assign({},o.env),{session:"scaffold-dialog",theme:r})):F.default.createElement("p",null,"Loading...")),F.default.createElement("div",{className:s("Modal-footer")},n.scaffoldFormBuzy||n.scaffoldError?F.default.createElement("div",{className:s("Dialog-info"),key:"info"},F.default.createElement(e.Spinner,{size:"sm",key:"info",show:n.scaffoldFormBuzy}),n.scaffoldError?F.default.createElement("span",{className:s("Dialog-error")},n.scaffoldError):null):null,d&&!u&&F.default.createElement(e.Button,{level:"primary",onClick:this.goToPrevStep},"上一步"),d&&!l&&F.default.createElement(e.Button,{level:"primary",onClick:this.goToNextStep},"下一步"),(!d||l)&&F.default.createElement(e.Button,{level:"primary",onClick:this.handleConfirmClick,disabled:n.scaffoldFormBuzy},"确认"),F.default.createElement(e.Button,{onClick:this.handleCancelClick},"取消")))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleConfirm",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"scopeRef",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"goToNextStep",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"goToPrevStep",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",Promise)],n.prototype,"handleConfirmClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"handleCancelClick",null),n=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],n)}(F.default.Component),rr=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.overlay=F.default.createRef(),e}return a.__extends(n,t),n.prototype.buildSchema=function(){var e=this,t=this.props.store.popOverForm;return{type:"form",wrapWithPanel:!1,mode:"normal",wrapperComponent:"div",body:t.body,submitOnChange:!0,autoFocus:!0,onFinished:function(a){var n;null===(n=t.callback)||void 0===n||n.call(t,a,Ze(t.value,a)),setTimeout((function(){var t;return null===(t=e.overlay.current)||void 0===t?void 0:t.updatePosition()}),200)}}},n.prototype.render=function(){var t=this.props,n=t.store,r=t.theme,o=t.manager,i=n.popOverForm;return F.default.createElement(e.Overlay,{target:null==i?void 0:i.target,placement:"left-bottom-left-top left-top-left-bottom right-bottom-right-top right-top-right-bottom center",show:!!i,ref:this.overlay},F.default.createElement(e.PopOver,{overlay:!0,className:"ae-Editor-popOverForm",onHide:n.closePopOverForm},i?e.render(this.buildSchema(),{data:c.createObject(n.ctx,null==i?void 0:i.value)},a.__assign(a.__assign({},o.env),{session:"popover-form",theme:r})):F.default.createElement("p",null,"Loading...")))},n=a.__decorate([u.observer],n)}(F.default.Component),or=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(n,t),n.prototype.render=function(){var t=this.props.store.contextMenuPanel,a=t&&t.menus?t.menus:[];return a&&a.length>0?F.default.createElement("div",{className:"context-menu-setting"},F.default.createElement("div",{className:"setting-header"},"批量操作"),F.default.createElement("div",{className:"setting-body"},a.map((function(t){return t.label&&F.default.createElement("div",{key:t.label,className:"setting-item ".concat(t.disabled?"disabled":""),onClick:t.disabled?null:t.onSelect},F.default.createElement("div",{className:"icon-box"},F.default.createElement(e.Icon,{icon:t.icon,className:"menu-icon"})),F.default.createElement("div",{className:"setting-info"},t.label))})))):null},n=a.__decorate([u.observer],n)}(F.default.Component),ir=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(n,t),n.prototype.getPopOverContainer=function(){return p.findDOMNode(this)},n.prototype.render=function(){var t=this.props,a=t.store,n=t.manager,r=t.node,o=t.panelItem,i=t.theme,s=a.activeId;return F.default.createElement(e.Drawer,{position:"left",size:"md",theme:i,show:!!o,onHide:a.closeInsertPanel,className:"ae-InsertPanel-drawer"},o&&o.component?F.default.createElement(o.component,{key:o.key,id:s,info:null==r?void 0:r.info,path:null==r?void 0:r.path,value:a.value,onChange:n.panelChangeValue,store:a,manager:n,popOverContainer:this.getPopOverContainer}):null)},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getPopOverContainer",null),n=a.__decorate([u.observer],n)}(F.default.Component),sr=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(n,t),n.prototype.getPopOverContainer=function(){return p.findDOMNode(this)},n.prototype.render=function(){var t=this.props,a=t.store,n=t.manager,r=t.node,o=t.panelItem,i=t.theme,s=a.activeId,d=a.showInsertRenderer;return F.default.createElement(e.Drawer,{position:"left",size:"md",theme:i,show:d,onHide:a.closeInsertRendererPanel,className:"ae-InsertRendererPanel-drawer",bodyClassName:"ae-drawer-renderers"},o.title&&F.default.createElement("div",{className:"ae-drawer-title"},o.title),o&&o.component?F.default.createElement(o.component,{key:o.key,id:s,info:null==r?void 0:r.info,path:null==r?void 0:r.path,value:a.value,onChange:n.panelChangeValue,store:a,manager:n,popOverContainer:this.getPopOverContainer}):null)},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getPopOverContainer",null),n=a.__decorate([u.observer],n)}(F.default.Component),dr=function(n){function r(e){var t=n.call(this,e)||this;return t.state={isFixedStatus:!1},t}return a.__extends(r,n),r.prototype.handleHidden=function(){var e=this.props.store,t=e.changeLeftPanelOpenStatus,a=e.leftPanelOpenStatus,n=e.changeLeftPanelKey,r=!a;t(r),n(r?"outline":"none")},r.prototype.handleFixed=function(){this.setState({isFixedStatus:!this.state.isFixedStatus})},r.prototype.handleSelect=function(e){var t=this.props.store,a=t.changeLeftPanelOpenStatus,n=t.changeLeftPanelKey;e&&(a(!0),n(e))},r.prototype.getPopOverContainer=function(){return p.findDOMNode(this)},r.prototype.render=function(){var a=this,n=this.props,r=n.store,o=n.manager,i=n.theme,s=this.state.isFixedStatus,d=r.leftPanelOpenStatus,l=r.getLeftPanels(),c=r.activeId,u=r.getNodeById(c),p=r.getLeftPanelKey(),f=r.insertId&&r.insertRegion&&H.default(l,(function(e){return"insert"===e.key})),h=H.default(l,(function(e){return"insertRenderer"===e.key}));return F.default.createElement(F.default.Fragment,null,l.length>0&&F.default.createElement("div",{className:B.default("editor-left-panel width-draggable",d?"":"hidden-status",s?"fixed-status":"")},F.default.createElement("div",{className:"editor-panel-btn","editor-tooltip":s?t.i18n("95509c09bdef4bb7842a9b957ab1f971"):t.i18n("426480bb614633c8c3ba8faa0338b72f"),"tooltip-position":"right"},F.default.createElement(e.Icon,{icon:s?"editor-fixed":"editor-no-fixed",className:"panel-btn",onClick:this.handleFixed})),F.default.createElement(e.Tabs,{className:"editorPanel-tabs",linksClassName:"editorPanel-tabs-header",contentClassName:"editorPanel-tabs-content",theme:i,activeKey:p,onSelect:this.handleSelect,tabsMode:"sidebar",sidePosition:"left"},l.map((function(t){return"insert"!==t.key&&"insertRenderer"!==t.key?F.default.createElement(e.Tab,{key:t.key,eventKey:t.key,title:t.title,className:"editorPanel-tabs-pane ae-Editor-".concat(t.key,"Pane"),mountOnEnter:!0,unmountOnExit:!1},function(e){return e.render?e.render({id:c,info:null==u?void 0:u.info,path:null==u?void 0:u.path,node:u,value:r.value,onChange:o.panelChangeValue,store:r,manager:o,popOverContainer:a.getPopOverContainer}):e.component?F.default.createElement(e.component,{node:u,key:e.key,id:c,info:null==u?void 0:u.info,path:null==u?void 0:u.path,value:r.value,onChange:o.panelChangeValue,store:r,manager:o,popOverContainer:a.getPopOverContainer}):null}(t)):null}))),F.default.createElement("div",{className:B.default("left-panel-arrow",d?"":"hidden-status"),onClick:this.handleHidden})),s&&F.default.createElement("div",{className:"editor-left-panel-fixed-placeholder"}),F.default.createElement(ir,{store:r,manager:o,node:u,panelItem:f,theme:i}),F.default.createElement(sr,{store:r,manager:o,node:u,panelItem:h,theme:i}))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleHidden",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleFixed",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleSelect",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"getPopOverContainer",null),r=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],r)}(F.default.Component),lr=function(e){function t(t){var a=e.call(this,t)||this;return a.handleResizeMouseDown=a.handleResizeMouseDown.bind(a),a.handleResizeMouseMove=a.handleResizeMouseMove.bind(a),a.handleResizeMouseUp=a.handleResizeMouseUp.bind(a),a}return a.__extends(t,e),t.prototype.handleResizeMouseDown=function(e){3==e.nativeEvent.which||(this.dragWrap=e.currentTarget.parentElement,document.addEventListener("mousemove",this.handleResizeMouseMove),document.addEventListener("mouseup",this.handleResizeMouseUp),this.startX=e.clientX,this.startWidth=this.dragWrap.offsetWidth)},t.prototype.handleResizeMouseMove=function(e){var t=this.props.isLeftDragIcon,a=e.clientX-this.startX;this.dragWrap.style.cssText+="width: ".concat(Math.max(t?this.startWidth-a:this.startWidth+a,260),"px")},t.prototype.handleResizeMouseUp=function(){document.removeEventListener("mousemove",this.handleResizeMouseMove),document.removeEventListener("mouseup",this.handleResizeMouseUp)},t.prototype.render=function(){var e=this.props,t=e.isLeftDragIcon,a=e.className;return F.default.createElement("div",{onMouseDown:this.handleResizeMouseDown,className:B.default("width-draggable-icon",a,t?"leftBtn":"")})},t}(F.default.Component),cr=function(n){function r(e){var t=n.call(this,e)||this;return t.state={isOpenStatus:!0,isFixedStatus:!1},t}return a.__extends(r,n),r.prototype.handleFixed=function(){this.setState({isFixedStatus:!this.state.isFixedStatus})},r.prototype.handleSelect=function(e){this.props.store.changePanelKey(e)},r.prototype.handleHidden=function(){this.setState({isOpenStatus:!this.state.isOpenStatus})},r.prototype.getPopOverContainer=function(){return p.findDOMNode(this)},r.prototype.render=function(){var a=this,n=this.props,r=n.store,o=n.manager,i=n.theme,s=this.state,d=s.isOpenStatus,l=s.isFixedStatus,c=r.getPanels(),u=r.activeId,p=r.getNodeById(u),f=r.getPanelKey(),h=function(e){return e.render?e.render({id:u,info:null==p?void 0:p.info,path:null==p?void 0:p.path,node:p,value:r.value,onChange:o.panelChangeValue,store:r,manager:o,popOverContainer:a.getPopOverContainer}):e.component?F.default.createElement(e.component,{node:p,key:e.key,id:u,info:null==p?void 0:p.info,path:null==p?void 0:p.path,value:r.value,onChange:o.panelChangeValue,store:r,manager:o,popOverContainer:a.getPopOverContainer}):null};return c.length>0?F.default.createElement("div",{className:B.default("editor-right-panel width-draggable",c.length>1?"mul-tabs-panel":"",d?"":"hidden-status",l?"fixed-status":"")},F.default.createElement("div",{className:"editor-panel-btn","editor-tooltip":l?t.i18n("95509c09bdef4bb7842a9b957ab1f971"):t.i18n("426480bb614633c8c3ba8faa0338b72f"),"tooltip-position":"left"},F.default.createElement(e.Icon,{icon:l?"editor-fixed":"editor-no-fixed",className:"panel-btn",onClick:this.handleFixed})),F.default.createElement("div",{className:"editorPanel-inner"},1===c.length?h(c[0]):F.default.createElement(e.Tabs,{theme:i,tabsMode:"sidebar",sidePosition:"right",className:"editorPanel-tabs",linksClassName:"editorPanel-tabs-header",contentClassName:"editorPanel-tabs-content",activeKey:f,onSelect:this.handleSelect},c.map((function(t){var a=nt(t);return F.default.createElement(e.Tab,{key:t.key,eventKey:t.key,title:F.default.createElement("span",{className:"editor-tab-icon","editor-tooltip":t.title,"tooltip-position":"left"},a&&F.default.createElement(e.Icon,{icon:t.pluginIcon,className:"pluginIcon"}),!a&&F.default.createElement("i",{className:"fa ".concat(t.icon)})),className:"editorPanel-tabs-pane ae-Editor-".concat(t.key,"Pane"),mountOnEnter:!0,unmountOnExit:!1},h(t))})))),F.default.createElement(lr,{isLeftDragIcon:!0}),F.default.createElement("div",{className:B.default("right-panel-arrow",d?"":"hidden-status"),onClick:this.handleHidden})):null},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleFixed",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleSelect",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"handleHidden",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"getPopOverContainer",null),r=a.__decorate([u.observer,a.__metadata("design:paramtypes",[Object])],r)}(F.default.Component),ur=function(n){function r(e){var t,r,o=this;(o=n.call(this,e)||this).mainRef=F.default.createRef(),o.isInternalChange=!1;var s=e.value,d=e.isSubEditor,l=void 0!==d&&d;e.onChange;var c=e.showCustomRenderersPanel,u=e.superEditorData,p=a.__rest(e,["value","isSubEditor","onChange","showCustomRenderersPanel","superEditorData"]),f=a.__assign({},p);return o.store=er.create({isMobile:e.isMobile,theme:e.theme,isSubEditor:l,amisDocHost:e.amisDocHost,ctx:e.ctx,superEditorData:u,appLocale:e.appLocale,appCorpusData:null===(t=null==e?void 0:e.amisEnv)||void 0===t?void 0:t.replaceText,i18nEnabled:null!==(r=null==e?void 0:e.i18nEnabled)&&void 0!==r&&r},f),o.store.setSchema(s),void 0!==c&&o.store.setShowCustomRenderersPanel(c),o.manager=new jt(f,o.store),e.isSubEditor&&window.editorStore||(window.editorStore=o.store),document.addEventListener("keydown",o.handleKeyDown),window.addEventListener("message",o.handleMessage,!1),o.unReaction=i.reaction((function(){return o.store.schemaRaw}),(function(t){o.lastResult=t,o.isInternalChange||e.onChange(t)})),o}return a.__extends(r,n),r.prototype.componentDidMount=function(){this.props.isSubEditor||this.manager.trigger("init",{data:this.manager})},r.prototype.componentDidUpdate=function(e){var t,a,n,r=this.props;r.value!==e.value&&r.value!==this.lastResult&&(this.isInternalChange=!0,this.store.setSchema(r.value),this.isInternalChange=!1),r.isMobile!==e.isMobile&&this.store.setIsMobile(r.isMobile),r.ctx!==e.ctx&&this.store.setCtx(r.ctx),r.appLocale!==e.appLocale&&this.store.setAppLocale(r.appLocale),(null===(t=null==r?void 0:r.amisEnv)||void 0===t?void 0:t.replaceText)!==(null===(a=null==e?void 0:e.amisEnv)||void 0===a?void 0:a.replaceText)&&this.store.setAppCorpusData(null===(n=null==r?void 0:r.amisEnv)||void 0===n?void 0:n.replaceText)},r.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("message",this.handleMessage),this.unReaction(),this.manager.dispose(),f.destroy(this.store)},r.prototype.handleKeyDown=function(a){if(!this.props.isSubEditor){var n=this.manager.store;if("BODY"===a.target.tagName&&("z"===a.key||"Z"===a.key)&&(a.metaKey||a.ctrlKey)&&a.shiftKey)return a.preventDefault(),void this.redo();if("BODY"===a.target.tagName&&("z"===a.key||"Z"===a.key)&&(a.metaKey||a.ctrlKey))return a.preventDefault(),void this.undo();if("BODY"===a.target.tagName&&("s"===a.key||"S"===a.key)&&(a.metaKey||a.ctrlKey))return a.preventDefault(),void this.save();if("BODY"===a.target.tagName&&("c"===a.key||"C"===a.key)&&(a.metaKey||a.ctrlKey))return a.preventDefault(),void this.copy();if("BODY"===a.target.tagName&&("v"===a.key||"V"===a.key)&&(a.metaKey||a.ctrlKey))return a.preventDefault(),void(this.curCopySchemaData&&this.paste());if("BODY"===a.target.tagName&&"x"===a.key&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.store.activeId&&((r=n.getNodeById(this.store.activeId))&&n.activeRegion?e.toast.warning(t.i18n("d6f73c6f3b92be5a64f7ea0163501284")):n.isRootSchema(this.store.activeId)?e.toast.warning(t.i18n("4fda4f585214d469c04466e2fc98b796")):r&&r.moveable?(this.copy(),this.manager.del(this.store.activeId)):e.toast.warning(t.i18n("657bbe06d3922b23552817df7fa8268e")));else if("BODY"===a.target.tagName&&"p"===a.key&&(a.metaKey||a.ctrlKey))a.preventDefault(),this.preview();else if("BODY"===a.target.tagName&&"ArrowUp"===a.key&&(a.metaKey||a.ctrlKey)){if(a.preventDefault(),this.store.activeId)(r=n.getNodeById(this.store.activeId))&&r.canMoveUp?this.manager.moveUp():e.toast.warning(t.i18n("416445a316595bdeb44b661c7de875a8"))}else if("BODY"===a.target.tagName&&"ArrowDown"===a.key&&(a.metaKey||a.ctrlKey)){if(a.preventDefault(),this.store.activeId)(r=n.getNodeById(this.store.activeId))&&r.canMoveDown?this.manager.moveDown():e.toast.warning(t.i18n("6ac88d87b2fd118ba7beab8c17880470"))}else if("BODY"===a.target.tagName&&("Backspace"===a.key||"Delete"===a.key)){var r;if(a.preventDefault(),this.store.activeId)(r=n.getNodeById(this.store.activeId))&&n.activeRegion?e.toast.warning(t.i18n("fdb3cba60407b2f1aea0230cca644573")):n.isRootSchema(this.store.activeId)?e.toast.warning(t.i18n("8a4b4e2e3b0382007e0c69ed1fe6fe71")):r&&r.moveable?this.manager.del(this.store.activeId):e.toast.warning(t.i18n("22f031f3de2e55c430a818d8c588f7a1"));return}}},r.prototype.handleMessage=function(e){e.data&&"amis-widget-register-event"===e.data.type&&e.data.editorPluginName&&(console.info(t.i18n("55c56d01a7747ffe0346d42145b62d97"),e.data.editorPluginName),this.manager.dynamicAddPlugin(e.data.editorPluginName))},r.prototype.handleContextMenu=function(e){var t,a,n,r="",o="";if(this.store.activeId?r=null===(t=e.target.closest('[data-editor-id="'.concat(this.store.activeId,'"]')))||void 0===t?void 0:t.getAttribute("data-editor-id"):this.store.selections.length&&(r=null===(a=e.target.closest(this.store.selections.map((function(e){return'[data-editor-id="'.concat(e,'"]')})).join(",")))||void 0===a?void 0:a.getAttribute("data-editor-id")),r||(r=null===(n=e.target.closest("[data-editor-id]"))||void 0===n?void 0:n.getAttribute("data-editor-id")),!r){var i=e.target.closest("[data-node-id]");if(!(r=null==i?void 0:i.getAttribute("data-node-id")))return;o=i.getAttribute("data-node-region")}e.preventDefault(),e.stopPropagation(),this.manager.openContextMenu(r,o,{x:window.scrollX+e.clientX,y:window.scrollY+e.clientY})},r.prototype.canUndo=function(){return this.store.canUndo},r.prototype.canRedo=function(){return this.store.canRedo},r.prototype.undo=function(){this.props.onUndo?this.props.onUndo():this.store.undo()},r.prototype.redo=function(){this.props.onRedo?this.props.onRedo():this.store.redo()},r.prototype.save=function(){this.props.onSave&&this.props.onSave()},r.prototype.preview=function(){this.props.onPreview&&this.props.onPreview(!0)},r.prototype.copy=function(){this.store.activeId&&(this.curCopySchemaData=this.store.getSchema(this.store.activeId))},r.prototype.paste=function(){if(this.store.activeId&&this.curCopySchemaData){if(!this.curCopySchemaData)return;var e=this.store.getSimpleSchema(this.curCopySchemaData);this.store.activeId===this.curCopySchemaData.$$id?this.manager.appendSiblingSchema(Ae(e)):this.manager.addElem(Ae(e))}},r.prototype.getToolbarContainer=function(){return this.mainRef.current},r.prototype.render=function(){var e=this.props,t=e.preview,n=e.isMobile,r=e.className,o=e.theme,i=e.appLocale,s=e.data,d=e.iframeUrl,l=e.previewProps,c=e.autoFocus;e.isSubEditor;var u=e.amisEnv;return F.default.createElement("div",{ref:this.mainRef,className:B.default("ae-Editor",{preview:t},r)},F.default.createElement("div",{className:"ae-Editor-inner",onContextMenu:this.handleContextMenu},!t&&F.default.createElement(dr,{store:this.store,manager:this.manager,theme:o}),F.default.createElement("div",{className:"ae-Main"},!t&&F.default.createElement(ar,{store:this.store,manager:this.manager}),F.default.createElement(Vt,a.__assign({},l,{iframeUrl:d,editable:!t,isMobile:n,store:this.store,manager:this.manager,theme:o,appLocale:i,data:s,amisEnv:u,autoFocus:c,toolbarContainer:this.getToolbarContainer}))),!t&&F.default.createElement(cr,{store:this.store,manager:this.manager,theme:o,appLocale:i,amisEnv:u}),!t&&F.default.createElement(or,{store:this.store})),F.default.createElement(tr,{store:this.store,manager:this.manager,theme:o,amisEnv:u}),F.default.createElement(nr,{store:this.store,manager:this.manager,theme:o}),F.default.createElement(rr,{store:this.store,manager:this.manager,theme:o}))},r.defaultProps={autoFocus:!0},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[KeyboardEvent]),a.__metadata("design:returntype",void 0)],r.prototype,"handleKeyDown",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleMessage",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleContextMenu",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"getToolbarContainer",null),r}(n.Component),pr=[{label:t.i18n("4e7f76261f8c4c6d78998f85fc1f4c6e"),children:[{label:t.i18n("16a20243f9b741c08216dc9548de2968"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"m-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"m-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"m"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"m-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"m-lg"}]},{label:t.i18n("461d364c67ec6a45e011ed13f2f7154f"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"m-t-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"m-t-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"m-t"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"m-t-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"m-t-lg"}]},{label:t.i18n("31e3752986d64c8b36897c8641c8628d"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"m-r-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"m-r-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"m-r"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"m-r-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"m-r-lg"}]},{label:t.i18n("eabe91d9426b6446f707cea3e7ab2418"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"m-b-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"m-b-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"m-b"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"m-b-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"m-b-lg"}]},{label:t.i18n("2e46d251ee6188bb1b3ff20656276572"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"m-l-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"m-l-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"m-l"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"m-l-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"m-l-lg"}]},{label:t.i18n("3dc4038d0f0a2d2b3c2b2e29a5ec6dde"),children:[{label:t.i18n("a8b0c20416853bda54120bf19477ad11"),value:"m-none"},"|",{label:t.i18n("af767b7e4ae069d54f9ea839858d4c6d"),value:"m-t-none"},{label:t.i18n("4d9c32c23df5d234e629c922c58d8e12"),value:"m-r-none"},{label:t.i18n("3850a186c3235bc646d4c2f79cebac36"),value:"m-b-none"},{label:t.i18n("d2aff1417831aa621c16cd5b95306b4b"),value:"m-l-none"}]}]},{label:t.i18n("841d77223f0ec8cd0b530ed8e0775b20"),children:[{label:t.i18n("16a20243f9b741c08216dc9548de2968"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"p-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"p-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"p"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"p-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"p-lg"}]},{label:t.i18n("461d364c67ec6a45e011ed13f2f7154f"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"p-t-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"p-t-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"p-t"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"p-t-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"p-t-lg"}]},{label:t.i18n("31e3752986d64c8b36897c8641c8628d"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"p-r-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"p-r-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"p-r"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"p-r-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"p-r-lg"}]},{label:t.i18n("eabe91d9426b6446f707cea3e7ab2418"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"p-b-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"p-b-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"p-b"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"p-b-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"p-b-lg"}]},{label:t.i18n("2e46d251ee6188bb1b3ff20656276572"),children:[{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"p-l-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"p-l-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"p-l"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"p-l-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"p-l-lg"}]},{label:t.i18n("3dc4038d0f0a2d2b3c2b2e29a5ec6dde"),children:[{label:t.i18n("a8b0c20416853bda54120bf19477ad11"),value:"p-none"},"|",{label:t.i18n("af767b7e4ae069d54f9ea839858d4c6d"),value:"p-t-none"},{label:t.i18n("4d9c32c23df5d234e629c922c58d8e12"),value:"p-r-none"},{label:t.i18n("3850a186c3235bc646d4c2f79cebac36"),value:"p-b-none"},{label:t.i18n("d2aff1417831aa621c16cd5b95306b4b"),value:"p-l-none"}]}]},{label:t.i18n("961534b4ea37e4e88aada736b299d063"),className:"w2x",children:[{label:t.i18n("d4d2a66820d30e07b44c850eb3f116c0"),children:[{label:t.i18n("a8b0c20416853bda54120bf19477ad11"),value:"b-a"},"|",{label:t.i18n("af767b7e4ae069d54f9ea839858d4c6d"),value:"b-t"},{label:t.i18n("4d9c32c23df5d234e629c922c58d8e12"),value:"b-r"},{label:t.i18n("3850a186c3235bc646d4c2f79cebac36"),value:"b-b"},{label:t.i18n("d2aff1417831aa621c16cd5b95306b4b"),value:"b-l"},"|",{label:t.i18n("3dc4038d0f0a2d2b3c2b2e29a5ec6dde"),value:"no-border"}]},{label:t.i18n("58f966670529f4753fb3c5a0647606be"),children:[{label:"2x",value:"b-2x"},{label:"3x",value:"b-3x"},{label:"4x",value:"b-4x"},{label:"5x",value:"b-5x"}]},{label:t.i18n("6b36c6f7ec834692ec6c8e3816349fdd"),children:[{label:t.i18n("fbae87bcc352f6933541fb77a07418ed"),value:"b-primary",className:"bg-primary"},{label:t.i18n("d8c7e04c8e2be23dd3b81a31db6e04f1"),value:"b-info",className:"bg-info"},{label:t.i18n("900c70fa5f7dbc014e6f762d5e0e885c"),value:"b-warning",className:"bg-warning"},{label:t.i18n("540f84ddc0883866b229f71c2844199a"),value:"b-danger",className:"bg-danger"},{label:t.i18n("330363dfc524cff2488f2ebde0500896"),value:"b-success",className:"bg-success"},{label:t.i18n("2fc96b2704b05d6a9f299c442573ee77"),value:"b-white",className:"bg-white"},{label:t.i18n("adb7e5312abdb9a44297e48d63815fa3"),value:"b-dark",className:"bg-dark"},{label:t.i18n("48d0a09bdd5fe7e89f0a445b0ffdf14f"),value:"b-light",className:"bg-light"}]}]},{label:t.i18n("0d98c74797e49d00bcc4c17c9d557a2b"),className:"w2x",children:[{label:t.i18n("0103eb2d3dca70270d1a74e9ec987ac9"),children:[{label:t.i18n("a8b0c20416853bda54120bf19477ad11"),value:"r"},"|",{label:t.i18n("af767b7e4ae069d54f9ea839858d4c6d"),value:"r-t"},{label:t.i18n("4d9c32c23df5d234e629c922c58d8e12"),value:"r-r"},{label:t.i18n("3850a186c3235bc646d4c2f79cebac36"),value:"r-b"},{label:t.i18n("d2aff1417831aa621c16cd5b95306b4b"),value:"r-l"},"|",{label:"2x",value:"r-2x"},{label:"3x",value:"r-3x"}]},{label:t.i18n("8456bc40d48da5af833f1c63385e9879"),children:[{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"font-normal"},{label:t.i18n("b3b2682579133673d3fe08c156d565dc"),value:"font-thin"},{label:t.i18n("56dce5d1cbb97439d291c458e50107e0"),value:"font-bold"},"|",{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"text-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"text-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"text-base"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"text-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"text-lg"}]},{label:t.i18n("6b36c6f7ec834692ec6c8e3816349fdd"),children:[{label:t.i18n("fbae87bcc352f6933541fb77a07418ed"),value:"text-primary",className:"text-primary"},{label:t.i18n("d8c7e04c8e2be23dd3b81a31db6e04f1"),value:"text-info",className:"text-info"},{label:t.i18n("900c70fa5f7dbc014e6f762d5e0e885c"),value:"text-warning",className:"text-warning"},{label:t.i18n("540f84ddc0883866b229f71c2844199a"),value:"text-danger",className:"text-danger"},{label:t.i18n("330363dfc524cff2488f2ebde0500896"),value:"text-success",className:"text-success"},{label:t.i18n("2fc96b2704b05d6a9f299c442573ee77"),value:"text-white",className:"text-white bg-dark"},{label:t.i18n("adb7e5312abdb9a44297e48d63815fa3"),value:"text-dark",className:"text-dark"},{label:t.i18n("49a79f4047b81186c069ed1c9c151c66"),value:"text-muted",className:"text-muted"}]},{label:t.i18n("8e1b944f4389bdaab6f11d5bc83190c8"),children:[{label:t.i18n("fbae87bcc352f6933541fb77a07418ed"),value:"bg-primary",className:"bg-primary"},{label:t.i18n("d8c7e04c8e2be23dd3b81a31db6e04f1"),value:"bg-info",className:"bg-info"},{label:t.i18n("900c70fa5f7dbc014e6f762d5e0e885c"),value:"bg-warning",className:"bg-warning"},{label:t.i18n("540f84ddc0883866b229f71c2844199a"),value:"bg-danger",className:"bg-danger"},{label:t.i18n("330363dfc524cff2488f2ebde0500896"),value:"bg-success",className:"bg-success"},{label:t.i18n("2fc96b2704b05d6a9f299c442573ee77"),value:"bg-white",className:"bg-white"},{label:t.i18n("adb7e5312abdb9a44297e48d63815fa3"),value:"bg-dark",className:"bg-dark"},{label:t.i18n("48d0a09bdd5fe7e89f0a445b0ffdf14f"),value:"bg-light",className:"bg-light"},"|",{label:t.i18n("3dc4038d0f0a2d2b3c2b2e29a5ec6dde"),value:"no-bg"}]},{label:t.i18n("c28479019e24e0e4745f4948e9e97ee7"),children:[{label:t.i18n("f72ce9ad683cc82e0eab557ffc9c67a0"),value:"w-xxs"},{label:t.i18n("23ecf42cada8bf2715792d718544d107"),value:"w-xs"},{label:t.i18n("391b8fa9c747a1799353ab856e666ad5"),value:"w-sm"},{label:t.i18n("fd6e80f1e0199d6ecc3ee81ae04aa9ef"),value:"w"},{label:t.i18n("aed1dfbc31703955e64806b799b67645"),value:"w-md"},{label:t.i18n("ab18e30c0dc4093ceeda8961fac3d1f4"),value:"w-lg"},{label:t.i18n("b95c462d7697958c25861193fc89ae07"),value:"w-xl"},{label:t.i18n("3386da5f56fac758ed0f18e024ecb943"),value:"w-xxl"},{label:t.i18n("ffaa96ef7232cb6d8ee4d7e673dbf4ac"),value:"w-full"}]}]}];!function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={isFocused:!1,isOpened:!1},e.values=[],e}a.__extends(n,t),n.prototype.open=function(){this.setState({isOpened:!0})},n.prototype.close=function(){this.setState({isOpened:!1})},n.prototype.toggle=function(){this.setState({isOpened:!this.state.isOpened})},n.prototype.handleFocus=function(e){this.setState({isFocused:!0}),this.props.onFocus&&this.props.onFocus(e)},n.prototype.handleBlur=function(e){this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},n.prototype.handleChange=function(e){(0,this.props.onChange)(e.currentTarget.value)},n.prototype.getParent=function(){return p.findDOMNode(this)},n.prototype.getTarget=function(){return p.findDOMNode(this)},n.prototype.handlePopOverChange=function(e){var t=this.props.value||"",a=t.replace(/\s+/g," ").split(/\s+/),n=a.indexOf(e.value),r=this.props.onChange;if(~n)a.splice(n,1),t=a.join(" ");else{if(/(?:^|\s)(m|p)\-(t|r|b|l)(?:\-(?:xs|sm|md|lg))?(?:$|\s)/.test(e.value)){var o=new RegExp("(?:^|\\s)".concat(RegExp.$1,"\\-").concat(RegExp.$2,"(?:\\-(?:xs|sm|md|lg))?(?=(\\s|$))"),"ig");t=t.replace(o,"")}else if(/(?:^|\s)(m|p)(?:\-(xs|sm|md|lg))?(?:$|\s)/.test(e.value)){o=new RegExp("(?:^|\\s)".concat(RegExp.$1,"(?:\\-(?:xs|sm|md|lg))?(?=(\\s|$))"),"ig");t=t.replace(o,"")}else if(/(?:^|\s)(m|p)(?:\-(t|r|b|l))?\-none(?:$|\s)/.test(e.value)){o=new RegExp(RegExp.$2?"(?:^|\\s)".concat(RegExp.$1,"(?:(?:\\-").concat(RegExp.$2,"(?:\\-(?:xs|sm|md|lg)))|\\-none)?(?=(\\s|$))"):"(?:^|\\s)".concat(RegExp.$1,"(?:[^\\s$]+)?(?=(\\s|$))"),"ig");t=t.replace(o,"$1")}else/(?:^|\s)w(?:\-\w+)?(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)w(?:\-\w+)?(?=(\s|$))/g,""):"b-a"===e.value?t=(t=t.replace(/(?:^|\s)b\-(?:t|r|b|l)(?=(\s|$))/g,"")).replace(/(?:^|\s)no\-border(?=(\s|$))/g,""):/(?:^|\s)b\-(?:t|r|b|l)?(?:$|\s)/.test(e.value)?t=(t=t.replace(/(?:^|\s)b\-a(?=(\s|$))/g,"")).replace(/(?:^|\s)no\-border(?=(\s|$))/g,""):/(?:^|\s)b\-\dx(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)b\-\dx(?=(\s|$))/g,""):"no-border"===e.value?t=t.replace(/(?:^|\s)b\-(?:\dx|\w+)(?=(\s|$))/g,""):/(?:^|\s)b\-(?:primary|info|warning|danger|success|white|dark|light)(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)b\-(?:primary|info|warning|danger|success|white|dark|light)(?=(\s|$))/g,""):"r"===e.value?t=t.replace(/(?:^|\s)r\-(?:t|r|b|l)(?=(\s|$))/g,""):/(?:^|\s)r\-(?:t|r|b|l)?(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)r(?=(\s|$))/g,""):/(?:^|\s)r\-\dx(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)r\-\dx(?=(\s|$))/g,""):/(?:^|\s)text\-(?:xs|sm|base|md|lg)(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)text\-(?:xs|sm|base|md|lg)(?=(\s|$))/g,""):/(?:^|\s)font\-(?:normal|thin|bold)(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)font\-(?:normal|thin|bold)(?=(\s|$))/g,""):/(?:^|\s)text\-(?:primary|info|warning|danger|success|white|dark|light)(?:$|\s)/.test(e.value)?t=t.replace(/(?:^|\s)text\-(?:primary|info|warning|danger|success|white|dark|light)(?=(\s|$))/g,""):/(?:^|\s)bg\-(?:primary|info|warning|danger|success|white|dark|light)(?:$|\s)/.test(e.value)?t=(t=t.replace(/(?:^|\s)bg\-(?:primary|info|warning|danger|success|white|dark|light)(?=(\s|$))/g,"")).replace(/(?:^|\s)no\-bg(?=(\s|$))/g,""):"no-bg"===e.value&&(t=t.replace(/(?:^|\s)bg\-(?:primary|info|warning|danger|success|white|dark|light)(?=(\s|$))/g,""));t=t.replace(/\s+/g," ").trim(),t+=(t?" ":"")+e.value}r(t)},n.prototype.renderGroup=function(e,t){var a=this,n=this.props.classnames;return F.default.createElement("div",{key:t,className:n("ae-ClassNameControl-group",e.className)},F.default.createElement("label",{className:n("ae-ClassNameControl-groupLabel",e.labelClassName)},e.label),e.children&&e.children.length?e.children[0].value?this.renderOptions(e.children,t):e.children.map((function(e,t){return a.renderGroup(e,t)})):null)},n.prototype.renderOptions=function(e,t){var a=this,n=this.props.classnames;return function(e){for(var t=[],a=t[0]=[],n=0,r=e.length;n<r;n++){var o=e[n];"|"===o?(a=[],t.push(a)):a.push(o)}return t}(e).map((function(e,t){return F.default.createElement("div",{className:n("ButtonGroup"),key:t},e.map((function(e,t){return F.default.createElement("div",{key:t,onClick:function(){return a.handlePopOverChange(e)},className:n("Button Button--size-xs",e.className,~a.values.indexOf(e.value)?"Button--primary":"Button--default")},e.label)})))}))},n.prototype.renderPopover=function(){var e=this,t=this.props.value;return this.values="string"==typeof t?t.split(" "):[],F.default.createElement("div",null,pr.map((function(t,a){return e.renderGroup(t,a)})))},n.prototype.render=function(){var t,a=this.props,n=a.classnames,r=a.readOnly,o=a.disabled,i=a.value,s=a.className,d=a.name,l=a.popOverContainer;return F.default.createElement("div",{className:s},F.default.createElement("div",{className:n("TextControl",(t={},t["TextControl--withAddOn"]=!0,t["is-focused"]=this.state.isFocused,t["is-disabled"]=o,t))},F.default.createElement("div",{className:n("TextControl-input")},F.default.createElement("input",{name:d,placeholder:"请输入 css 类名",disabled:o,readOnly:r,type:"text",autoComplete:"off",onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,value:null==i?"":"string"==typeof i?i:JSON.stringify(i)})),F.default.createElement("div",{className:n("TextControl-button")},F.default.createElement(e.Button,{onClick:this.toggle},F.default.createElement("i",{className:"fa fa-cog"})))),F.default.createElement(e.Overlay,{placement:"right-bottom-right-top  right-top-right-bottom right-bottom-right-top",target:this.getTarget,container:l||this.getParent,rootClose:!1,show:this.state.isOpened,watchTargetSizeChange:!1},F.default.createElement(e.PopOver,{className:"ae-ClassNamePicker-popover",onHide:this.close,overlay:!0},this.renderPopover())))},a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"open",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"close",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"toggle",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleFocus",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleBlur",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],n.prototype,"handleChange",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getParent",null),a.__decorate([e.utils.autobind,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],n.prototype,"getTarget",null),n=a.__decorate([e.FormItem({type:"ae-classname"})],n)}(F.default.Component);var fr=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.order=-9999,e}return a.__extends(n,t),n.prototype.buildEditorPanel=function(t,a){var n=this.manager.store;t.selections.length||n.subRenderers.length&&a.push({key:"renderers",icon:"png-icon renderers-png",title:F.default.createElement("span",{className:"editor-tab-icon","editor-tooltip":"组件"},F.default.createElement(e.Icon,{icon:"editor-renderer"})),component:Qn,position:"left",order:-9999})},n.scene=["layout"],n}(vt);function hr(e,t){return function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return a.__extends(r,n),r.prototype.render=function(){return F.default.createElement(F.default.Fragment,null,F.default.createElement(e,a.__assign({},this.props)),F.default.createElement(lr,{isLeftDragIcon:t}))},r}(F.default.Component)}Tt(fr),Tt(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.order=-9999,t}return a.__extends(n,e),n.prototype.buildEditorToolbar=function(e,a){var n,r,o,i,s=this,d=e.id,l=e.schema,c=e.info,u=this.manager.store,p=u.getNodeById(d),f=u.getSchemaParentById(d),h=this.manager.draggableContainer(d),m=(null==l?void 0:l.isSorptionContainer)||!1,g=p.parent;if(Array.isArray(f)&&(null==g?void 0:g.isRegion)||h){var v=p.host;!p.draggable&&!h||m||a.push({iconSvg:"drag-btn",icon:"fa fa-arrows",tooltip:t.i18n("7f2f0461a58c43667d7245ce92bb2e77"),placement:"bottom",draggable:!0,order:-1e3,onDragStart:this.manager.startDrag.bind(this.manager,d)});var b=null==f?void 0:f.indexOf(l);if(!(null==v?void 0:v.memberImmutable(g.region))&&u.panels.some((function(e){return"renderers"===e.key}))){var y=null===(n=f[b+1])||void 0===n?void 0:n.$$id;a.push({iconSvg:"left-arrow-to-left",tooltip:t.i18n("78c1c38b91c672da1113fa2564c14ea6"),placement:"bottom",onClick:function(){return s.manager.showInsertPanel(g.region,g.id,g.preferTag,"insert",void 0,d)}},{iconSvg:"arrow-to-right",tooltip:t.i18n("87f48bbadfbef5ef4554e06b7e141d37"),placement:"bottom",onClick:function(){return s.manager.showInsertPanel(g.region,g.id,g.preferTag,"insert",void 0,y)}})}}p.isVitualRenderer||!p.info.plugin.popOverBody&&!p.info.plugin.popOverBodyCreator||a.push({icon:"fa fa-pencil",tooltip:t.i18n("95b351c86267f3aedf89520959bce689"),placement:"bottom",onClick:function(e){return s.manager.openNodePopOverForm(p.id)}}),(p.removable||void 0===p.removable)&&a.push({iconSvg:"delete-btn",icon:"fa",tooltip:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b"),placement:"bottom",order:999,onClick:this.manager.del.bind(this.manager,d)}),a.push({iconSvg:"more-btn",icon:"fa fa-cog",tooltip:t.i18n("0ec9eaf9c3525eb110db58aae5912210"),placement:"bottom",order:1e3,onClick:function(e){if(!e.defaultPrevented){var t=e.target.parentElement.getBoundingClientRect();s.manager.openContextMenu(d,"",{x:window.scrollX+t.left+t.width-155,y:window.scrollY+t.top+t.height+8})}}}),(null!==(o=null===(r=c.scaffoldForm)||void 0===r?void 0:r.canRebuild)&&void 0!==o?o:null===(i=c.plugin.scaffoldForm)||void 0===i?void 0:i.canRebuild)&&a.push({iconSvg:"harmmer",tooltip:"快速构建「".concat(c.plugin.name,"」"),placement:"bottom",onClick:function(){return s.manager.reScaffoldV2(d)}})},n.prototype.buildEditorContextMenu=function(e,a){var n,r,o,i=this,s=e.id,d=e.schema,l=e.region,c=e.info,u=e.selections,p=this.manager,f=p.store,h=f.getSchemaParentById(s),m=f.getNodeById(s),g=f.getNodePathById(s),v=g.pop();if(m.host,m.parent,u.length)a.push({label:t.i18n("417db09508befe7dbe9f84a517a6edec"),icon:"copy-icon",disabled:u.some((function(e){return!e.node.duplicatable})),onSelect:function(){return p.duplicate(u.map((function(e){return e.id})))}}),a.push({label:t.i18n("99b81127ef28368151621cdfccce69f8"),icon:"cancel-icon",onSelect:function(){return f.setActiveId(s)}}),a.push({label:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b"),icon:"delete-icon",disabled:u.some((function(e){return!e.node.removable})),className:"text-danger",onSelect:function(){return p.del(u.map((function(e){return e.id})))}});else if(l){(_=f.panels.find((function(e){return"renderers"===e.key})))&&(a.push({label:t.i18n("205f45ee17394bd5668412780eaa55e2"),onHighlight:function(e){return e&&f.setHoverId(s,l)},onSelect:function(){return f.showInsertRendererPanel()}}),a.push({label:t.i18n("288f0c404c4e546aa3683ff5054e85e2"),onSelect:function(){return p.emptyRegion(s,l)}}),a.push({label:t.i18n("eafbece1016a6af76cce466e55ad9f00"),onSelect:function(){return p.paste(s,l)}}))}else{if(a.push({label:"选中".concat(v.label),disabled:f.activeId===v.id,data:s,onSelect:function(e){return f.setActiveId(e)},onHighlight:function(e,t){return e&&f.setHoverId(t)}}),g.length){var b=g.filter((function(e){var t;return!e.isRegion&&!1!==(null===(t=e.info)||void 0===t?void 0:t.editable)})).reverse().map((function(e){return{label:e.label,data:e.id,onSelect:function(e){return f.setActiveId(e)},onHighlight:function(e,t){return e&&f.setHoverId(t)}}}));b.length&&a.push({label:t.i18n("7ad78e0991f34ff3a345c59a2fc31572"),children:b})}a.push({label:t.i18n("aafda9e8f6b7b613680677c513edb7a6"),disabled:!f.activeId||f.activeId!==s,onSelect:function(){return f.setActiveId("")}}),a.push("|"),a.push({label:t.i18n("417db09508befe7dbe9f84a517a6edec"),disabled:!m.duplicatable,onSelect:function(){return p.duplicate(s)}}),a.push({label:t.i18n("b58d101f52531c845f15db63d7212115"),onSelect:function(){return p.copy(s)}}),a.push({label:t.i18n("74e2bc6615b7dbbb11fd5e1e212263ae"),disabled:!m.removable,onSelect:function(){return p.cut(s)}}),a.push({label:t.i18n("e2f401af580d1354ae00ec4ca19e2e24"),disabled:!Array.isArray(h)||!m.parent||!1===(null===(n=m.info)||void 0===n?void 0:n.typeMutable)||!m.replaceable,onSelect:function(){return p.paste(s)}}),a.push({label:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b"),disabled:!m.removable,className:"text-danger",onSelect:function(){return p.del(s)}}),a.push("|");var y=Array.isArray(h)?h.indexOf(d):-1;a.push({label:t.i18n("21462ae22216eec41dc688cc4a8ae64b"),disabled:!(Array.isArray(h)&&y>0&&m.moveable),onSelect:function(){return p.moveUp()}}),a.push({label:t.i18n("ed2bc13d8bbd99e16e017dd5f5393393"),disabled:!(Array.isArray(h)&&y<h.length-1&&m.moveable),onSelect:function(){return p.moveDown()}}),a.push("|"),a.push({label:t.i18n("9e54f3e4ee3330299c5fdc910c2e8d3c"),disabled:!f.canUndo,onSelect:function(){return f.undo()}}),a.push({label:t.i18n("ae8e86e426c2ba00da274b66dc372a8b"),disabled:!f.canRedo,onSelect:function(){return f.redo()}});var _=f.panels.find((function(e){return"renderers"===e.key}));v.childRegions.length&&_&&(v.childRegions.length>1?a.push({label:t.i18n("205f45ee17394bd5668412780eaa55e2"),children:v.childRegions.map((function(e){return{label:"".concat(e.label),data:e.region,onHighlight:function(e,t){return e?f.setHoverId(s,t):f.setHoverId("")},onSelect:function(){return f.showInsertRendererPanel()}}}))}):a.push({label:t.i18n("205f45ee17394bd5668412780eaa55e2"),data:v.childRegions[0].region,onHighlight:function(e,t){return e?f.setHoverId(s,t):f.setHoverId("")},onSelect:function(){return f.showInsertRendererPanel()}}))}u.length||!(null===(r=c.plugin.scaffoldForm)||void 0===r?void 0:r.canRebuild)&&!(null===(o=c.scaffoldForm)||void 0===o?void 0:o.canRebuild)||a.push({label:"快速构建「".concat(c.plugin.name,"」"),disabled:d.$$commonSchema,onSelect:function(){return i.manager.reScaffold(s,c.scaffoldForm||c.plugin.scaffoldForm,d)}})},n.prototype.buildEditorPanel=function(e,n){if(e.selections.length){var r=this.manager.store,o=[],i=a.__assign(a.__assign({},e),{data:o,region:""});(o=this.manager.buildContextMenus(i)).length&&n.push({key:"contextmenu",icon:"fa fa-cog",title:t.i18n("2b6bc0f293f5ca01b006206c2535ccbc"),menus:o,render:this.manager.makeSchemaFormRender({body:[{type:"button-group",buttons:o.filter((function(e){return"|"!==e})).map((function(e){return a.__assign(a.__assign({},e),{type:"button",onClick:e.onSelect})}))}],panelById:r.activeId})})}},n.prototype.afterInsert=function(e){var t,a,n=this,r=e.context;if(r.node&&(null===(a=null===(t=r.subRenderer)||void 0===t?void 0:t.plugin)||void 0===a?void 0:a.popOverBody)){var o=r.data.$$id;o&&setTimeout((function(){n.manager.setActiveId(o),requestAnimationFrame((function(){n.manager.openNodePopOverForm(o)}))}),200)}},n.scene=["layout"],n}(vt));var mr=/^\/schemas\/(.*).json$/;function gr(e,t,n,r){return a.__awaiter(this,void 0,void 0,(function(){var o,i,s,d,l,c,u;return a.__generator(this,(function(a){switch(a.label){case 0:return o=Array.isArray(r)?r.concat():[],"production"===process.env.NODE_ENV?[3,3]:o.some((function(t){return t.uri===e}))?[3,2]:(s=(i=o).push,u={uri:e},[4,Promise.resolve().then((function(){return new Promise((function(e){require(["amis/schema.json"],(function(t){e(require("tslib").__importStar(t))}))}))})).then((function(e){return e.default}))]);case 1:s.apply(i,[(u.schema=a.sent(),u)]),a.label=2;case 2:a.label=3;case 3:return mr.test(t)&&(d=RegExp.$1,l="".concat(e.replace(/^(\w+\:\/\/[^\/]+)\/.*$/,"$1"),"/schemas/").concat(d,".json"),c=V.default(o,(function(e){var t;return(null===(t=e.fileMatch)||void 0===t?void 0:t[0])===n})),~c&&o.splice(c,1),o.push({uri:l,fileMatch:[n],schema:{$schema:"http://json-schema.org/draft-07/schema#",$ref:"".concat(e,"#/definitions/").concat(d)}})),[2,o]}}))}))}var vr=q.default((function(t){e.toast.warning("代码有误，错误的地方是\n ".concat(t.toString().split("\n")[1]))}),3e3),br=function(n){function r(){var r=null!==n&&n.apply(this,arguments)||this;return r.state={wrongSchema:"",value:r.props.value,contents:r.obj2str(r.props.value,r.props)},r.toDispose=[],r.uri="isuda://schema/".concat(ae(),".json"),r.emitChange=q.default((function(){var e=r.props,t=e.onChange,a=e.value,n=r.str2obj(r.state.contents);if(n&&L.default(n)){r.setState({wrongSchema:""}),delete n.$schema,n=Pe(n,r.props.value);var o=Ze(r.lastResult||a,n);r.lastResult=n,t(n,o)}else r.setState({wrongSchema:r.state.contents})}),250,{trailing:!0,leading:!1}),r.editorFactory=function(e,t,n){var o=t.Uri.parse(r.uri);return r.model=t.editor.createModel(r.state.contents,"json",o),t.editor.create(e,a.__assign(a.__assign({autoIndent:!0,formatOnType:!0,formatOnPaste:!0,selectOnLineNumbers:!0,scrollBeyondLastLine:!1,folding:!0,scrollbar:{alwaysConsumeMouseWheel:!1},minimap:{enabled:!1}},n),{model:r.model}))},r.editorDidMount=function(e,t){r.editor=e,r.monaco=t,r.changeJsonOptions(r.props),r.props.onPaste&&r.toDispose.push(r.editor.onDidPaste(r.props.onPaste).dispose)},r.editorWillUnmount=function(e,t){r.toDispose.forEach((function(e){return e()})),r.toDispose=[]},r.handleChange=function(e){r.setState({contents:e},r.emitChange)},r.handleBlur=function(){return a.__awaiter(r,void 0,void 0,(function(){var n,r,o;return a.__generator(this,(function(a){switch(a.label){case 0:return n=this.state,r=n.wrongSchema,o=n.value,r?[4,e.prompt([{className:"w-full",type:"tpl",label:!1,tpl:t.i18n("7e4b38ba0ab9cbfcabd9dd859e36b601")},{type:"switch",label:!1,option:t.i18n("af86ad9dd8a221f931dcdc5a63382b6f"),name:"diff",value:!1},{visibleOn:"this.diff",label:!1,type:"diff-editor",allowFullscreen:!0,disabled:!0,name:"newValue",size:"xxl",language:"json",diffValue:"${oldValue}"}],{oldValue:o,newValue:r},t.i18n("43d586cd6cf1a512c0bcb85ed9efde51"))]:[2];case 1:return a.sent()?this.setState({wrongSchema:"",contents:w.stringify(o)}):this.editor.focus(),[2]}}))}))},r}return a.__extends(r,n),r.prototype.componentDidUpdate=function(e){var t=this.props;e.$schema!==t.$schema&&this.monaco&&this.changeJsonOptions(t),re(t.value,e.value)&&re(t.value,this.lastResult)&&(this.lastResult=null,this.setState({value:t.value,contents:this.obj2str(t.value,t)}))},r.prototype.obj2str=function(e,t){var n;return e=Pe(e),!(e=a.__assign({type:null==e?void 0:e.type},e)).type&&(null===(n=t.$schema)||void 0===n?void 0:n.match(/PageSchema/i))?e.type="page":e.type||delete e.type,delete e.$schema,w.stringify(e)},r.prototype.str2obj=function(e){try{if(""===e)return{};var t=w.parse(e);return vr&&vr.cancel(),t}catch(e){return vr(e),null}},r.prototype.changeJsonOptions=function(e){var t;return void 0===e&&(e=this.props),a.__awaiter(this,void 0,void 0,(function(){var n,r,o;return a.__generator(this,(function(a){switch(a.label){case 0:return n=this.monaco,0===(r=e.$schemaUrl||"".concat(window.location.protocol,"//").concat(window.location.host,"/schema.json")).indexOf("/")&&(r="".concat(window.location.protocol,"//").concat(window.location.host).concat(r)),[4,gr(r,e.$schema,n.Uri.parse(this.uri).toString(),null===(t=n.languages.json)||void 0===t?void 0:t.jsonDefaults.diagnosticsOptions.schemas)];case 1:return o=a.sent(),n.languages.json.jsonDefaults.setDiagnosticsOptions({schemas:o,validate:!0,enableSchemaRequest:!0,allowComments:!0}),[2]}}))}))},r.prototype.render=function(){var e=this.props,t=e.disabled,a=e.className,n=e.theme;return F.default.createElement(N.Editor,{className:B.default("amis-code-editor",a),value:this.state.contents,onChange:this.handleChange,onBlur:this.handleBlur,language:"json",theme:n,editorFactory:this.editorFactory,editorDidMount:this.editorDidMount,editorWillUnmount:this.editorWillUnmount,options:{automaticLayout:!0,lineNumbers:"off",glyphMargin:!1,tabSize:2,wordWrap:"on",lineDecorationsWidth:0,lineNumbersMinChars:0,selectOnLineNumbers:!0,scrollBeyondLastLine:!1,folding:!0,minimap:{enabled:!1},readOnly:t}})},r}(F.default.Component),yr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.handleCodePaste=function(){var e=this;setTimeout((function(){e.props.manager.patchSchema(!0)}),500)},t.prototype.render=function(){var e=this.props,t=e.onChange,a=e.manager,n=e.store;return F.default.createElement("div",{className:"ae-CodePanel"},F.default.createElement("div",{className:"panel-header"},"源码"),F.default.createElement("div",{className:"ae-CodePanel-content"},F.default.createElement(br,{value:n.valueWithoutHiddenProps,onChange:t,$schema:n.jsonSchemaUri,$schemaUrl:a.config.$schemaUrl,onPaste:this.handleCodePaste})))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],t.prototype,"handleCodePaste",null),t}(F.default.Component);Tt(function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.order=-9999,e}return a.__extends(n,t),n.prototype.buildJSONSchema=function(e){return e.info.$schema},n.prototype.buildEditorPanel=function(t,a){t.info;var n=t.selections;this.manager.store.jsonSchemaUri&&!n.length&&a.push({key:"code",icon:"png-icon code-png",title:F.default.createElement("span",{className:"editor-tab-icon","editor-tooltip":"代码"},F.default.createElement(e.Icon,{icon:"editor-code"})),position:"left",component:hr(yr),order:5e3})},n.scene=["layout"],n}(vt)),Tt(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.dataViewer={type:"json",name:"ctx",asFormItem:!0,className:"m-b-none",component:function(e){for(var n=e.value,r=e.onChange,o=e.readOnly,i=a.__read(F.default.useState(0),2),s=i[0],d=i[1],l=n||{},c=[l];Object.getPrototypeOf(l)!==Object.prototype;){var u=Object.getPrototypeOf(l);if("[object Object]"!==Object.prototype.toString.call(u))break;c.push(u),l=u}function p(e){var t=Object.create(c[1]||Object.prototype);Object.keys(e.updated_src).forEach((function(a){return t[a]=e.updated_src[a]})),r(t)}return F.default.createElement("div",{className:"aeDataChain"},F.default.createElement("div",{className:"aeDataChain-aside"},F.default.createElement("ul",null,c.map((function(e,a){return F.default.createElement("li",{className:a===s?"is-active":"",key:a,onClick:function(){return d(a)}},0===a?t.i18n("48ac479789304b37afa2f1b06642f4da"):1===a?t.i18n("9bc16c658ab8a8c4eddc5e24d85bef20"):"上".concat(a,"层"))})))),F.default.createElement("div",{className:"aeDataChain-main"},F.default.createElement(ee.default,{name:!1,src:c[s],enableClipboard:!1,iconStyle:"square",onAdd:0===s&&!o&&p,onEdit:0===s&&!o&&p,onDelete:0===s&&!o&&p,collapsed:2})))}},n}return a.__extends(n,e),n.prototype.buildEditorToolbar=function(e,a){var n=this;e.id,e.schema;var r=e.node.getComponent();if(r&&r.props&&r.props.data&&r.props.store){var o=r.props.store;a.push({icon:"fa fa-bug",order:-1e3,placement:"bottom",tooltip:t.i18n("aa920263020f14211a44ea172efc7253"),onClick:function(){return n.openDebugForm(r.props.data,o.updateData&&o.data===r.props.data?function(e){return o.updateData(e)}:void 0)}})}},n.prototype.openDebugForm=function(e,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(o){switch(o.label){case 0:return[4,this.manager.scaffold({title:t.i18n("aa920263020f14211a44ea172efc7253"),body:[a.__assign(a.__assign({},this.dataViewer),{readOnly:!n})]},{ctx:e})];case 1:return r=o.sent(),null==n||n(r.ctx),[2]}}))}))},n.scene=["layout"],n.id="data-debug",n}(vt)),Tt(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.order=-9999,t.rendererName="error",t.name="Error",t.isBaseComponent=!0,t}return a.__extends(t,e),t.scene=["layout"],t}(vt));var _r=function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.state={curSearchElemKey:""},e}return a.__extends(r,n),r.prototype.handleClick=function(e){var t=this.props.store,a=e.currentTarget,n=a.getAttribute("data-node-id"),r=a.getAttribute("data-node-region");this.props.manager,r?t.activeId===n&&t.activeRegion===r?t.setActiveId(n):t.setActiveId(n,r):t.setActiveId(n)},r.prototype.handleEnter=function(e){var t=e.currentTarget,a=t.getAttribute("data-node-id"),n=t.getAttribute("data-node-region");this.props.store.setHoverId(a,n)},r.prototype.handleDragStart=function(e){var t=e.currentTarget.getAttribute("data-node-id");t&&this.props.manager.startDrag(t,e)},r.prototype.handleDragOver=function(e){var t=e.target.closest("[data-node-id][data-node-region]");if(t){var a=this.props.manager,n=t.getAttribute("data-node-id"),r=t.getAttribute("data-node-region");e.preventDefault(),n&&r&&a.dnd.switchToRegion(e.nativeEvent,n,r)}},r.prototype.handleDrop=function(e){this.props.manager.dnd.drop(e.nativeEvent)},r.prototype.handleSearchElemKeyChange=function(e){this.setState({curSearchElemKey:e})},r.prototype.clearSearchElemKey=function(){this.setState({curSearchElemKey:""})},r.prototype.renderTitleByKeyword=function(e,t){if(t&&~e.indexOf(t)){var a=e.indexOf(t),n=a+t.length;return F.default.createElement("span",null,e.substring(0,a),F.default.createElement("span",{className:"has-keywords"},t),e.substring(n))}return e},r.prototype.renderItem=function(t,a){var n,r=this,o=this.props.store,i=this.state.curSearchElemKey,s=!o.dragging&&t.singleRegion?t.uniqueChildren[0].uniqueChildren:t.uniqueChildren,d=s.length;return!o.dragging||t.isRegion||t.children.length?F.default.createElement("li",{className:B.default("ae-Outline-node",{"is-folded":t.folded,"is-active":o.activeId===t.id&&!t.region||t.isRegion&&o.dropId===t.id&&o.dropRegion===t.region||t.isRegion&&o.activeId===t.id&&o.activeRegion===t.region,"is-region":t.isRegion,"is-hover":!t.isRegion&&(o.isHoved(t.id)||o.isContextOn(t.id)),"has-children":d,"is-dragging":o.dragId===t.id&&"schema"===o.dragType}),key:a},F.default.createElement("a",{onClick:this.handleClick,onMouseEnter:this.handleEnter,"data-node-id":t.id,"data-node-region":t.region,"data-node-common-config":null===(n=t.schema)||void 0===n?void 0:n.$$commonSchema,draggable:t.draggable,onDragStart:this.handleDragStart},d?F.default.createElement("span",{onClick:t.toggleFold,className:B.default("ae-Outline-expander ae-Outline-node-icon",{"is-folded":t.folded}),"data-node-id":t.id,"data-node-region":t.region},F.default.createElement(e.Icon,{icon:"down-arrow"})):null,F.default.createElement("span",{className:"ae-Outline-node-text"},t.isCommonConfig?"".concat(t.label,"-[公共配置]"):this.renderTitleByKeyword(t.label,i))),d?F.default.createElement("ul",{className:"ae-Outline-sublist"},s.map((function(e,t){return r.renderItem(e,t)}))):null):null},r.prototype.render=function(){var a=this,n=this.state.curSearchElemKey,r=this.props.store,o=r.outline;return F.default.createElement("div",{className:"ae-Outline-panel"},F.default.createElement("div",{className:"panel-header"},"大纲"),F.default.createElement(e.InputBox,{className:"editor-InputSearch",value:n,onChange:this.handleSearchElemKeyChange,placeholder:t.i18n("962d43ff8d39c381d8e2c73838412111"),clearable:!1},n?F.default.createElement("a",{onClick:this.clearSearchElemKey},F.default.createElement(e.Icon,{icon:"close",className:"icon"})):F.default.createElement(e.Icon,{icon:"editor-search",className:"icon"})),F.default.createElement("hr",{className:"margin-top"}),F.default.createElement("div",{className:B.default("ae-Outline","hoverShowScrollBar",{"ae-Outline--draging":r.dragging}),onDragOver:this.handleDragOver,onDrop:this.handleDrop},r.dragging?F.default.createElement("div",{className:"ae-Outline-tip"},"将目标拖入导航中的节点可以切换容器"):null,o.length?F.default.createElement("ul",{className:"ae-Outline-list"},o.map((function(e,t){return a.renderItem(e,t)}))):F.default.createElement("div",null,"加载中，请稍等...")))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleClick",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleEnter",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragStart",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDragOver",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],r.prototype,"handleDrop",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String]),a.__metadata("design:returntype",void 0)],r.prototype,"handleSearchElemKeyChange",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"clearSearchElemKey",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[String,String]),a.__metadata("design:returntype",void 0)],r.prototype,"renderTitleByKeyword",null),r=a.__decorate([u.observer],r)}(F.default.Component);Tt(function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.order=-9999,e}return a.__extends(n,t),n.prototype.buildEditorPanel=function(t,a){var n=this.manager.store;if(n&&t.selections.length){var r=n.changeLeftPanelOpenStatus,o=n.changeLeftPanelKey;r(!0),o("outline")}a.push({key:"outline",icon:"png-icon outline-png",title:F.default.createElement("span",{className:"editor-tab-icon","editor-tooltip":"大纲"},F.default.createElement(e.Icon,{icon:"editor-outline"})),component:hr(_r),position:"left",order:4e3})},n.scene=["layout"],n}(vt)),Tt(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.order=9999,t}return a.__extends(t,e),t.prototype.getRendererInfo=function(e){var t=e.renderer,a=e.schema,n=e.path;if(a.$$id&&t){if(/(^|\/)static\-field/.test(n))return;if("card-item"===t.name||"list-item-field"===t.name)return;return{name:"Unkown",$schema:"/schemas/UnkownSchema.json"}}},t.scene=["layout"],t}(vt));var Er,wr,Sr={};function Cr(e,t,n){var r=Sr[e]||{};return"function"==typeof r?r(t,n):t?a.__assign(a.__assign({},r),t):r}function xr(e,t,n){return{type:"tooltip-wrapper",tooltip:t,tooltipTheme:"dark",placement:"top",tooltipStyle:a.__assign({fontSize:"12px"},n||{}),className:"ae-formItemControl-label-tip",body:e}}exports.DSBehavior=void 0,(Er=exports.DSBehavior||(exports.DSBehavior={})).create="create",Er.view="view",Er.update="update",Er.table="table",Er.filter="filter",exports.DSGrain=void 0,(wr=exports.DSGrain||(exports.DSGrain={})).entity="entity",wr.list="list",wr.piece="piece";var Ir={List:{value:"list",label:t.i18n("3712972d84adf48acbd6ad24b4d75ad0")},Insert:{value:"insert",label:t.i18n("66ab5e9f24c8f46012a25c89919fb191")},View:{value:"view",label:t.i18n("f26225bde6a250894a04db4c53ea03d0")},Edit:{value:"edit",label:t.i18n("95b351c86267f3aedf89520959bce689")},Delete:{value:"delete",label:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b")},BulkEdit:{value:"bulkEdit",label:t.i18n("e73cefac9d030927da1618c7b15c98c9")},BulkDelete:{value:"bulkDelete",label:t.i18n("7fb62b30119c3797a843a48368463314")},Import:{value:"import",label:t.i18n("8d9a071ee2ef45e045968e117a205c07")},Export:{value:"export",label:t.i18n("55405ea6ff6fd823ffab7e6b10ddfa95")},SimpleQuery:{value:"simpleQuery",label:t.i18n("c26996a6506adf397f0668d376d0b40b")},FuzzyQuery:{value:"fuzzyQuery",label:t.i18n("6ff4bf3d567e977aa4c90c27dff1e6db")},AdvancedQuery:{value:"advancedQuery",label:t.i18n("9c4666fd08c2738eb9611a3721cb5f0f")}},Rr=function(){},Or={},Nr=function(e){Or[e.type]=e},kr=function(){function e(e,t){var a=this;this.builders={},Object.values(Or).filter((function(a){var n,r;return null===(r=null===(n=a.accessable)||void 0===n?void 0:n.call(a,e,t))||void 0===r||r})).forEach((function(e){a.builders[e.type]=new e}))}return Object.defineProperty(e.prototype,"builderNum",{get:function(){return Object.keys(this.builders).length},enumerable:!1,configurable:!0}),e.prototype.resolveBuilderBySetting=function(e){return this.builders[e.dsType]||Object.values(this.builders)[0]},e.prototype.resolveBuilderBySchema=function(e,t){var a=Object.values(this.builders);return a.find((function(a){return a.match(e[t])}))||a[0]},e.prototype.getDefaultBuilderName=function(){return Object.entries(this.builders).map((function(e){var t=a.__read(e,2);return{value:t[0],order:t[1].order}})).sort((function(e,t){var a,n;return(null!==(a=e.order)&&void 0!==a?a:0)-(null!==(n=t.order)&&void 0!==n?n:0)}))[0].value},e.prototype.getDSSwitch=function(e){void 0===e&&(e={});var n=this.builderNum>1,r=Object.entries(this.builders).map((function(e){var t=a.__read(e,2),n=t[0],r=t[1];return{label:r.name,value:n,order:r.order}}));return r.sort((function(e,t){var a,n;return(null!==(a=e.order)&&void 0!==a?a:0)-(null!==(n=t.order)&&void 0!==n?n:0)})),a.__assign({type:"radios",label:t.i18n("a094e5b7699ea4b61094cc4120170423"),name:"dsType",visible:n,selectFirst:!0,options:r},e)},e.prototype.collectFromBuilders=function(e){return Object.entries(this.builders).map((function(t){var n=a.__read(t,2),r=n[0],o=n[1];return e(o,r)}))},e}();Nr(function(n){function r(){var e=null!==n&&n.apply(this,arguments)||this;return e.name=t.i18n("54ea89b497ec3bb319c68844dfa3687f"),e.order=0,e.match=function(e,t){return!!("string"==typeof e&&/^(get|post|put|delete|option):/.test(e)||"object"==typeof e&&e.url)},e.features=["List","Insert","View","Edit","Delete","BulkEdit","BulkDelete","Import","Export","SimpleQuery","FuzzyQuery"],e}return a.__extends(r,n),r.prototype.makeSourceSettingForm=function(e){var a=e.name,n=e.label,r=e.feat,o=e.inCrud,i=e.inScaffold;if(["Import","Export","SimpleQuery","FuzzyQuery"].includes(r))return[];n=null!=n?n:o&&"List"!==r?Ir[r].label+t.i18n("54ea89b497ec3bb319c68844dfa3687f"):t.i18n("54ea89b497ec3bb319c68844dfa3687f"),a=null!=a?a:i?Ir[r].value+"Api":"api";switch(r){case"Insert":n=xr(n,"用来保存数据, 表单提交后将数据传入此接口。 <br/>\n          接口响应体要求(如果data中有数据，该数据将被合并到表单上下文中)：<br/>\n          ".concat(JSON.stringify({status:0,msg:"",data:{}},null,"<br/>")));break;case"List":n=xr(n,"接口响应体要求：<br/>\n          ".concat(JSON.stringify({status:0,msg:"",items:{},page:0,total:0},null,"<br/>")))}return[Cr("apiControl",{label:n,name:a,sampleBuilder:null,apiDesc:null})].concat("Edit"!==r||o?null:Cr("apiControl",{label:xr(t.i18n("b4bc91701b86fe8543d649e97daea602"),"接口响应体要求：<br/>\n          ".concat(JSON.stringify({status:0,msg:"",data:{}},null,"<br/>"))),name:"initApi"})).concat("List"===r&&o&&i?this.makeFieldsSettingForm({feat:r,setting:!0}):null).filter(Boolean)},r.prototype.getContextFileds=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return[2,e.schema.__fields]}))}))},r.prototype.getAvailableContextFileds=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2]}))}))},r.prototype.onFieldsInit=function(e,t){this.features.forEach((function(n){var r="".concat(Ir[n].value,"Fields"),o=t.getValueByName(r),i=J.default(e||[]).map((function(e){var t=null==o?void 0:o.find((function(t){return t.name===e.name}));return a.__assign(a.__assign({},e),{checked:!t||t.checked})}));t.setValueByName(r,i)}))},r.prototype.makeFieldsSettingForm=function(n){var r=this,o=n.sourceKey,i=n.feat,s=n.inCrud,d=n.setting,l=n.inScaffold;if(!1===l||["Import","Export","FuzzyQuery"].includes(i))return[];o=null!=o?o:"".concat(Ir[i].value,"Api");var c=d?"__fields":"".concat(Ir[i].value,"Fields"),u=["Edit","Insert"].includes(i)||s&&"List"===i,p=["View","List"].includes(i);return[].concat(s&&"List"!==i?this.makeSourceSettingForm({feat:i,inScaffold:l,inCrud:s}):null).concat([{type:"combo",className:"mb-0 ae-Fields-Setting",joinValues:!1,name:c,label:s?"".concat(Ir[i].label,"字段"):t.i18n("9caecd931b956381e0763d05aa42835c"),multiple:!0,draggable:!0,addable:!1,removable:!1,itemClassName:"ae-Fields-Setting-Item",hidden:d||!s||["Delete","BulkDelete"].includes(i),items:{type:"container",body:[{name:"checked",label:!1,mode:"inline",className:"m-0 ml-1",type:"checkbox"},{type:"tpl",className:"ae-Fields-Setting-Item-label",tpl:"${label}"}]}},{type:"input-table",label:t.i18n("9caecd931b956381e0763d05aa42835c"),className:"mb-0",name:c,visible:null!=d?d:!s,removable:!0,columnsTogglable:!1,needConfirm:!1,onChange:function(e,t,a,n){return r.onFieldsInit(e,n)},columns:[{type:"switch",name:"checked",value:!0,label:t.i18n("47cd88592f6ef2b258f02c0690d267ed"),visible:!1},{type:"input-text",name:"label",label:t.i18n("32c65d8d7431e76029678ec7bb73a5ab")},{type:"input-text",name:"name",label:t.i18n("020586d0c69f8211840ddf9ee9bbf6ab")},{type:"select",name:"type",label:t.i18n("226b0912184333c81babf2f1894ec0c1"),visible:p,value:"tpl",options:[{value:"tpl",label:t.i18n("97d07614380da93d257f9fbf81aa56fb"),typeKey:"tpl"},{value:"image",label:t.i18n("20def7942674282277c3714ed7ea6ce0"),typeKey:"src"},{value:"date",label:t.i18n("4ff1e74e43a3586339251494117185ad"),typeKey:"value"},{value:"progress",label:t.i18n("c7bff79d059a0b7ff9b02441959d8be2"),typeKey:"value"},{value:"status",label:t.i18n("3fea7ca76cdece641436d7ab0d02ab1b"),typeKey:"value"},{value:"mapping",label:t.i18n("9da188491dd34c4382a5b9f006194e41"),typeKey:"value"}],autoFill:{typeKey:"${typeKey}"}},{type:"select",name:"inputType",label:t.i18n("b3e55578af5dd473bab62641bb2f5f8e"),visible:u,value:"input-text",options:[{label:t.i18n("9b6425cd2d496c9cb5a6c6b8ff125d1b"),value:"input-text"},{label:t.i18n("15d169d28cd48c97fe751e4cc92ca926"),value:"textarea"},{label:t.i18n("9597dcaf432ceba92a160d61cb1ef65f"),value:"input-number"},{label:t.i18n("9913107b19cb6012250134ff91377430"),value:"radios"},{label:t.i18n("454e60f5759903d7d3dba58e3f9bd590"),value:"checkbox"},{label:t.i18n("db98f889ce6bc235e66bd4b2a788d137"),value:"checkboxes"},{label:t.i18n("006ded9fa277cf030592021f595a07d5"),value:"select"},{label:t.i18n("a6beb974cc0b50eebd18120b8110a88b"),value:"switch"},{label:t.i18n("4ff1e74e43a3586339251494117185ad"),value:"input-date"},{label:t.i18n("b339aa87104709397ba68e7ebbc6e5ba"),value:"input-table"},{label:t.i18n("481e034e6026969aae4ce7ce7c8a7b6f"),value:"input-file"},{label:t.i18n("6bfb9bb2218ff32b6139e98bc93707c0"),value:"input-image"},{label:t.i18n("24b6d4c0892a8f3ee2a982e3ab0afe38"),value:"input-rich-text"}]}]},{type:"group",visible:null!=d?d:!s,label:"",body:[{type:"grid",columns:[{body:[{type:"button",label:t.i18n("4484fa04e7b71db4c8293e5bcb53eca4"),target:c,className:"ae-Button--link",level:"link",icon:"plus",actionType:"add"}]},{columnClassName:"text-right",body:[{type:"button",label:t.i18n("4cc6a76c146c0360a41ceaf5e212c891"),visible:"Edit"===i||"List"===i,className:"ae-Button--link",level:"link",onClick:function(n,d){return a.__awaiter(r,void 0,void 0,(function(){var n,r,l,u,p,h,m,g,v,b;return a.__generator(this,(function(y){switch(y.label){case 0:return n=d.data,r=f.getEnv(window.editorStore).schemaFilter,l=n["Edit"!==i||s?o:"initApi"],r&&(l=r({api:l}).api),l||e.toast.warning(t.i18n("a9fea442707e26dee478b34a2f2ce263")),[4,d.env.fetcher(l,n)];case 1:return u=y.sent(),p=[],"List"===i?(m=(null===(v=u.data)||void 0===v?void 0:v.rows)||(null===(b=u.data)||void 0===b?void 0:b.items),h=null==m?void 0:m[0]):h=u.data,h?(Object.entries(h).forEach((function(e){var t=a.__read(e,2),n=t[0],r=t[1];p.push({label:n,type:"tpl",inputType:"number"==typeof r?"input-number":"input-text",name:n})})),d.formStore.setValues(((g={})[c]=p,g)),this.onFieldsInit(p,d.formStore)):e.toast.warning(t.i18n("91aa2166ee4811414381c8d94e6567e6")),[2]}}))}))}}]}]}]}])},r.prototype.makeFieldFilterSetting=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[]]}))}))},r.prototype.resolveSourceSchema=function(e){var t=e.name,a=e.setting,n=e.schema,r=e.feat;n[t=null!=t?t:"api"]=a[r?"".concat(Ir[r].value,"Api"):"api"],"Edit"===r&&(n.initApi=a.initApi)},r.prototype.resolveViewSchema=function(e){var t=e.setting,a=e.feat;return(t["".concat(Ir[void 0===a?"Edit":a].value,"Fields")]||[]).filter((function(e){return e.checked})).map((function(e){var t;return(t={type:e.type})[e.typeKey||"value"]="${"+e.name+"}",t}))},r.prototype.resolveTableSchema=function(e){var t=e.schema,a=e.setting.listFields.filter((function(e){return e.checked}))||[];t.columns=this.makeTableColumnsByFields(a)},r.prototype.makeTableColumnsByFields=function(e){return e.map((function(e){var t;return(t={type:e.type,title:e.label,name:e.name})[e.typeKey||"value"]="${"+e.name+"}",t}))},r.prototype.resolveCreateSchema=function(e){var t=e.schema,a=e.setting,n=e.feat,r=e.name,o=a["".concat(Ir[n].value,"Fields")]||[];t[null!=r?r:"api"]=a[Ir[n].value+"Api"],t.initApi=a.initApi,t.body=o.filter((function(e){return e.checked})).map((function(e){return{type:e.inputType,name:e.name,label:e.label}}))},r.prototype.resolveDeleteSchema=function(e){var t,n=e.schema,r=e.setting,o=e.feat;n.onEvent=Object.assign(null!==(t=n.onEvent)&&void 0!==t?t:{},{click:{actions:[]}});var i=a.__assign({},r["".concat(Ir[o].value,"Api")]||{});i.data="Delete"===o?{id:"${item.id}"}:{ids:"${ARRAYMAP(selectedItems, item=> item.id)}"},n.onEvent.click.actions.push({actionType:"ajax",args:{api:i}})},r.prototype.resolveSimpleFilterSchema=function(e){return(e.setting.simpleQueryFields||[]).filter((function(e){return e.checked})).map((function(e){return{type:e.inputType,name:e.name,label:e.label}}))},r.prototype.resolveAdvancedFilterSchema=function(e){},r.type="api",r.accessable=function(e,t){return!0},r}(Rr));var Ar=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t}(vt),Mr=function(e){function t(t){var a=e.call(this,t)||this;return a.manager.on("build-panels",a.buildPanels),a}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.manager.off("build-panels",this.buildPanels)},t.prototype.buildPanels=function(e){var t=e.context.data;Array.isArray(t)&&t.splice(0,t.length)},t.prototype.render=function(){var e=this.props,t=e.preview,n=e.className,r=e.theme,o=e.data,i=e.isMobile,s=e.autoFocus,d=e.previewProps;return F.default.createElement("div",{className:B.default("ae-Editor",{preview:t},n)},F.default.createElement("div",{className:"ae-Editor-inner",onContextMenu:this.handleContextMenu},F.default.createElement("div",{className:"ae-Main"},F.default.createElement(Vt,a.__assign({},d,{isMobile:i,editable:!t,store:this.store,manager:this.manager,theme:r,data:o,autoFocus:s})))),F.default.createElement(tr,{store:this.store,manager:this.manager,theme:r}),F.default.createElement(nr,{store:this.store,manager:this.manager,theme:r}))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[Object]),a.__metadata("design:returntype",void 0)],t.prototype,"buildPanels",null),t}(ur),Dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.UNSAFE_componentWillMount=function(){var e=this,t=this.props;t.data,t.path;var n=t.widthMutable,r=a.__rest(t,["data","path","widthMutable"]),o=this.context;this.editorNode=o.addChild({id:r.id,type:r.type,label:r.name,path:this.props.path,schemaPath:r.schemaPath,info:r,getData:function(){return e.props.data},widthMutable:n,memberIndex:r.memberIndex})},t.prototype.componentDidMount=function(){this.markDom(this.editorNode.id)},t.prototype.componentDidUpdate=function(){this.markDom(this.editorNode.id)},t.prototype.componentWillUnmount=function(){this.editorNode&&f.isAlive(this.editorNode)&&this.context.removeChild(this.editorNode)},t.prototype.markDom=function(e){var t=p.findDOMNode(this);if(t){var a=this.editorNode.info,n=a.wrapperResolve?a.wrapperResolve(t):t;(Array.isArray(n)?n:n?[n]:[]).forEach((function(t){return t.setAttribute("data-editor-id",e)}))}},t.prototype.render=function(){return F.default.createElement(Et.Provider,{value:this.editorNode},this.props.children)},t.contextType=Et,t}(F.default.Component),Fr=[{title:t.i18n("79d3abe929f67f0644a78bf32adb3a89"),letters:["⌘","c"],tooltip:t.i18n("b7d817611230d382f6ef92b41848a342")},{title:t.i18n("eafbece1016a6af76cce466e55ad9f00"),letters:["⌘","v"],tooltip:t.i18n("e0b9bb8e41eccd3ce6b282664643d7f8")},{title:t.i18n("43fc77886b7fbcd658f0ccdba36bd5a0"),letters:["⌘","x"],tooltip:t.i18n("a6be4ad12e9612811963c44466af3218")},{title:t.i18n("bd9fcf46b4e5993f97fe04ee9ebcd7ed"),letters:["⌘","z"],tooltip:t.i18n("58887132871b71b015c3a391e7755815")},{title:t.i18n("c3c873d33f1c6482c79b0ffd862786cd"),letters:["⌘","Shift","z"],tooltip:t.i18n("58887132871b71b015c3a391e7755815")},{title:t.i18n("be5fbbe34ce9979bfb6576d9eddc5612"),letters:["⌘","s"],tooltip:t.i18n("1f81fd4598e9151538f29c41b8aa0020")},{title:t.i18n("645dbc5504e722a30896486085a06b32"),letters:["⌘","p"],tooltip:t.i18n("5bc425ac8b75c571093a63eb6073c354")},{title:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b"),letters:["Delete"],tooltip:t.i18n("426cd14ebd62a4922186527d07ba37f3")},{title:t.i18n("2f4aaddde33c9b93c36fd2503f3d122b"),letters:["Backspace"],tooltip:t.i18n("426cd14ebd62a4922186527d07ba37f3")},{title:t.i18n("499e58e764420aeed2d1476a56d8fa34"),letters:["⌘","↑"],tooltip:t.i18n("d040485f0e3887f0b297f8f772db03e4")},{title:t.i18n("08ad565f066d30572d1f8e2ee17cbe12"),letters:["⌘","↓"],tooltip:t.i18n("6348dc0e83d6ab391a8816f67d0e5ceb")}],Pr=function(n){function r(e){var t=n.call(this,e)||this;return t.state={visible:!1},t}return a.__extends(r,n),r.prototype.closeShortcutKeyModal=function(){this.setState({visible:!1})},r.prototype.showShortcutKeyModal=function(){this.setState({visible:!0})},r.prototype.render=function(){var a=this.props,n=a.title,r=a.size,o=a.closeOnEsc,i=a.closeOnOutside,s=this.props.ShortcutKeyList||Fr;return F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:"shortcut-icon-btn","editor-tooltip":"点击查看当前可用快捷键","tooltip-position":"bottom"},F.default.createElement(e.Icon,{icon:"editor-shortcut",onClick:this.showShortcutKeyModal})),F.default.createElement(e.Modal,{size:r||"xs",show:this.state.visible,closeOnEsc:null==o||o,closeOnOutside:null==i||i,onHide:this.closeShortcutKeyModal,contentClassName:"shortcut-list-modal"},F.default.createElement("div",{className:"shortcut-modal-header"},F.default.createElement("div",{className:"shortcut-modal-title"},n||t.i18n("9c3f1278ffa822835bb3a677f02bca27")),F.default.createElement(e.Icon,{icon:"close",className:"shortcut-modal-icon",onClick:this.closeShortcutKeyModal})),F.default.createElement("div",{className:"shortcut-modal-body"},s&&s.length>0&&F.default.createElement("div",{className:"shortcut-list"},s.map((function(e,t){return F.default.createElement("div",{className:"shortcut-item",key:t},e.tooltip&&F.default.createElement("div",{className:"shortcut-title","editor-tooltip":e.tooltip},e.title),!e.tooltip&&F.default.createElement("div",{className:"shortcut-title"},e.title),F.default.createElement("div",{className:"shortcut-letters"},e.letters.map((function(e){return F.default.createElement("div",{className:"shortcut-letter",key:e},e)}))))}))),!s||0===s.length&&F.default.createElement("span",null,"暂无快捷键"))))},a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"closeShortcutKeyModal",null),a.__decorate([$e,a.__metadata("design:type",Function),a.__metadata("design:paramtypes",[]),a.__metadata("design:returntype",void 0)],r.prototype,"showShortcutKeyModal",null),r}(F.default.Component);Object.defineProperty(exports,"Icon",{enumerable:!0,get:function(){return e.Icon}}),Object.defineProperty(exports,"registerIcon",{enumerable:!0,get:function(){return e.registerIcon}}),exports.AvailableRenderersPlugin=fr,exports.BasePlugin=vt,exports.BasicEditor=Ar,exports.CodeEditor=br,exports.ContainerWrapper=St,exports.DSBuilder=Rr,exports.DSBuilderManager=kr,exports.DSFeature=Ir,exports.Editor=ur,exports.EditorManager=jt,exports.IFrameEditor=Lt,exports.JSONCanMoveDown=Oe,exports.JSONCanMoveUp=Ie,exports.JSONChangeInArray=xe,exports.JSONDelete=Se,exports.JSONDuplicate=ke,exports.JSONGetById=_e,exports.JSONGetByPath=be,exports.JSONGetParentById=Ee,exports.JSONGetPathById=ye,exports.JSONMerge=Ce,exports.JSONMoveDownById=Ne,exports.JSONMoveUpById=Re,exports.JSONPipeIn=me,exports.JSONPipeOut=ge,exports.JSONTraverse=Ye,exports.JSONUpdate=we,exports.JsonGenerateID=Me,exports.LayoutBasePlugin=bt,exports.MiniEditor=Mr,exports.RegionWrapper=wt,exports.RendererEditor=function(e,t){return function(n){Tt(function(n){function r(a){var r=n.call(this,a)||this;return r.rendererName=e,r.name=r.tipName||t.name,r.description=t.description,r.scaffold=t.scaffold||{type:t.type},r.previewSchema=t.previewSchema||r.scaffold,r.settingsSchema&&(r.panelTitle=r.settingsSchema.title,r.panelControls=r.settingsSchema.body),r}return a.__extends(r,n),r}(n))}},exports.SearchPanel=Jn,exports.ShortcutKey=Pr,exports.VRenderer=Dr,exports.__uri=fe,exports.addDragingClass=Ke,exports.addStyleClassName=ve,exports.anyChanged=ie,exports.appTranslate=ct,exports.autoPreRegisterEditorCustomPlugins=Bt,exports.autobind=$e,exports.blackList=Te,exports.camelize=Ue,exports.cleanUndefined=he,exports.cloneObject=oe,exports.createElementFromHTML=De,exports.createEvent=gt,exports.createObject=pe,exports.deepFind=Fe,exports.default=ur,exports.defaultValue=function(e,t){return void 0===t&&(t=!0),t?function(t){return void 0===t?e:t}:function(t){return t||e}},exports.diff=Ze,exports.eachTree=ue,exports.filterSchemaForConfig=Pe,exports.filterSchemaForEditor=Be,exports.generateNodeId=at,exports.getEditorPlugins=function(e){void 0===e&&(e={});var t=e.scene,a=void 0===t?"global":t;return Pt.filter((function(e){var t;return null===(t=e.scene)||void 0===t?void 0:t.includes(a)}))},exports.getI18nEnabled=dt,exports.getSchemaTpl=Cr,exports.guid=ae,exports.isEmpty=ce,exports.isHasPluginIcon=nt,exports.isLayoutPlugin=rt,exports.isNumeric=Ge,exports.isObject=et,exports.isObjectShallowModified=re,exports.isString=Qe,exports.jsonToJsonSchema=tt,exports.makeHorizontalDeeper=de,exports.mapReactElement=function e(t,a,n){if(!F.default.isValidElement(t))return t;var r=a(t,n);if(r===t&&t.props.children){var o=t.props.children;if(Array.isArray(o)){var i=[],s=!1;o.forEach((function(t,n){var r=e(t,a,n);r!==t&&(s=!0,F.default.isValidElement(r)&&!r.key&&(r=F.default.cloneElement(r,{key:n}))),i.push(r)})),s&&(r=F.default.cloneElement(r,{children:i}))}else{var d=e(o,a,n);d!==o&&(r=F.default.cloneElement(r,{children:d}))}}return r},exports.mockValue=function(e){var a="data:image/svg+xml,%3C%3Fxml version='1.0' standalone='no'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg t='1631083237695' class='icon' viewBox='0 0 1024 1024' version='1.1' xmlns='http://www.w3.org/2000/svg' p-id='2420' xmlns:xlink='http://www.w3.org/1999/xlink' width='1024' height='1024'%3E%3Cdefs%3E%3Cstyle type='text/css'%3E%3C/style%3E%3C/defs%3E%3Cpath d='M959.872 128c0.032 0.032 0.096 0.064 0.128 0.128v767.776c-0.032 0.032-0.064 0.096-0.128 0.128H64.096c-0.032-0.032-0.096-0.064-0.128-0.128V128.128c0.032-0.032 0.064-0.096 0.128-0.128h895.776zM960 64H64C28.8 64 0 92.8 0 128v768c0 35.2 28.8 64 64 64h896c35.2 0 64-28.8 64-64V128c0-35.2-28.8-64-64-64z' p-id='2421' fill='%23bfbfbf'%3E%3C/path%3E%3Cpath d='M832 288c0 53.024-42.976 96-96 96s-96-42.976-96-96 42.976-96 96-96 96 42.976 96 96zM896 832H128V704l224-384 256 320h64l224-192z' p-id='2422' fill='%23bfbfbf'%3E%3C/path%3E%3C/svg%3E";return"date"===e.type||"datetime"===e.type||"time"===e.type||"month"===e.type||"static-date"===e.type||"static-datetime"===e.type||"static-time"===e.type||"static-month"===e.type?te.default().format("X"):"image"===e.type||"static-image"===e.type?a:"images"===e.type||"static-images"===e.type?[a]:t.i18n("6cb01692eea2fa7066d20fe2b6ccaea3")},exports.mountInIframe=function(e,a,n){if(!location.hash||parent===window)throw new Error(t.i18n("283c2a52955ad87574fd6c0cc932c443"));var r=location.hash.substring(1);1===a.render.length?a.render(F.default.createElement(Ht,{bridgeName:r,envCreator:n})):a.render(F.default.createElement(Ht,{bridgeName:r,envCreator:n}),e),window.onunload=function(){p.unmountComponentAtNode(e)}},exports.needDefaultWidth=st,exports.needFillPlaceholder=ut,exports.noop=se,exports.normalizeId=He,exports.omitControls=ne,exports.patchDiff=Je,exports.persistGet=Le,exports.persistSet=ze,exports.reGenerateID=Ae,exports.reactionWithOldValue=We,exports.registerDSBuilder=Nr,exports.registerEditorPlugin=Tt,exports.removeDragingClass=Ve,exports.repeatArray=qe,exports.setSchemaTpl=function(e,t){Sr[e]=t},exports.sortByList=je,exports.string2CSSUnit=Xe,exports.stringRegExp=it,exports.tipedLabel=xr,exports.translateSchema=lt,exports.unRegisterEditorPlugin=function(e){var t=V.default(Pt,(function(t){return Array.isArray(t)?t[0].id===e:t.id===e}));~t&&Pt.splice(t,1)},exports.undefinedPipeOut=function(e){return Array.isArray(e)?e.length?e:void 0:"string"==typeof e?e||void 0:"object"==typeof e?Object.keys(e).length?e:void 0:e},exports.unitFormula=ot,exports.utils=pt,exports.valuePipeOut=function(e){try{if("undefined"===e)return;return JSON.parse(e)}catch(t){return e}};
